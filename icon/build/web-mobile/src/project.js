window.__require=function e(t,i,n){function r(c,s){if(!i[c]){if(!t[c]){var o=c.split("/");if(o=o[o.length-1],!t[o]){var u="function"==typeof __require&&__require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+c+"'")}}var p=i[c]={exports:{}};t[c][0].call(p.exports,function(e){return r(t[c][1][e]||e)},p,p.exports,e,t,i,n)}return i[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({SpriteIndex:[function(e,t,i){"use strict";cc._RF.push(t,"ea78fiyxKhBAolKr2pinbQV","SpriteIndex"),cc.Class({extends:cc.Component,editor:{menu:"\u3010\u594e\u7279\u5c14\u3011\u901a\u7528\u7ec4\u4ef6/SpriteIndex(\u56fe\u7247\u5207\u6362)"},properties:{spriteFrames:[cc.SpriteFrame],_index:0,index:{type:cc.Integer,set:function(e){e<0||(this._index=e%this.spriteFrames.length,this.node.getComponent(cc.Sprite).spriteFrame=this.spriteFrames[this._index])},get:function(){return this._index}}},next:function(e,t){t?this.index=parseInt(t):this.index++}}),cc._RF.pop()},{}],capture_to_web:[function(e,t,i){"use strict";cc._RF.push(t,"5ac74J4RCNKq6XeV8GboJXx","capture_to_web"),cc.Class({extends:e("./textureRenderUtils"),properties:{srpite:cc.Sprite,iconBg:cc.Node},start:function(){this.label.node.active=!1,this.init()},save:function(){this.createCanvas();var e=this.createImg();this.showImage(e),this.iconBg.active=!0,this.label.node.active=!0},hide:function(){this._img&&this._img.remove(),this.label.node.active=!1,this.iconBg.active=!1}}),cc._RF.pop()},{"./textureRenderUtils":"textureRenderUtils"}],textureRenderUtils:[function(e,t,i){"use strict";cc._RF.push(t,"a886773x+pEaJGtwGtEiE9q","textureRenderUtils"),cc.Class({extends:cc.Component,properties:{camera:cc.Camera,label:cc.Label,spriteFrames:[cc.Sprite],_canvas:null},init:function(){var e=this,t=cc.find("Mask/content/headImage",this.node).getComponent("SpriteIndex"),i=new cc.RenderTexture,n=cc.game._renderContext,r=this.srpite.node.getContentSize();i.initWithSize(r.width,r.height,n.STENCIL_INDEX8),this.camera.targetTexture=i,this.texture=i;var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept","image/*"),a.setAttribute("style","position:absolute;margin-left:30%;margin-top:50px;-webkit-user-select:file"),document.getElementsByTagName("body")[0].appendChild(a);a.addEventListener("change",function(t){var i=t.target.files[0],n=new FileReader;n.readAsDataURL(i),n.onload=function(t){var i=document.createElement("img");i.src=t.target.result;var n=new cc.Texture2D;n._nativeAsset=i,n.on("load",function(){e.srpite.spriteFrame=new cc.SpriteFrame(n)})}});var c=document.createElement("input");c.setAttribute("type","file"),c.setAttribute("accept","image/*"),c.setAttribute("style","position:absolute;margin-left:35%;margin-top:220px;-webkit-user-select:file"),document.getElementsByTagName("body")[0].appendChild(c);c.addEventListener("change",function(i){var n=i.target.files[0],r=new FileReader;r.readAsDataURL(n),r.onload=function(i){var n=document.createElement("img");n.src=i.target.result;var r=new cc.Texture2D;r._nativeAsset=n,r.on("load",function(){e.spriteFrames[0].spriteFrame=new cc.SpriteFrame(r),t.spriteFrames[0]=new cc.SpriteFrame(r)})}});var s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("accept","image/*"),s.setAttribute("style","position:absolute;margin-left:40%;margin-top:220px;-webkit-user-select:file"),document.getElementsByTagName("body")[0].appendChild(s);s.addEventListener("change",function(i){var n=i.target.files[0],r=new FileReader;r.readAsDataURL(n),r.onload=function(i){var n=document.createElement("img");n.src=i.target.result;var r=new cc.Texture2D;r._nativeAsset=n,r.on("load",function(){e.spriteFrames[1].spriteFrame=new cc.SpriteFrame(r),t.spriteFrames[1]=new cc.SpriteFrame(r)})}});var o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept","image/*"),o.setAttribute("style","position:absolute;margin-left:45%;margin-top:220px;-webkit-user-select:file"),document.getElementsByTagName("body")[0].appendChild(o);o.addEventListener("change",function(i){var n=i.target.files[0],r=new FileReader;r.readAsDataURL(n),r.onload=function(i){var n=document.createElement("img");n.src=i.target.result;var r=new cc.Texture2D;r._nativeAsset=n,r.on("load",function(){e.spriteFrames[2].spriteFrame=new cc.SpriteFrame(r),t.spriteFrames[2]=new cc.SpriteFrame(r)})}})},createImg:function(){var e=this._canvas.toDataURL("image/png"),t=document.createElement("img");return t.src=e,t},createCanvas:function(){var e=this.texture.width,t=this.texture.height;this._canvas?this.clearCanvas():(this._canvas=document.createElement("canvas"),this._canvas.width=e,this._canvas.height=t);var i=this._canvas.getContext("2d");this.camera.render();for(var n=this.texture.readPixels(),r=4*e,a=0;a<t;a++){for(var c=t-1-a,s=i.createImageData(e,1),o=c*e*4,u=0;u<r;u++)s.data[u]=n[o+u];i.putImageData(s,0,a)}return this._canvas},showImage:function(e){var t=(cc.view._frameSize.width-this.srpite.node.width)/2,i=(cc.view._frameSize.height-this.srpite.node.width)/2;cc.log("fs:",cc.view._frameSize.width),cc.log("offset:",t,e.width),e.setAttribute("style","position:absolute;margin-left:"+t+"px ;margin-top:"+i+"px"),document.getElementsByTagName("body")[0].appendChild(e),this._img=e},captureAction:function(e,t,i){var n=cc.scaleTo(1,.3),r=cc.v2(t-t/6,i/4),a=cc.moveTo(1,r),c=cc.spawn(n,a);e.runAction(c);var s=cc.blink(.1,1);this.node.runAction(s)},clearCanvas:function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)}}),cc._RF.pop()},{}]},{},["SpriteIndex","capture_to_web","textureRenderUtils"]);