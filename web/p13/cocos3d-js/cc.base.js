System.register(["./deprecated-fd5a8e75.js","./deprecated-9a4df5e2.js","./index-597c71d0.js","./fence-c02d550c.js","./html-text-parser-3ab4e59d.js","./SubContextView-ee466772.js","./component-event-handler-ff37202d.js"],(function(e){"use strict";var t,a,n,r,o,i,s,l,c,u,p,m,d,h,f,g,v,F,b,S,y,C,T,M,G,X,P,R,A,I,_,x,E,B,D,w,L,O,N,V,U,z,k,H,j,W,J,Q,q,Y,K,Z,$,ee,te,ae,ne,re,oe,ie,se,le,ce,ue,pe,me,de,he,fe,ge,ve,Fe,be,Se,ye,Ce,Te,Me,Ge,Xe,Pe,Re,Ae,Ie,_e,xe,Ee,Be,De,we,Le,Oe,Ne,Ve,Ue,ze,ke,He,je,We,Je,Qe,qe,Ye,Ke,Ze,$e,et,tt,at,nt,rt,ot,it,st,lt,ct,ut,pt,mt,dt,ht,ft,gt,vt,Ft,bt,St;return{setters:[function(R){t=R.P,a=R.l,n=R.o,r=R.w,o=R.p,i=R.q,s=R.u,l=R.v,c=R.x,u=R.y,p=R.z,m=R.B,R.D,d=R.V,h=R.j,f=R.d,g=R.M,v=R.E,F=R.c,b=R.t,S=R._,y=R.b,C=R.e,T=R.f,M=R.g,G=R.i,X=R.s,P=R.F;var A={};A.AffineTransform=R.S,A.Asset=R.aC,A.BitMask=R.ai,A.CCBoolean=R.aw,A.CCClass=R.ar,A.CCFloat=R.av,A.CCInteger=R.au,A.CCObject=R.as,A.CCString=R.ax,A.Color=R.Y,A.Component=R.C,A.EPSILON=R.$,A.Enum=R.aj,A.Event=R.ay,A.EventTarget=R.az,A.Eventify=R.aA,A.JavaScript=R.aE,A.Mat3=R.O,A.Mat4=R.M,A.Pool=R.P,A.Quat=R.Q,A.RawAsset=R.aB,A.Rect=R.W,A.Script=R.aD,A.Size=R.T,A.TypeScript=R.aF,A.ValueType=R.ak,A.Vec2=R.H,A.Vec3=R.V,A.Vec4=R.K,A.absMax=R.ah,A.absMaxComponent=R.ag,A.approx=R.a1,A.assert=R.q,A.assertID=R.z,A.bits=R.G,A.ccenum=R.E,A.cclegacy=R.l,A.clamp=R.k,A.clamp01=R.a2,A.color=R.Z,A.equals=R.a0,A.error=R.p,A.errorID=R.y,A.inverseLerp=R.af,A.isDisplayStats=R.aG,A.isValid=R.at,A.js=R.al,A.lerp=R.a3,A.log=R.o,A.logID=R.v,A.markAsWarning=R.aq,A.mat4=R.R,A.misc=R.am,A.nextPow2=R.ac,A.pingPong=R.ae,A.pseudoRandom=R.a9,A.pseudoRandomRange=R.aa,A.pseudoRandomRangeInt=R.ab,A.quat=R.N,A.random=R.a6,A.randomRange=R.a7,A.randomRangeInt=R.a8,A.rect=R.X,A.removeProperty=R.ap,A.repeat=R.ad,A.replaceProperty=R.ao,A.setDefaultLogTimes=R.an,A.setDisplayStats=R.aH,A.size=R.U,A.sys=R.aI,A.toDegree=R.a5,A.toRadian=R.a4,A.v2=R.I,A.v3=R.J,A.v4=R.L,A.warn=R.w,A.warnID=R.x,e(A)},function(t){R=t.R,A=t.C,I=t.j,_=t.e,x=t.m,E=t.b,B=t.d,D=t.c,w=t.a,L=t._,O=t.s,N=t.g,V=t.G,U=t.f,z=t.h,k=t.i,H=t.u,j=t.M,W=t.k,J=t.l,Q=t.J,q=t.n,Y=t.o,K=t.p,Z=t.q,$=t.S,ee=t.r,te=t.t,ae=t.v,ne=t.w,re=t.x,oe=t.y,ie=t.z,se=t.A,le=t.B,ce=t.D,ue=t.E,pe=t.F,me=t.H,de=t.I,he=t.K,fe=t.L,ge=t.V,ve=t.N,Fe=t.O,be=t.P,Se=t.Q,ye=t.T,Ce=t.U,Te=t.W,Me=t.X,Ge=t.Y,Xe=t.Z,Pe=t.$,Re=t.a0,Ae=t.a1,Ie=t.a2,_e=t.a3,xe=t.a4,Ee=t.a5,Be=t.a6,De=t.a7,we=t.a8,Le=t.a9,Oe=t.aa,Ne=t.ab,Ve=t.ac,Ue=t.ad,ze=t.ae,ke=t.af,He=t.ag,je=t.ah,We=t.ai,Je=t.aj,Qe=t.ak,qe=t.al,Ye=t.am,Ke=t.an,Ze=t.ao,$e=t.ap,et=t.aq,tt=t.ar,at=t.as,nt=t.at,rt=t.au,ot=t.av,it=t.aw,st=t.ax,lt=t.ay,ct=t.az,ut=t.aA;var a={};a.Acceleration=t.ba,a.AssetLibrary=t.aW,a.BASELINE_RATIO=t.aC,a.BaseNode=t.cW,a.BitmapFont=t.b0,a.BufferTextureCopy=t.cc,a.CachedArray=t.C,a.CompactValueTypeArray=t.aP,a.DESCRIPTOR_BUFFER_TYPE=t.bj,a.DESCRIPTOR_DYNAMIC_TYPE=t.cj,a.DESCRIPTOR_SAMPLER_TYPE=t.bk,a.Downloader=t.cR,a.EffectAsset=t.b2,a.EventAcceleration=t.bd,a.EventKeyboard=t.be,a.EventMouse=t.bb,a.EventTouch=t.bc,a.Font=t.b1,a.ForwardFlow=t.cK,a.ForwardPipeline=t.cJ,a.ForwardStage=t.cL,a.GFXAPI=t.cd,a.GFXAddress=t.bI,a.GFXAttributeName=t.G,a.GFXBindingMappingInfo=t.cf,a.GFXBlendFactor=t.bF,a.GFXBlendOp=t.bE,a.GFXBlendState=t.co,a.GFXBlendTarget=t.cn,a.GFXBuffer=t.bo,a.GFXBufferAccessBit=t.by,a.GFXBufferFlagBit=t.bx,a.GFXBufferTextureCopy=t.c3,a.GFXBufferUsageBit=t.h,a.GFXClearFlag=t.b_,a.GFXColor=t.bZ,a.GFXColorAttachment=t.cs,a.GFXColorMask=t.bG,a.GFXCommandBuffer=t.bp,a.GFXCommandBufferType=t.bP,a.GFXComparisonFunc=t.bC,a.GFXCullMode=t.bB,a.GFXDepthStencilAttachment=t.ct,a.GFXDepthStencilState=t.cm,a.GFXDescriptorSet=t.bl,a.GFXDescriptorSetLayout=t.ck,a.GFXDescriptorType=t.bO,a.GFXDevice=t.cg,a.GFXDrawInfo=t.bm,a.GFXDynamicStateFlagBit=t.bU,a.GFXExtent=t.c0,a.GFXFeature=t.ce,a.GFXFilter=t.bH,a.GFXFormat=t.f,a.GFXFormatInfo=t.c5,a.GFXFormatInfos=t.c7,a.GFXFormatSize=t.c8,a.GFXFormatSurfaceSize=t.c9,a.GFXFormatType=t.c4,a.GFXFramebuffer=t.ch,a.GFXGetTypeSize=t.ca,a.GFXInputAssembler=t.ci,a.GFXInputState=t.cp,a.GFXLoadOp=t.bQ,a.GFXMemoryStatus=t.c6,a.GFXMemoryUsageBit=t.i,a.GFXObject=t.bv,a.GFXObjectType=t.bu,a.GFXOffset=t.b$,a.GFXPipelineBindPoint=t.bT,a.GFXPipelineState=t.cq,a.GFXPolygonMode=t.bz,a.GFXPrimitiveMode=t.t,a.GFXQueue=t.cr,a.GFXQueueType=t.bW,a.GFXRasterizerState=t.cl,a.GFXRect=t.bX,a.GFXRenderPass=t.cu,a.GFXSampleCount=t.bL,a.GFXSampler=t.cw,a.GFXSamplerState=t.cv,a.GFXShadeModel=t.bA,a.GFXShader=t.cC,a.GFXShaderInfo=t.cB,a.GFXShaderStage=t.cx,a.GFXShaderStageFlagBit=t.bN,a.GFXStencilFace=t.bV,a.GFXStencilOp=t.bD,a.GFXStoreOp=t.bR,a.GFXTexture=t.cE,a.GFXTextureCopy=t.c2,a.GFXTextureFlagBit=t.bM,a.GFXTextureLayout=t.bS,a.GFXTextureSubres=t.c1,a.GFXTextureType=t.bJ,a.GFXTextureUsageBit=t.bK,a.GFXType=t.bw,a.GFXUniform=t.cy,a.GFXUniformBlock=t.cz,a.GFXUniformSampler=t.cA,a.GFXViewport=t.bY,a.GFX_DRAW_INFO_SIZE=t.bn,a.GFX_MAX_ATTACHMENTS=t.bs,a.GFX_MAX_BUFFER_BINDINGS=t.bt,a.GFX_MAX_TEXTURE_UNITS=t.br,a.GFX_MAX_VERTEX_ATTRIBUTES=t.bq,a.Game=t.bh,a.ImageAsset=t.aX,a.IsPowerOf2=t.cD,a.JsonAsset=t.aV,a.LabelAtlas=t.a$,a.Layers=t.cZ,a.Loader=t.cS,a.LoadingItems=t.cV,a.Material=t.b3,a.Mesh=t.at,a.MeshRenderer=t.as,a.MissingScript=t.d1,a.ModelComponent=t.as,a.Node=t.cX,a.NodeActivator=t.d0,a.Pipeline=t.cT,a.Prefab=t.aR,a.PrefabInfo=t.aH,a.PrivateNode=t.c$,a.RecyclePool=t.R,a.RenderFlow=t.cG,a.RenderPipeline=t.cF,a.RenderStage=t.cH,a.RenderTexture=t.b6,a.RenderView=t.cI,a.RenderableComponent=t.d4,a.RenderingSubMesh=t.b4,a.Scene=t.cY,a.SceneAsset=t.aS,a.ShadowFlow=t.cM,a.ShadowStage=t.cN,a.SkelAnimDataHub=t.d5,a.Skeleton=t.b5,a.SpriteAtlas=t.aT,a.SpriteFrame=t.b7,a.SystemEventType=t.bg,a.TTFFont=t.a_,a.TextAsset=t.aU,a.Texture2D=t.aY,a.TextureCube=t.aZ,a.Touch=t.bf,a.UIFlow=t.cO,a.UIStage=t.cP,a.WorldNode3DToLocalNodeUI=t.aJ,a.WorldNode3DToWorldNodeUI=t.aK,a._decorator=t.aM,a.builtinResMgr=t.d3,a.convertUtils=t.aL,a.deserialize=t.aN,a.effects=t.d2,a.eventManager=t.b9,a.find=t.c_,a.fragmentText=t.aG,a.game=t.bi,a.getPathFromRoot=t.d6,a.getTypedArrayConstructor=t.cb,a.getWorldTransformUntilRoot=t.d7,a.instantiate=t.aO,a.isUnicodeCJK=t.aD,a.isUnicodeSpace=t.aE,a.loader=t.cU,a.macro=t.b8,a.murmurhash2_32_gc=t.aI,a.path=t.aB,a.safeMeasureText=t.aF,a.textureUtil=t.aQ,a.url=t.cQ,e(a)},function(t){pt=t.B,mt=t.S,dt=t.U,ht=t.M,ft=t.a,gt=t.C,vt=t.b,Ft=t.c,bt=t.d,St=t.e;var a={};a.AnimCurve=t.z,a.Animation=t.v,a.AnimationClip=t.I,a.AnimationComponent=t.v,a.AnimationManager=t.J,a.AnimationState=t.A,a.BatchedSkinningModelComponent=t.i,a.Camera=t.f,a.CameraComponent=t.f,a.ComponentModifier=t.o,a.CubicSplineNumberValue=t.e,a.CubicSplineQuatValue=t.d,a.CubicSplineVec2Value=t.C,a.CubicSplineVec3Value=t.b,a.CubicSplineVec4Value=t.c,a.CurveValueAdapter=t.p,a.DirectionalLight=t.D,a.DirectionalLightComponent=t.D,a.EventInfo=t.E,a.HierachyModifier=t.H,a.Light=t.L,a.LightComponent=t.L,a.Profiler=t.P,a.RatioSampler=t.R,a.SkeletalAnimation=t.w,a.SkeletalAnimationComponent=t.w,a.SkeletalAnimationState=t.K,a.SkinnedMeshBatchRenderer=t.i,a.SkinnedMeshRenderer=t.h,a.SkinnedMeshUnit=t.j,a.SkinningModelComponent=t.h,a.SkinningModelUnit=t.j,a.Socket=t.N,a.SphereLight=t.k,a.SphereLightComponent=t.k,a.SpotLight=t.l,a.SpotLightComponent=t.l,a.UniformCurveValueAdapter=t.q,a.bezier=t.x,a.bezierByTime=t.y,a.computeRatioByType=t.G,a.easing=t.n,a.geometry=t.g,a.isCustomTargetModifier=t.t,a.isElementModifier=t.s,a.isPropertyModifier=t.r,a.math=t.m,a.profiler=t.O,a.sampleAnimationCurve=t.F,a.utils=t.u,e(a)},function(t){var a={};a.GFXFence=t.a,a.GFXPipelineLayout=t.G,e(a)},function(t){e("HtmlTextParser",t.H)},function(t){var a={};a.ResolutionPolicy=t.R,a.SubContextView=t.S,a.SystemEvent=t.a,a.View=t.V,a.screen=t.s,a.systemEvent=t.b,a.view=t.v,e(a)},function(t){var a={};a.Director=t.D,a.EventHandler=t.E,a.RenderWindow=t.R,a.Scheduler=t.S,a.System=t.a,a.director=t.d,e(a)}],execute:function(){e("memop",Object.freeze({__proto__:null,Pool:t,RecyclePool:R,CachedArray:A})),a.log=n,a.warn=r,a.error=o,a.assert=i,a._throw=s,a.logID=l,a.warnID=c,a.errorID=u,a.assertID=p,a.debug=m,a.path={join:I,extname:_,mainFileName:x,basename:E,dirname:B,changeExtname:D,changeBasename:w,_normalize:L,stripSep:O,get sep(){return N()}};var yt=0,Ct={},Tt=function(e){if(void 0===Ct[e]){var t=1<<yt;Ct[e]=t,yt+=1}},Mt=Object.freeze({__proto__:null,uploadJointData:H,MINIMUM_JOINT_TEXTURE_SIZE:j,selectJointsMediumFormat:W,jointTextureSamplerHash:J,JointTexturePool:Q,JointAnimationInfo:q,getWorldMatrix:Y,getTransform:K,deleteTransform:Z,SkinningModel:$,BakedSkinningModel:pt,MorphModel:ee});var Gt=Object.freeze({__proto__:null,box:re,cone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ae(0,e,t,a)},cylinder:ae,plane:oe,quad:function(e){var t=ne(e),a={positions:[-.5,-.5,0,-.5,.5,0,.5,.5,0,.5,-.5,0],indices:[0,3,1,3,2,1],minPos:{x:-.5,y:-.5,z:0},maxPos:{x:.5,y:.5,z:0},boundingRadius:Math.sqrt(.5)};return!1!==t.includeNormal&&(a.normals=[0,0,1,0,0,1,0,0,1,0,0,1]),!1!==t.includeUV&&(a.uvs=[0,0,0,1,1,1,1,0]),a},sphere:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=void 0!==t.segments?t.segments:32,n=[],r=[],o=[],i=[],s=new d(-e,-e,-e),l=new d(e,e,e),c=e,u=0;u<=a;++u)for(var p=u*Math.PI/a,m=Math.sin(p),h=-Math.cos(p),f=0;f<=a;++f){var g=2*f*Math.PI/a-Math.PI/2,v=Math.sin(g),F=Math.cos(g),b=v*m,S=h,y=F*m,C=f/a,T=u/a;if(n.push(b*e,S*e,y*e),r.push(b,S,y),o.push(C,T),u<a&&f<a){var M=a+1,G=M*u+f,X=M*(u+1)+f,P=M*(u+1)+f+1,R=M*u+f+1;i.push(G,R,X),i.push(R,P,X)}}return{positions:n,indices:i,normals:r,uvs:o,minPos:s,maxPos:l,boundingRadius:c}},torus:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.4,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.radialSegments||32,r=a.tubularSegments||32,o=a.arc||2*Math.PI,i=[],s=[],l=[],c=[],u=new d(-e-t,-t,-e-t),p=new d(e+t,t,e+t),m=e+t,h=0;h<=n;h++)for(var f=0;f<=r;f++){var g=f/r,v=h/n,F=g*o,b=v*Math.PI*2,S=(e+t*Math.cos(b))*Math.sin(F),y=t*Math.sin(b),C=(e+t*Math.cos(b))*Math.cos(F),T=Math.sin(F)*Math.cos(b),M=Math.sin(b),G=Math.cos(F)*Math.cos(b);if(i.push(S,y,C),s.push(T,M,G),l.push(g,v),f<r&&h<n){var X=r+1,P=X*h+f,R=X*(h+1)+f,A=X*(h+1)+f+1,I=X*h+f+1;c.push(P,I,R),c.push(I,A,R)}}return{positions:i,normals:s,uvs:l,indices:c,minPos:u,maxPos:p,boundingRadius:m}},capsule:ie,circle:function(e){var t=function(e){return(e=ne(e)).segments=64,e}(e).segments,a=new Array(3*(t+1));a[0]=0,a[1]=0,a[2]=0;var n=new Array(1+2*t);n[0]=0;for(var r=2*Math.PI/t,o=0;o<t;++o){var i=r*o,s=Math.cos(i),l=Math.sin(i),c=3*(o+1);a[c+0]=s,a[c+1]=l,a[c+2]=0;var u=2*o;n[1+u]=o+1,n[1+(u+1)]=o+2}return t>0&&(n[n.length-1]=1),{positions:a,indices:n,minPos:{x:1,y:1,z:0},maxPos:{x:-1,y:-1,z:0},boundingRadius:1,primitiveMode:te.TRIANGLE_FAN}},translate:function(e,t){for(var a=t.x||0,n=t.y||0,r=t.z||0,o=Math.floor(e.positions.length/3),i=0;i<o;++i){var s=3*i,l=3*i+1,c=3*i+2;e.positions[s]=e.positions[s]+a,e.positions[l]=e.positions[l]+n,e.positions[c]=e.positions[c]+r}return e.minPos&&(e.minPos.x+=a,e.minPos.y+=n,e.minPos.z+=r),e.maxPos&&(e.maxPos.x+=a,e.maxPos.y+=n,e.maxPos.z+=r),e},scale:function(e,t){for(var a=t.x||0,n=t.y||0,r=t.z||0,o=Math.floor(e.positions.length/3),i=0;i<o;++i){var s=3*i,l=3*i+1,c=3*i+2;e.positions[s]*=a,e.positions[l]*=n,e.positions[c]*=r}return e.minPos&&(e.minPos.x*=a,e.minPos.y*=n,e.minPos.z*=r),e.maxPos&&(e.maxPos.x*=a,e.maxPos.y*=n,e.maxPos.z*=r),e.boundingRadius=Math.max(Math.max(a,n),r),e},wireframed:function(e){var t=e.indices;if(!t)return e;if(e.primitiveMode&&e.primitiveMode!==te.TRIANGLE_LIST)return e;for(var a=[[0,1],[1,2],[2,0]],n=[],r={},o=0;o<t.length;o+=3)for(var i=0;i<3;++i){var s=t[o+a[i][0]],l=t[o+a[i][1]],c=s>l?l<<16|s:s<<16|l;void 0===r[c]&&(r[c]=0,n.push(s,l))}return e.indices=n,e.primitiveMode=te.LINE_LIST,e},wireframe:function(e){for(var t=[[0,1],[1,2],[2,0]],a=[],n={},r=0;r<e.length;r+=3)for(var o=0;o<3;++o){var i=e[r+t[o][0]],s=e[r+t[o][1]],l=i>s?s<<16|i:i<<16|s;void 0===n[l]&&(n[l]=0,a.push(i,s))}return a},invWinding:function(e){for(var t=[],a=0;a<e.length;a+=3)t.push(e[a],e[a+2],e[a+1]);return t},toWavefrontOBJ:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e.indices||!e.uvs||!e.normals||void 0!==e.primitiveMode&&e.primitiveMode!==te.TRIANGLE_LIST)return"";for(var a=e.positions,n=e.uvs,r=e.normals,o=e.indices,i=function(e){return"".concat(o[e]+1,"/").concat(o[e]+1,"/").concat(o[e]+1)},s="",l=0;l<a.length;l+=3)s+="v ".concat(a[l]*t," ").concat(a[l+1]*t," ").concat(a[l+2]*t,"\n");for(var c=0;c<n.length;c+=2)s+="vt ".concat(n[c]," ").concat(n[c+1],"\n");for(var u=0;u<r.length;u+=3)s+="vn ".concat(r[u]," ").concat(r[u+1]," ").concat(r[u+2],"\n");for(var p=0;p<o.length;p+=3)s+="f ".concat(i(p)," ").concat(i(p+1)," ").concat(i(p+2),"\n");return s},normals:function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Array(2*e.length),r=0;r<e.length/3;++r){var o=3*r,i=6*r;n[i+0]=e[o+0],n[i+1]=e[o+1],n[i+2]=e[o+2],n[i+3]=e[o+0]+t[o+0]*a,n[i+4]=e[o+1]+t[o+1]*a,n[i+5]=e[o+2]+t[o+2]*a}return n},applyDefaultGeometryOptions:ne});e("primitives",Gt);var Xt=Object.freeze({__proto__:null,Ambient:se,get CameraFOVAxis(){return le},get CameraProjection(){return ce},get CameraAperture(){return ue},get CameraISO(){return pe},get CameraShutter(){return me},SKYBOX_FLAG:de,Camera:he,CameraVisFlags:fe,VisibilityFlags:ge,DirectionalLight:ve,ColorTemperatureToRGB:Fe,get LightType(){return be},nt2lm:Se,Light:ye,get ModelType(){return Ce},Model:Te,ShadowType:Me,PCFType:Ge,Shadows:Xe,RenderScene:Pe,Skybox:Re,SphereLight:mt,SpotLight:Ae,SubModel:Ie}),Pt=Tt,Rt=Object.freeze({__proto__:null,addStage:Pt,scene:Xt,models:Mt,createIA:function(e,t){if(!t.positions)return console.error("The data must have positions field"),null;for(var a=[],n=t.positions.length/3,r=0;r<n;++r)a.push(t.positions[3*r],t.positions[3*r+1],t.positions[3*r+2]),t.normals&&a.push(t.normals[3*r],t.normals[3*r+1],t.normals[3*r+2]),t.uvs&&a.push(t.uvs[2*r],t.uvs[2*r+1]),t.colors&&a.push(t.colors[3*r],t.uvs[3*r+1],t.colors[3*r+2]);var o=[];o.push({name:V.ATTR_POSITION,format:U.RGB32F}),t.normals&&o.push({name:V.ATTR_NORMAL,format:U.RGB32F}),t.uvs&&o.push({name:V.ATTR_TEX_COORD,format:U.RG32F}),t.colors&&o.push({name:V.ATTR_COLOR,format:U.RGB32F});var i=e.createBuffer({usage:z.VERTEX|z.TRANSFER_DST,memUsage:k.HOST|k.DEVICE,size:4*a.length,stride:4*a.length/n});i.update(new Float32Array(a));var s=e.createBuffer({usage:z.INDEX|z.TRANSFER_DST,memUsage:k.HOST|k.DEVICE,size:2*t.indices.length,stride:2});return s.update(new Uint16Array(t.indices)),e.createInputAssembler({attributes:o,vertexBuffers:[i],indexBuffer:s})},get RenderQueue(){return _e},get PassStage(){return xe},get PropertyType(){return Ee},genHandle:Be,getPropertyTypeFromHandle:De,getTypeFromHandle:we,getSetIndexFromHandle:Le,getBindingFromHandle:Oe,getOffsetFromHandle:Ne,customizeType:Ve,type2reader:Ue,type2writer:ze,getDefaultFromType:ke,overrideMacros:He,get BatchingSchemes(){return je},Pass:We,programLib:Je,get SamplerInfoIndex(){return Qe},defaultSamplerHash:qe,genSamplerHash:Ye,samplerLib:Ke,nearestPOT:Ze,TextureBufferPool:$e,MaterialInstance:et,PassInstance:tt});function At(e,t){var a=e.sharedMaterials.length;if(a!==t.sharedMaterials.length)return!1;for(var n=0;n<a;n++)if(e.getRenderMaterial(n)!==t.getRenderMaterial(n))return!1;return!0}e("renderer",Rt);e("BatchingUtility",function(){function e(){f(this,e)}return h(e,null,[{key:"batchStaticModel",value:function(e,t){var a=e.getComponentsInChildren(at);if(a.length<2)return console.error("the number of static models to batch is less than 2,it needn't batch."),!1;for(var n=1;n<a.length;n++){if(!a[0].mesh.validateMergingMesh(a[n].mesh))return console.error("the meshes of "+a[0].node.name+" and "+a[n].node.name+" can't be merged"),!1;if(!At(a[0],a[n]))return console.error("the materials of "+a[0].node.name+" and "+a[n].node.name+" can't be merged"),!1}var r=new nt,o=new g,i=new g;e.getWorldMatrix(i),g.invert(i,i);for(var s=0;s<a.length;s++){var l=a[s];l.node.getWorldMatrix(o),g.multiply(o,i,o),r.merge(a[s].mesh,o),l.enabled=!1}var c=t.addComponent(at);return c.mesh=r,c.sharedMaterials=a[0].sharedMaterials,!0}},{key:"unbatchStaticModel",value:function(e,t){for(var a=e.getComponentsInChildren(at),n=0;n<a.length;n++){a[n].enabled=!0}var r=t.getComponent(at);return r&&r.destroy(),!0}}]),e}()),e("pipeline",rt);e("animation",Object.freeze({__proto__:null,UniformProxyFactory:dt,MorphWeightsValueProxy:ht,MorphWeightsAllValueProxy:ft,isPropertyPath:ot,isCustomPath:it,HierarchyPath:st,ComponentPath:lt,evaluatePath:ct,CubicSplineVec2Value:gt,CubicSplineVec3Value:vt,CubicSplineVec4Value:Ft,CubicSplineQuatValue:bt,CubicSplineNumberValue:St}));var It,_t,xt,Et,Bt,Dt,wt,Lt,Ot,Nt=e("NodePool",function(){function e(t){f(this,e),this.poolHandlerComp=void 0,this._pool=void 0,this.poolHandlerComp=t,this._pool=[]}return h(e,[{key:"size",value:function(){return this._pool.length}},{key:"clear",value:function(){for(var e=this._pool.length,t=0;t<e;++t)this._pool[t].destroy();this._pool.length=0}},{key:"put",value:function(e){if(e&&-1===this._pool.indexOf(e)){e.removeFromParent();var t=this.poolHandlerComp?e.getComponent(this.poolHandlerComp):null;t&&t.unuse&&t.unuse(),this._pool.push(e)}}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=this._pool.length-1;if(n<0)return null;var r=this._pool[n];this._pool.length=n;var o=this.poolHandlerComp?r.getComponent(this.poolHandlerComp):null;return o&&o.reuse&&o.reuse(arguments),r}}]),e}());a.NodePool=Nt,function(e){e[e.BOX=0]="BOX",e[e.SPHERE=1]="SPHERE",e[e.CYLINDER=2]="CYLINDER",e[e.CONE=3]="CONE",e[e.CAPSULE=4]="CAPSULE",e[e.TORUS=5]="TORUS",e[e.PLANE=6]="PLANE",e[e.QUAD=7]="QUAD"}(Ot||(Ot={})),v(Ot);var Vt=e("Primitive",(It=F("cc.Primitive"),_t=b(Ot),It((Lt=wt=function(e){function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot.BOX;return f(this,t),e=C(this,T(t).call(this)),M(e,"type",Bt,G(e)),M(e,"info",Dt,G(e)),e.type=a,e}return y(t,e),h(t,[{key:"onLoaded",value:function(){ut(Gt[Ot[this.type].toLowerCase()](this.info),this)}}]),t}(nt),wt.PrimitiveType=Ot,Bt=S((Et=Lt).prototype,"type",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ot.BOX}}),Dt=S(Et.prototype,"info",[X,P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),xt=Et))||xt));a.Primitive=Vt,a.renderer=Rt,a.primitives=Gt}}}));
