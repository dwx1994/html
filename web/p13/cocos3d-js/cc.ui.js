System.register(["./deprecated-fd5a8e75.js","./deprecated-9a4df5e2.js","./index-597c71d0.js","./html-text-parser-3ab4e59d.js","./SubContextView-ee466772.js","./component-event-handler-ff37202d.js"],(function(t){"use strict";var e,i,n,o,r,a,s,l,h,u,c,p,_,d,f,g,y,v,m,b,T,C,S,x,w,O,E,D,A,k,L,P,R,z,I,B,H,M,N,F,V,U,W,G,j,X,Y,Z,q,$,K,Q,J,tt,et,it,nt,ot,rt,at,st,lt,ht,ut,ct,pt,_t,dt,ft,gt,yt,vt,mt,bt,Tt,Ct,St,xt,wt,Ot,Et,Dt,At,kt,Lt,Pt,Rt,zt,It,Bt,Ht,Mt,Nt,Ft,Vt,Ut,Wt,Gt,jt,Xt,Yt,Zt,qt,$t,Kt,Qt,Jt,te,ee,ie,ne,oe,re;return{setters:[function(t){e=t.V,i=t.aj,n=t.c,o=t.t,r=t.b2,a=t._,s=t.l,l=t.h,h=t.m,u=t.a,c=t.s,p=t.Y,_=t.b,d=t.j,f=t.d,g=t.e,y=t.f,v=t.g,m=t.i,b=t.W,T=t.C,C=t.ap,S=t.n,x=t.M,w=t.E,O=t.b3,E=t.aV,D=t.aW,A=t.a3,k=t.bP,L=t.b4,P=t.b6,R=t.x,z=t.aO,I=t.bF,B=t.bQ,H=t.aI,M=t.T,N=t.F,F=t.H,V=t.k,U=t.bx,W=t.r,G=t.a2,j=t.w,X=t.bh,Y=t.D,Z=t.ay,q=t.v,$=t.be,K=t.bz,Q=t.aY,J=t.bR,tt=t.a$,et=t.y},function(e){it=e.b_,nt=e.b6,ot=e.da,rt=e.de,at=e.db,st=e.dc,lt=e.cX,ht=e.bi,ut=e.b7,ct=e.bg,pt=e.b1,_t=e.b3,dt=e.dQ,ft=e.b0,gt=e.aX,yt=e.b8,vt=e.dS,mt=e.W,bt=e.aq,Tt=e.d3,Ct=e.bh,St=e.c$,xt=e.aT,wt=e.a_,Ot=e.cU,Et=e.aG,Dt=e.aC,At=e.aD,kt=e.aE,Lt=e.bc,Pt=e.dl,Rt=e.cY,zt=e.R,It=e.d$,Bt=e.G,Ht=e.f,Mt=e.t,Nt=e.aA,Ft=e.aF,Vt=e.dg,Ut=e.aY;var i={};i.UITransform=e.dc,i.UITransformComponent=e.dc,t(i)},function(t){Wt=t.f},function(t){Gt=t.H},function(e){jt=e.v,Xt=e.c,Yt=e.U,Zt=e.d,qt=e.s,$t=e.I,Kt=e.V;var i={};i.InstanceMaterialType=e.I,i.RenderComponent=e.U,i.Sprite=e.d,i.SpriteComponent=e.d,i.UIRenderable=e.U,t(i)},function(e){Qt=e.d,Jt=e.E,te=e.D,ee=e.M,ie=e.U,ne=e.v,oe=e.b,re=e.c;var i={};i.MeshBuffer=e.M,i.StencilManager=e.b,i.UIVertexFormat=e.c,t(i)}],execute:function(){var ae,se,le,he,ue,ce,pe,_e,de,fe,ge,ye,ve,me,be,Te,Ce,Se,xe,we,Oe,Ee;t({CacheMode:void 0,HorizontalTextAlignment:void 0,Overflow:void 0,VerticalTextAlignment:void 0});var De,Ae,ke=new e,Le=i({SOLID_COLOR:it.ALL,DEPTH_ONLY:it.DEPTH_STENCIL,DONT_CLEAR:it.NONE}),Pe=i({OVERLAY:0,INTERSPERSE:1}),Re=(ae=n("cc.Canvas"),se=l(),le=rt(100),he=at(st),ue=h(),ce=o(Le),pe=u(),_e=u(),de=o(Pe),fe=u(),ge=u(),ye=o(nt),ve=u(),me=o(Le),be=o(Pe),De=ae(Te=se(Te=le(Te=he(Te=ue(Te=r(Te=ot((a((Ce=function(t){function i(){var t;return f(this,i),t=g(this,y(i).call(this)),v(t,"_priority",Se,m(t)),v(t,"_targetTexture",xe,m(t)),v(t,"_clearFlag",we,m(t)),v(t,"_color",Oe,m(t)),v(t,"_renderMode",Ee,m(t)),t._thisOnResized=void 0,t._camera=null,t._pos=new e,t._thisOnResized=t.alignWithScreen.bind(m(t)),t}return _(i,t),d(i,[{key:"clearFlag",get:function(){return this._clearFlag},set:function(t){this._clearFlag=t,this._camera&&(this._camera.clearFlag=this._clearFlag)}},{key:"color",get:function(){return this._color},set:function(t){p.copy(this._color,t),this._camera&&(this._camera.clearColor.r=t.r/255,this._camera.clearColor.g=t.g/255,this._camera.clearColor.b=t.b/255,this._camera.clearColor.a=t.a/255)}},{key:"renderMode",get:function(){return this._renderMode},set:function(t){this._renderMode=t,this._camera&&(this._camera.priority=this._getViewPriority())}},{key:"priority",get:function(){return this._priority},set:function(t){this._priority=t,this._camera&&(this._camera.priority=this._getViewPriority()),Qt.root&&Qt.root.ui&&Qt.root.ui.sortScreens()}},{key:"targetTexture",get:function(){return this._targetTexture},set:function(t){if(this._targetTexture!==t){var e=this._targetTexture;this._targetTexture=t,this._checkTargetTextureEvent(e),this._updateTargetTexture()}}},{key:"visibility",get:function(){return this._camera?this._camera.view.visibility:-1}},{key:"camera",get:function(){return this._camera}}]),d(i,[{key:"__preload",value:function(){var t=new lt("UICamera_"+this.node.name);t.setPosition(0,0,1e3),this._camera=Qt.root.createCamera(),this._camera.initialize({name:"ui_"+this.node.name,node:t,projection:Wt.ProjectionType.ORTHO,priority:this._getViewPriority(),flows:["UIFlow"]}),this._camera.fov=45,this._camera.clearFlag=this.clearFlag,this._camera.farClip=2e3,this._camera.viewport=new b(0,0,1,1),this.color=this._color,this._checkTargetTextureEvent(null),this._updateTargetTexture(),jt.on("design-resolution-changed",this._thisOnResized),this.alignWithScreen(),Qt.root.ui.addScreen(this)}},{key:"onEnable",value:function(){this._camera&&Qt.root.ui.renderScene.addCamera(this._camera)}},{key:"onDisable",value:function(){this._camera&&Qt.root.ui.renderScene.removeCamera(this._camera)}},{key:"onDestroy",value:function(){Qt.root.ui.removeScreen(this),this._camera&&Qt.root.destroyCamera(this._camera),this._targetTexture&&this._targetTexture.off("resize"),jt.off("design-resolution-changed",this._thisOnResized)}},{key:"alignWithScreen",value:function(){var t,i;this.node.getPosition(this._pos);var n=Xt;t=n,i=jt.getDesignResolutionSize();var o=0,r=0;jt.getResolutionPolicy()===s.view._rpNoBorder&&(o=.5*(i.width-n.width),r=.5*(i.height-n.height)),e.set(ke,.5*n.width+o,.5*n.height+r,0),this._pos.equals(ke)||this.node.setPosition(ke);var a=this.node._uiProps.uiTransformComp;a.width!==t.width&&(a.width=t.width),a.height!==t.height&&(a.height=t.height),this.node.getWorldPosition(ke);var l=this._camera;if(l){if(this._targetTexture){var h=this._targetTexture.window;l.setFixedSize(h.width,h.height),l.orthoHeight=n.height/2}else{var u=ht.canvas;l.resize(u.width,u.height),l.orthoHeight=ht.canvas.height/jt.getScaleY()/2}l.node.setPosition(ke.x,ke.y,1e3),l.update()}}},{key:"_checkTargetTextureEvent",value:function(t){var e=this;t&&t.off("resize"),this._targetTexture&&this._targetTexture.on("resize",(function(t){e._camera&&e._camera.setFixedSize(t.width,t.height)}),this)}},{key:"_updateTargetTexture",value:function(){if(this._camera){var t=this._camera;if(this._targetTexture){var e=this._targetTexture.window;t.changeTargetWindow(e),t.orthoHeight=Xt.height/2,t.isWindowSize=!1}else t.changeTargetWindow(),t.orthoHeight=ht.canvas.height/jt.getScaleY()/2,t.isWindowSize=!0}}},{key:"_getViewPriority",value:function(){return this._renderMode===Pe.OVERLAY?this._priority|1<<30:this._priority}}]),i}(T)).prototype,"clearFlag",[ce,pe],Object.getOwnPropertyDescriptor(Ce.prototype,"clearFlag"),Ce.prototype),a(Ce.prototype,"color",[_e],Object.getOwnPropertyDescriptor(Ce.prototype,"color"),Ce.prototype),a(Ce.prototype,"renderMode",[de,fe],Object.getOwnPropertyDescriptor(Ce.prototype,"renderMode"),Ce.prototype),a(Ce.prototype,"priority",[ge],Object.getOwnPropertyDescriptor(Ce.prototype,"priority"),Ce.prototype),a(Ce.prototype,"targetTexture",[ye,ve],Object.getOwnPropertyDescriptor(Ce.prototype,"targetTexture"),Ce.prototype),Se=a(Ce.prototype,"_priority",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xe=a(Ce.prototype,"_targetTexture",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=a(Ce.prototype,"_clearFlag",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Le.DEPTH_ONLY}}),Oe=a(Ce.prototype,"_color",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(0,0,0,0)}}),Ee=a(Ce.prototype,"_renderMode",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Pe.OVERLAY}}),Te=Ce))||Te)||Te)||Te)||Te)||Te)||Te)||Te,t({Canvas:De,CanvasComponent:De}),De);s.Canvas=Re;var ze=t("UIComponent",n("cc.UIComponent")(Ae=at(st)(Ae=rt(110)(Ae=ot(Ae=r(Ae=function(t){function e(){var t,i;f(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=g(this,(t=y(e)).call.apply(t,[this].concat(o))))._lastParent=null,i}return _(e,t),d(e,[{key:"__preload",value:function(){this.node._uiProps.uiComp=this}},{key:"onEnable",value:function(){}},{key:"onDisable",value:function(){}},{key:"onDestroy",value:function(){this.node._uiProps.uiComp===this&&(this.node._uiProps.uiComp=null)}},{key:"updateAssembler",value:function(t){}},{key:"postUpdateAssembler",value:function(t){}}]),e}(T))||Ae)||Ae)||Ae)||Ae)||Ae);C(ze.prototype,"UIComponent",[{name:"_visibility"},{name:"setVisibility"}]),s.UITransformComponent=st,S.setClassAlias(st,"cc.UITransformComponent"),S.setClassAlias(Yt,"cc.RenderComponent"),s.CanvasComponent=Re,S.setClassAlias(Re,"cc.CanvasComponent");var Ie,Be,He,Me,Ne,Fe,Ve,Ue,We,Ge,je,Xe,Ye,Ze,qe,$e,Ke,Qe,Je,ti,ei,ii,ni,oi,ri,ai,si,li,hi,ui,ci,pi,_i,di,fi,gi,yi,vi,mi,bi,Ti,Ci,Si,xi,wi,Oi,Ei,Di,Ai,ki,Li=new e,Pi=new x;function Ri(t,i,n,o){var r=n.data,a=i.currBufferBatch,s=a.byteOffset>>2,l=n.vertexCount,h=a.indicesOffset,u=a.vertexOffset;a.request(l,n.indicesCount)||(a=i.currBufferBatch,l=0,h=0,u=0);var c=a.vData,_=a.iData;t.getWorldMatrix(Pi);for(var d=0;d<l;d++){var f=r[d];e.set(Li,f.x,f.y,0),e.transformMat4(Li,Li,Pi),c[s++]=Li.x,c[s++]=Li.y,c[s++]=Li.z,c[s++]=f.u,c[s++]=f.v,p.toArray(c,o,s),s+=4}for(var g=0,y=l/4;g<y;g++){var v=u+4*g;_[h++]=v,_[h++]=v+1,_[h++]=v+2,_[h++]=v+1,_[h++]=v+3,_[h++]=v+2}}var zi,Ii,Bi,Hi=new p;!function(t){t[t.NONE=0]="NONE",t[t.COLOR=1]="COLOR",t[t.SPRITE=2]="SPRITE",t[t.SCALE=3]="SCALE"}(zi||(zi={})),w(zi),function(t){t.NORMAL="normal",t.HOVER="hover",t.PRESSED="pressed",t.DISABLED="disabled"}(Ii||(Ii={})),function(t){t.CLICK="click"}(Bi||(Bi={}));var Mi,Ni,Fi,Vi,Ui,Wi,Gi,ji,Xi,Yi,Zi,qi,$i,Ki,Qi,Ji,tn,en,nn,on,rn,an,sn,ln,hn,un,cn,pn,_n,dn,fn,gn,yn,vn,mn,bn,Tn,Cn,Sn,xn,wn,On,En,Dn,An,kn,Ln,Pn,Rn,zn,In,Bn,Hn,Mn,Nn,Fn,Vn,Un,Wn,Gn,jn,Xn,Yn,Zn,qn=function(e){return t({Button:e,ButtonComponent:e}),e}((Ie=n("cc.Button"),Be=l(),He=rt(110),Me=h(),Ne=at(st),Fe=o(lt),Ve=O(),Ue=u(),We=O(),Ge=u(),je=o(zi),Xe=O(),Ye=u(),Ze=u(),qe=u(),$e=u(),Ke=u(),Qe=E(),Je=D(),ti=u(),ei=u(),ii=o(ut),ni=u(),oi=o(ut),ri=u(),ai=o(ut),si=u(),li=o(ut),hi=u(),ui=o([Jt]),ci=O(),pi=u(),Ie(_i=Be(_i=He(_i=Me(_i=Ne(_i=r((ki=Ai=function(t){function i(){var t,n;f(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=g(this,(t=y(i)).call.apply(t,[this].concat(r))),v(n,"clickEvents",fi,m(n)),v(n,"_interactable",gi,m(n)),v(n,"_transition",yi,m(n)),v(n,"_normalColor",vi,m(n)),v(n,"_hoverColor",mi,m(n)),v(n,"_pressColor",bi,m(n)),v(n,"_disabledColor",Ti,m(n)),v(n,"_normalSprite",Ci,m(n)),v(n,"_hoverSprite",Si,m(n)),v(n,"_pressedSprite",xi,m(n)),v(n,"_disabledSprite",wi,m(n)),v(n,"_duration",Oi,m(n)),v(n,"_zoomScale",Ei,m(n)),v(n,"_target",Di,m(n)),n._pressed=!1,n._hovered=!1,n._fromColor=new p,n._toColor=new p,n._time=0,n._transitionFinished=!0,n._fromScale=new e,n._toScale=new e,n._originalScale=new e,n._sprite=null,n._targetScale=new e,n}return _(i,t),d(i,[{key:"__preload",value:function(){this.target||(this.target=this.node);var t=this.node.getComponent(Zt);t&&(this._normalSprite=t.spriteFrame),this._applyTarget(),this._updateState()}},{key:"onEnable",value:function(){this._registerEvent()}},{key:"onDisable",value:function(){this._resetState(),this.node.off(ct.TOUCH_START,this._onTouchBegan,this),this.node.off(ct.TOUCH_MOVE,this._onTouchMove,this),this.node.off(ct.TOUCH_END,this._onTouchEnded,this),this.node.off(ct.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(ct.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(ct.MOUSE_LEAVE,this._onMouseMoveOut,this)}},{key:"update",value:function(t){var e=this._target?this._target:this.node;if(!this._transitionFinished&&(this._transition===zi.COLOR||this._transition===zi.SCALE)){this._time+=t;var i=1;this._duration>0&&(i=this._time/this._duration),i>=1&&(i=1,this._transitionFinished=!0);var n=e.getComponent(Yt);n&&(this._transition===zi.COLOR?(p.lerp(Hi,this._fromColor,this._toColor,i),n.color=Hi):this.transition===zi.SCALE&&(e.getScale(this._targetScale),this._targetScale.x=A(this._fromScale.x,this._toScale.x,i),this._targetScale.y=A(this._fromScale.y,this._toScale.y,i),e.setScale(this._targetScale)))}}},{key:"_resizeNodeToTargetNode",value:function(){this._target&&this._target._uiProps.uiTransformComp}},{key:"_resetState",value:function(){this._pressed=!1,this._hovered=!1;var t=this._target;if(t){var e=t.getComponent(Yt);if(e){var i=this._transition;i===zi.COLOR&&this._interactable?e.color=this._normalColor:i===zi.SCALE&&t.setScale(this._originalScale),this._transitionFinished=!0}}}},{key:"_registerEvent",value:function(){this.node.on(ct.TOUCH_START,this._onTouchBegan,this),this.node.on(ct.TOUCH_MOVE,this._onTouchMove,this),this.node.on(ct.TOUCH_END,this._onTouchEnded,this),this.node.on(ct.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(ct.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.on(ct.MOUSE_LEAVE,this._onMouseMoveOut,this)}},{key:"_getTargetSprite",value:function(t){var e=null;return t&&(e=t.getComponent(Zt)),e}},{key:"_applyTarget",value:function(){this._sprite=this._getTargetSprite(this._target),this._target&&e.copy(this._originalScale,this._target.getScale())}},{key:"_onTouchBegan",value:function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState(),t&&(t.propagationStopped=!0))}},{key:"_onTouchMove",value:function(t){if(this._interactable&&this.enabledInHierarchy&&this._pressed){if(!t)return!1;var i=t.touch;if(!i)return!1;var n,o=this.node._uiProps.uiTransformComp.isHit(i.getUILocation());if(this._transition===zi.SCALE&&this._target)o?(e.copy(this._fromScale,this._originalScale),e.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._transitionFinished=!1):(this._time=0,this._transitionFinished=!0,this._target&&this._target.setScale(this._originalScale));else n=o?Ii.PRESSED:Ii.NORMAL,this._applyTransition(n);t&&(t.propagationStopped=!0)}}},{key:"_onTouchEnded",value:function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed&&(Jt.emitEvents(this.clickEvents,t),this.node.emit(Bi.CLICK,this)),this._pressed=!1,this._updateState(),t&&(t.propagationStopped=!0))}},{key:"_onTouchCancel",value:function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed=!1,this._updateState())}},{key:"_onMouseMoveIn",value:function(t){!this._pressed&&this.interactable&&this.enabledInHierarchy&&(this._transition!==zi.SPRITE||this._hoverSprite)&&(this._hovered||(this._hovered=!0,this._updateState()))}},{key:"_onMouseMoveOut",value:function(t){this._hovered&&(this._hovered=!1,this._updateState())}},{key:"_updateState",value:function(){var t=this._getButtonState();this._applyTransition(t)}},{key:"_getButtonState",value:function(){var t=Ii.NORMAL;return this._interactable?this._pressed?t=Ii.PRESSED:this._hovered&&(t=Ii.HOVER):t=Ii.DISABLED,t.toString()}},{key:"_updateColorTransition",value:function(t){var e=this[t+"Color"],i=this._target;if(i){var n=i.getComponent(Yt);n&&(t===Ii.DISABLED?n.color=e:(this._fromColor=n.color.clone(),this._toColor=e,this._time=0,this._transitionFinished=!1))}}},{key:"_updateSpriteTransition",value:function(t){var e=this[t+"Sprite"];this._sprite&&e&&(this._sprite.spriteFrame=e)}},{key:"_updateScaleTransition",value:function(t){this._interactable&&(t===Ii.PRESSED?this._zoomUp():this._zoomBack())}},{key:"_zoomUp",value:function(){e.copy(this._fromScale,this._originalScale),e.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._time=0,this._transitionFinished=!1}},{key:"_zoomBack",value:function(){this._target&&(e.copy(this._fromScale,this._target.getScale()),e.copy(this._toScale,this._originalScale),this._time=0,this._transitionFinished=!1)}},{key:"_applyTransition",value:function(t){var e=this._transition;e===zi.COLOR?this._updateColorTransition(t):e===zi.SPRITE?this._updateSpriteTransition(t):e===zi.SCALE&&this._updateScaleTransition(t)}},{key:"target",get:function(){return this._target},set:function(t){this._target!==t&&(this._target=t,this._applyTarget())}},{key:"interactable",get:function(){return this._interactable},set:function(t){this._interactable=t,this._updateState(),this._interactable||this._resetState()}},{key:"_resizeToTarget",set:function(t){t&&this._resizeNodeToTargetNode()}},{key:"transition",get:function(){return this._transition},set:function(t){this._transition!==t&&(this._transition=t)}},{key:"normalColor",get:function(){return this._normalColor},set:function(t){this._normalColor!==t&&(this._normalColor.set(t),this._updateState())}},{key:"pressedColor",get:function(){return this._pressColor},set:function(t){this._pressColor!==t&&this._pressColor.set(t)}},{key:"hoverColor",get:function(){return this._hoverColor},set:function(t){this._hoverColor!==t&&this._hoverColor.set(t)}},{key:"disabledColor",get:function(){return this._disabledColor},set:function(t){this._disabledColor!==t&&(this._disabledColor.set(t),this._updateState())}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration!==t&&(this._duration=t)}},{key:"zoomScale",get:function(){return this._zoomScale},set:function(t){this._zoomScale!==t&&(this._zoomScale=t)}},{key:"normalSprite",get:function(){return this._normalSprite},set:function(t){if(this._normalSprite!==t){this._normalSprite=t;var e=this.node.getComponent(Zt);e&&(e.spriteFrame=t),this._updateState()}}},{key:"pressedSprite",get:function(){return this._pressedSprite},set:function(t){this._pressedSprite!==t&&(this._pressedSprite=t,this._updateState())}},{key:"hoverSprite",get:function(){return this._hoverSprite},set:function(t){this._hoverSprite!==t&&(this._hoverSprite=t,this._updateState())}},{key:"disabledSprite",get:function(){return this._disabledSprite},set:function(t){this._disabledSprite!==t&&(this._disabledSprite=t,this._updateState())}}]),i}(T),Ai.Transition=zi,Ai.EventType=Bi,a((di=ki).prototype,"target",[Fe,Ve,Ue],Object.getOwnPropertyDescriptor(di.prototype,"target"),di.prototype),a(di.prototype,"interactable",[We,Ge],Object.getOwnPropertyDescriptor(di.prototype,"interactable"),di.prototype),a(di.prototype,"transition",[je,Xe,Ye],Object.getOwnPropertyDescriptor(di.prototype,"transition"),di.prototype),a(di.prototype,"normalColor",[Ze],Object.getOwnPropertyDescriptor(di.prototype,"normalColor"),di.prototype),a(di.prototype,"pressedColor",[qe],Object.getOwnPropertyDescriptor(di.prototype,"pressedColor"),di.prototype),a(di.prototype,"hoverColor",[$e],Object.getOwnPropertyDescriptor(di.prototype,"hoverColor"),di.prototype),a(di.prototype,"disabledColor",[Ke],Object.getOwnPropertyDescriptor(di.prototype,"disabledColor"),di.prototype),a(di.prototype,"duration",[Qe,Je,ti],Object.getOwnPropertyDescriptor(di.prototype,"duration"),di.prototype),a(di.prototype,"zoomScale",[ei],Object.getOwnPropertyDescriptor(di.prototype,"zoomScale"),di.prototype),a(di.prototype,"normalSprite",[ii,ni],Object.getOwnPropertyDescriptor(di.prototype,"normalSprite"),di.prototype),a(di.prototype,"pressedSprite",[oi,ri],Object.getOwnPropertyDescriptor(di.prototype,"pressedSprite"),di.prototype),a(di.prototype,"hoverSprite",[ai,si],Object.getOwnPropertyDescriptor(di.prototype,"hoverSprite"),di.prototype),a(di.prototype,"disabledSprite",[li,hi],Object.getOwnPropertyDescriptor(di.prototype,"disabledSprite"),di.prototype),fi=a(di.prototype,"clickEvents",[ui,c,ci,pi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gi=a(di.prototype,"_interactable",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),yi=a(di.prototype,"_transition",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return zi.NONE}}),vi=a(di.prototype,"_normalColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(214,214,214,255)}}),mi=a(di.prototype,"_hoverColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(211,211,211,255)}}),bi=a(di.prototype,"_pressColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.WHITE.clone()}}),Ti=a(di.prototype,"_disabledColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(124,124,124,255)}}),Ci=a(di.prototype,"_normalSprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Si=a(di.prototype,"_hoverSprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xi=a(di.prototype,"_pressedSprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wi=a(di.prototype,"_disabledSprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oi=a(di.prototype,"_duration",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),Ei=a(di.prototype,"_zoomScale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),Di=a(di.prototype,"_target",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_i=di))||_i)||_i)||_i)||_i)||_i)||_i)),$n=t("CanvasPool",function(){function t(){f(this,t),this.pool=[]}return d(t,[{key:"get",value:function(){var t=this.pool.pop();if(!t){var e=document.createElement("canvas"),i=e.getContext("2d");t={canvas:e,context:i}}return t}},{key:"put",value:function(t){this.pool.length>=32||this.pool.push(t)}}]),t}());!function(t){t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT"}(jn||(jn=t("HorizontalTextAlignment",{}))),w(jn),function(t){t[t.TOP=0]="TOP",t[t.CENTER=1]="CENTER",t[t.BOTTOM=2]="BOTTOM"}(Xn||(Xn=t("VerticalTextAlignment",{}))),w(Xn),function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.SHRINK=2]="SHRINK",t[t.RESIZE_HEIGHT=3]="RESIZE_HEIGHT"}(Yn||(Yn=t("Overflow",{}))),w(Yn),function(t){t[t.NONE=0]="NONE",t[t.BITMAP=1]="BITMAP",t[t.CHAR=2]="CHAR"}(Zn||(Zn=t("CacheMode",{}))),w(Zn);var Kn,Qn,Jn,to=function(e){return t({Label:e,LabelComponent:e}),e}((Mi=n("cc.Label"),Ni=l(),Fi=rt(110),Vi=h(),Ui=O(),Wi=u(),Gi=o(jn),ji=O(),Xi=u(),Yi=o(Xn),Zi=O(),qi=u(),$i=O(),Ki=u(),Qi=O(),Ji=u(),tn=O(),en=u(),nn=o(Yn),on=O(),rn=u(),an=O(),sn=u(),ln=o(pt),hn=O(),un=u(),cn=O(),pn=u(),_n=o(Zn),dn=O(),fn=u(),gn=O(),yn=u(),vn=O(),mn=u(),bn=O(),Tn=u(),Cn=o(_t),Sn=L(),xn=P(),Mi(wn=Ni(wn=Fi(wn=Vi((Gn=Wn=function(t){function e(){var t;return f(this,e),t=g(this,y(e).call(this)),v(t,"_useOriginalSize",En,m(t)),v(t,"_string",Dn,m(t)),v(t,"_horizontalAlign",An,m(t)),v(t,"_verticalAlign",kn,m(t)),v(t,"_actualFontSize",Ln,m(t)),v(t,"_fontSize",Pn,m(t)),v(t,"_fontFamily",Rn,m(t)),v(t,"_lineHeight",zn,m(t)),v(t,"_overflow",In,m(t)),v(t,"_enableWrapText",Bn,m(t)),v(t,"_font",Hn,m(t)),v(t,"_isSystemFontUsed",Mn,m(t)),t._spacingX=0,v(t,"_isItalic",Nn,m(t)),v(t,"_isBold",Fn,m(t)),v(t,"_isUnderline",Vn,m(t)),v(t,"_cacheMode",Un,m(t)),t._N$file=null,t._texture=null,t._ttfSpriteFrame=null,t._userDefinedFont=null,t._assemblerData=null,t._fontAtlas=null,t._letterTexture=null,t._ttfSpriteFrame=null,t}return _(e,t),d(e,[{key:"string",get:function(){return this._string},set:function(t){t+="",this._string!==t&&(this._string=t,this.updateRenderData())}},{key:"horizontalAlign",get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign!==t&&(this._horizontalAlign=t,this.updateRenderData())}},{key:"verticalAlign",get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!==t&&(this._verticalAlign=t,this.updateRenderData())}},{key:"actualFontSize",get:function(){return this._actualFontSize},set:function(t){this._actualFontSize=t}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.updateRenderData())}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this.updateRenderData())}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.updateRenderData())}},{key:"overflow",get:function(){return this._overflow},set:function(t){this._overflow!==t&&(this._overflow=t,this.updateRenderData())}},{key:"enableWrapText",get:function(){return this._enableWrapText},set:function(t){this._enableWrapText!==t&&(this._enableWrapText=t,this.updateRenderData())}},{key:"font",get:function(){return this._font},set:function(t){this._font!==t&&(this._isSystemFontUsed=!t,this._font=t,"string"==typeof t&&R(4e3),this._renderData&&(this.destroyRenderData(),this._renderData=null),this._fontAtlas=null,this.updateRenderData(!0))}},{key:"useSystemFont",get:function(){return this._isSystemFontUsed},set:function(t){this._isSystemFontUsed!==t&&(this.destroyRenderData(),this._renderData=null,this._isSystemFontUsed=!!t,t&&(this.font=null,this._flushAssembler(),this.updateRenderData()))}},{key:"cacheMode",get:function(){return this._cacheMode},set:function(t){this._cacheMode!==t&&(this._cacheMode===Zn.CHAR&&(this._ttfSpriteFrame=null),this._cacheMode=t,this.updateRenderData(!0))}},{key:"spriteFrame",get:function(){return this._texture}},{key:"isBold",get:function(){return this._isBold},set:function(t){this._isBold!==t&&(this._isBold=t,this.updateRenderData())}},{key:"isItalic",get:function(){return this._isItalic},set:function(t){this._isItalic!==t&&(this._isItalic=t,this.updateRenderData())}},{key:"isUnderline",get:function(){return this._isUnderline},set:function(t){this._isUnderline!==t&&(this._isUnderline=t,this.updateRenderData())}},{key:"sharedMaterials",get:function(){return z(y(e.prototype),"sharedMaterials",this)},set:function(t){I(y(e.prototype),"sharedMaterials",t,this,!0)}},{key:"assemblerData",get:function(){return this._assemblerData}},{key:"fontAtlas",get:function(){return this._fontAtlas},set:function(t){this._fontAtlas=t}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX!==t&&(this._spacingX=t,this.updateRenderData())}},{key:"_bmFontOriginalSize",get:function(){return this._font instanceof ft?this._font.fontSize:-1}}]),d(e,[{key:"onEnable",value:function(){z(y(e.prototype),"onEnable",this).call(this),this._font||this._isSystemFontUsed||(this.useSystemFont=!0),this._isSystemFontUsed&&!this._fontFamily&&(this.fontFamily="Arial"),this.updateRenderData(!0)}},{key:"onDisable",value:function(){z(y(e.prototype),"onDisable",this).call(this)}},{key:"onDestroy",value:function(){if(this._assembler&&this._assembler.resetAssemblerData&&this._assembler.resetAssemblerData(this._assemblerData),this._assemblerData=null,this._ttfSpriteFrame){var t=this._ttfSpriteFrame.texture;if(t){var i=t;i.image&&i.image.destroy(),t.destroy()}this._ttfSpriteFrame=null}this._letterTexture=null,z(y(e.prototype),"onDestroy",this).call(this)}},{key:"updateRenderData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.markForUpdateRenderData(),t&&(this._flushAssembler(),this._applyFontTexture())}},{key:"_render",value:function(t){t.commitComp(this,this._texture.getGFXTexture(),this._assembler,this._texture.getGFXSampler())}},{key:"_updateColor",value:function(){this._font instanceof ft?z(y(e.prototype),"_updateColor",this).call(this):this.updateRenderData(!1)}},{key:"_canRender",value:function(){if(!z(y(e.prototype),"_canRender",this).call(this)||!this._string)return!1;var t=this._font;if(t&&t instanceof ft){var i=t.spriteFrame;if(!i||!i.textureLoaded())return!1}return!0}},{key:"_flushAssembler",value:function(){var t=e.Assembler.getAssembler(this);this._assembler!==t&&(this.destroyRenderData(),this._assembler=t),this._renderData||this._assembler&&this._assembler.createData&&(this._renderData=this._assembler.createData(this),this._renderData.material=this.material)}},{key:"_applyFontTexture",value:function(){var t=this,e=this._font;if(e instanceof ft){var i=e.spriteFrame,n=function(){t._texture=i,t._assembler&&t._assembler.updateRenderData(t)};i&&(i.loaded||i.textureLoaded?n():i.once("load",n,this))}else{if(this.cacheMode===Zn.CHAR)this._letterTexture=this._assembler.getAssemblerData(),this._texture=this._letterTexture;else if(!this._ttfSpriteFrame){this._ttfSpriteFrame=new ut,this._assemblerData=this._assembler.getAssemblerData();var o=new gt(this._assemblerData.canvas)._texture;this._ttfSpriteFrame.texture=o}this.cacheMode!==Zn.CHAR&&(this._texture=this._ttfSpriteFrame),this._assembler&&this._assembler.updateRenderData(this)}}}]),e}(Yt),Wn.HorizontalAlign=jn,Wn.VerticalAlign=Xn,Wn.Overflow=Yn,Wn.CacheMode=Zn,Wn._canvasPool=new $n,a((On=Gn).prototype,"string",[Ui,Wi,k],Object.getOwnPropertyDescriptor(On.prototype,"string"),On.prototype),a(On.prototype,"horizontalAlign",[Gi,ji,Xi],Object.getOwnPropertyDescriptor(On.prototype,"horizontalAlign"),On.prototype),a(On.prototype,"verticalAlign",[Yi,Zi,qi],Object.getOwnPropertyDescriptor(On.prototype,"verticalAlign"),On.prototype),a(On.prototype,"fontSize",[$i,Ki],Object.getOwnPropertyDescriptor(On.prototype,"fontSize"),On.prototype),a(On.prototype,"fontFamily",[Qi,Ji],Object.getOwnPropertyDescriptor(On.prototype,"fontFamily"),On.prototype),a(On.prototype,"lineHeight",[tn,en],Object.getOwnPropertyDescriptor(On.prototype,"lineHeight"),On.prototype),a(On.prototype,"overflow",[nn,on,rn],Object.getOwnPropertyDescriptor(On.prototype,"overflow"),On.prototype),a(On.prototype,"enableWrapText",[an,sn],Object.getOwnPropertyDescriptor(On.prototype,"enableWrapText"),On.prototype),a(On.prototype,"font",[ln,hn,un],Object.getOwnPropertyDescriptor(On.prototype,"font"),On.prototype),a(On.prototype,"useSystemFont",[cn,pn],Object.getOwnPropertyDescriptor(On.prototype,"useSystemFont"),On.prototype),a(On.prototype,"cacheMode",[_n,dn,fn],Object.getOwnPropertyDescriptor(On.prototype,"cacheMode"),On.prototype),a(On.prototype,"isBold",[gn,yn],Object.getOwnPropertyDescriptor(On.prototype,"isBold"),On.prototype),a(On.prototype,"isItalic",[vn,mn],Object.getOwnPropertyDescriptor(On.prototype,"isItalic"),On.prototype),a(On.prototype,"isUnderline",[bn,Tn],Object.getOwnPropertyDescriptor(On.prototype,"isUnderline"),On.prototype),a(On.prototype,"sharedMaterials",[Cn,dt,Sn,xn],Object.getOwnPropertyDescriptor(On.prototype,"sharedMaterials"),On.prototype),En=a(On.prototype,"_useOriginalSize",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Dn=a(On.prototype,"_string",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"label"}}),An=a(On.prototype,"_horizontalAlign",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return jn.CENTER}}),kn=a(On.prototype,"_verticalAlign",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Xn.CENTER}}),Ln=a(On.prototype,"_actualFontSize",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pn=a(On.prototype,"_fontSize",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),Rn=a(On.prototype,"_fontFamily",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Arial"}}),zn=a(On.prototype,"_lineHeight",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),In=a(On.prototype,"_overflow",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Yn.NONE}}),Bn=a(On.prototype,"_enableWrapText",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Hn=a(On.prototype,"_font",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mn=a(On.prototype,"_isSystemFontUsed",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Nn=a(On.prototype,"_isItalic",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fn=a(On.prototype,"_isBold",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vn=a(On.prototype,"_isUnderline",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Un=a(On.prototype,"_cacheMode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Zn.NONE}}),wn=On))||wn)||wn)||wn)||wn)),eo=function(){function t(){f(this,t)}return d(t,null,[{key:"add",value:function(t){var e=this._tabIndexList;-1===e.indexOf(t)&&e.push(t)}},{key:"remove",value:function(t){var e=this._tabIndexList,i=e.indexOf(t);-1!==i&&e.splice(i,1)}},{key:"resort",value:function(){this._tabIndexList.sort((function(t,e){return t._delegate.tabIndex-e._delegate.tabIndex}))}},{key:"next",value:function(t){var e=this._tabIndexList,i=e.indexOf(t);if(t.setFocus(!1),-1!==i){var n=e[i+1];n&&n._delegate.tabIndex>=0&&n.setFocus(!0)}}}]),t}();eo._tabIndexList=[],function(t){t[t.DEFAULT=0]="DEFAULT",t[t.DONE=1]="DONE",t[t.SEND=2]="SEND",t[t.SEARCH=3]="SEARCH",t[t.GO=4]="GO",t[t.NEXT=5]="NEXT"}(Kn||(Kn={})),i(Kn),function(t){t[t.ANY=0]="ANY",t[t.EMAIL_ADDR=1]="EMAIL_ADDR",t[t.NUMERIC=2]="NUMERIC",t[t.PHONE_NUMBER=3]="PHONE_NUMBER",t[t.URL=4]="URL",t[t.DECIMAL=5]="DECIMAL",t[t.SINGLE_LINE=6]="SINGLE_LINE"}(Qn||(Qn={})),i(Qn),function(t){t[t.PASSWORD=0]="PASSWORD",t[t.SENSITIVE=1]="SENSITIVE",t[t.INITIAL_CAPS_WORD=2]="INITIAL_CAPS_WORD",t[t.INITIAL_CAPS_SENTENCE=3]="INITIAL_CAPS_SENTENCE",t[t.INITIAL_CAPS_ALL_CHARACTERS=4]="INITIAL_CAPS_ALL_CHARACTERS",t[t.DEFAULT=5]="DEFAULT"}(Jn||(Jn={})),i(Jn);var io,no,oo,ro,ao,so,lo,ho,uo,co,po,_o,fo,go,yo,vo,mo,bo,To,Co,So,xo,wo,Oo,Eo,Do,Ao,ko,Lo,Po,Ro,zo,Io,Bo,Ho,Mo,No,Fo,Vo,Uo,Wo,Go,jo,Xo,Yo,Zo,qo,$o,Ko,Qo,Jo,tr,er,ir,nr,or,rr,ar,sr,lr,hr,ur,cr=function(){function t(){f(this,t),this._editing=!1,this._delegate=null}return d(t,[{key:"init",value:function(t){}},{key:"onEnable",value:function(){}},{key:"update",value:function(){}},{key:"onDisable",value:function(){this._editing&&this.endEditing()}},{key:"clear",value:function(){this._delegate=null}},{key:"setTabIndex",value:function(t){}},{key:"setSize",value:function(t,e){}},{key:"setFocus",value:function(t){t?this.beginEditing():this.endEditing()}},{key:"isFocused",value:function(){return this._editing}},{key:"beginEditing",value:function(){}},{key:"endEditing",value:function(){}}]),t}(),pr=new x,_r=new x,dr=new e,fr=null,gr=0,yr=function(t){function i(){var t,e;f(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=g(this,(t=y(i)).call.apply(t,[this].concat(o))))._delegate=null,e._inputMode=-1,e._inputFlag=-1,e._returnType=-1,e.__eventListeners={},e.__fullscreen=!1,e.__autoResize=!1,e.__orientationChanged=void 0,e._edTxt=null,e._isTextArea=!1,e._textLabelFont=null,e._textLabelFontSize=null,e._textLabelFontColor=null,e._textLabelAlign=null,e._placeholderLabelFont=null,e._placeholderLabelFontSize=null,e._placeholderLabelFontColor=null,e._placeholderLabelAlign=null,e._placeholderLineHeight=null,e._placeholderStyleSheet=null,e._domId="EditBoxId_".concat(++gr),e}return _(i,t),d(i,[{key:"init",value:function(t){t&&(this._delegate=t,t.inputMode===Qn.ANY?this._createTextArea():this._createInput(),eo.add(this),this.setTabIndex(t.tabIndex),this._initStyleSheet(),this._registerEventListeners(),this._addDomToGameContainer(),this.__fullscreen=jt.isAutoFullScreenEnabled(),this.__autoResize=jt._resizeWithBrowserSize)}},{key:"clear",value:function(){this._removeEventListeners(),this._removeDomFromGameContainer(),eo.remove(this),fr===this&&(fr=null),this._delegate=null}},{key:"update",value:function(){this._updateMatrix()}},{key:"setTabIndex",value:function(t){this._edTxt.tabIndex=t,eo.resort()}},{key:"setSize",value:function(t,e){var i=this._edTxt;i&&(i.style.width=t+"px",i.style.height=e+"px")}},{key:"beginEditing",value:function(){fr&&fr!==this&&fr.setFocus(!1),this._editing=!0,fr=this,this._delegate._editBoxEditingDidBegan(),this._showDom(),this._edTxt.focus()}},{key:"endEditing",value:function(){this._edTxt.blur()}},{key:"_createInput",value:function(){this._isTextArea=!1,this._edTxt=document.createElement("input")}},{key:"_createTextArea",value:function(){this._isTextArea=!0,this._edTxt=document.createElement("textarea")}},{key:"_addDomToGameContainer",value:function(){ht.container&&this._edTxt&&(ht.container.appendChild(this._edTxt),document.head.appendChild(this._placeholderStyleSheet))}},{key:"_removeDomFromGameContainer",value:function(){B(ht.container,this._edTxt)&&this._edTxt&&ht.container.removeChild(this._edTxt),B(document.head,this._placeholderStyleSheet)&&document.head.removeChild(this._placeholderStyleSheet),this._edTxt=null,this._placeholderStyleSheet=null}},{key:"_showDom",value:function(){this._updateMaxLength(),this._updateInputType(),this._updateStyleSheet(),this._edTxt&&this._delegate&&(this._edTxt.style.display="",this._delegate._hideLabels()),H.isMobile&&this._showDomOnMobile()}},{key:"_hideDom",value:function(){var t=this._edTxt;t&&this._delegate&&(t.style.display="none",this._delegate._showLabels()),H.isMobile&&this._hideDomOnMobile()}},{key:"_showDomOnMobile",value:function(){H.os===H.OS_ANDROID&&(this.__fullscreen&&(jt.enableAutoFullScreen(!1),qt.exitFullScreen()),this.__autoResize&&jt.resizeWithBrowserSize(!1),this._adjustWindowScroll())}},{key:"_hideDomOnMobile",value:function(){var t=this;H.os===H.OS_ANDROID&&(this.__autoResize&&jt.resizeWithBrowserSize(!0),setTimeout((function(){fr||t.__fullscreen&&jt.enableAutoFullScreen(!0)}),400)),this._scrollBackWindow()}},{key:"_adjustWindowScroll",value:function(){var t=this;setTimeout((function(){window.scrollY<40&&t._edTxt.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}),400)}},{key:"_scrollBackWindow",value:function(){setTimeout((function(){H.browserType!==H.BROWSER_TYPE_WECHAT||H.os!==H.OS_IOS?window.scrollTo(0,0):window.top&&window.top.scrollTo(0,0)}),400)}},{key:"_updateMatrix",value:function(){if(this._edTxt){var t=this._delegate.node,i=jt.getScaleX(),n=jt.getScaleY(),o=jt.getViewportRect(),r=jt.getDevicePixelRatio();t.getWorldMatrix(pr);var a=t._uiProps.uiTransformComp;if(a&&e.set(dr,-a.anchorX*a.width,-a.anchorY*a.height,dr.z),x.transform(pr,pr,dr),!t._uiProps.uiTransformComp)return!1;var s=Qt.root.ui.getScreen(t._uiProps.uiTransformComp.visibility);if(s){s.node.getWorldRT(_r);var l=_r.m12,h=_r.m13,u=Xt.center;_r.m12=u.x-(_r.m00*l+_r.m04*h),_r.m13=u.y-(_r.m01*l+_r.m05*h),x.multiply(_r,_r,pr),i/=r,n/=r;var c=ht.container,p=_r.m00*i,_=pr.m01,d=pr.m04,f=_r.m05*n,g=parseInt(c&&c.style.paddingLeft||"0");g+=o.x/r;var y=parseInt(c&&c.style.paddingBottom||"0");y+=o.y/r;var v="matrix("+p+","+-_+","+-d+","+f+","+(_r.m12*i+g)+","+-(_r.m13*n+y)+")";this._edTxt.style.transform=v,this._edTxt.style["-webkit-transform"]=v,this._edTxt.style["transform-origin"]="0px 100% 0px",this._edTxt.style["-webkit-transform-origin"]="0px 100% 0px"}}}},{key:"_updateInputType",value:function(){var t=this._delegate,e=t.inputMode,i=t.inputFlag,n=t.returnType,o=this._edTxt;if(this._inputMode!==e||this._inputFlag!==i||this._returnType!==n){if(this._inputMode=e,this._inputFlag=i,this._returnType=n,this._isTextArea){var r="none";return i===Jn.INITIAL_CAPS_ALL_CHARACTERS?r="uppercase":i===Jn.INITIAL_CAPS_WORD&&(r="capitalize"),void(o.style.textTransform=r)}if(o=o,i!==Jn.PASSWORD){var a=o.type;e===Qn.EMAIL_ADDR?a="email":e===Qn.NUMERIC||e===Qn.DECIMAL?a="number":e===Qn.PHONE_NUMBER?(a="number",o.pattern="[0-9]*"):e===Qn.URL?a="url":(a="text",n===Kn.SEARCH&&(a="search")),o.type=a;var s="none";i===Jn.INITIAL_CAPS_ALL_CHARACTERS?s="uppercase":i===Jn.INITIAL_CAPS_WORD&&(s="capitalize"),o.style.textTransform=s}else o.type="password"}}},{key:"_updateMaxLength",value:function(){var t=this._delegate.maxLength;t<0&&(t=65535),this._edTxt.maxLength=t}},{key:"_initStyleSheet",value:function(){if(this._edTxt){var t=this._edTxt;t.style.color="#000000",t.style.border="0px",t.style.background="transparent",t.style.width="100%",t.style.height="100%",t.style.outline="medium",t.style.padding="0",t.style.textTransform="uppercase",t.style.display="none",t.style.position="absolute",t.style.bottom="0px",t.style.left="2px",t.className="cocosEditBox",t.style.fontFamily="Arial",t.id=this._domId,this._isTextArea?(t.style.resize="none",t.style.overflowY="scroll"):((t=t).type="text",t.style["-moz-appearance"]="textfield"),this._placeholderStyleSheet=document.createElement("style")}}},{key:"_updateStyleSheet",value:function(){var t=this._delegate,e=this._edTxt;e&&t&&(e.value=t.string,e.placeholder=t.placeholder,this._updateTextLabel(t.textLabel),this._updatePlaceholderLabel(t.placeholderLabel))}},{key:"_updateTextLabel",value:function(t){if(t){var e=t.font;e=!e||e instanceof ft?t.fontFamily:e._fontFamily;var i=t.fontSize*t.node.scale.y;if((this._textLabelFont!==e||this._textLabelFontSize!==i||this._textLabelFontColor!==t.fontColor||this._textLabelAlign!==t.horizontalAlign)&&(this._textLabelFont=e,this._textLabelFontSize=i,this._textLabelFontColor=t.fontColor,this._textLabelAlign=t.horizontalAlign,this._edTxt)){var n=this._edTxt;switch(n.style.fontSize="".concat(i,"px"),n.style.color=t.color.toCSS("rgba"),n.style.fontFamily=e,t.horizontalAlign){case to.HorizontalAlign.LEFT:n.style.textAlign="left";break;case to.HorizontalAlign.CENTER:n.style.textAlign="center";break;case to.HorizontalAlign.RIGHT:n.style.textAlign="right"}}}}},{key:"_updatePlaceholderLabel",value:function(t){if(t){var e=t.font;e=!e||e instanceof ft?t.fontFamily:t.font._fontFamily;var i=t.fontSize*t.node.scale.y;if(this._placeholderLabelFont!==e||this._placeholderLabelFontSize!==i||this._placeholderLabelFontColor!==t.fontColor||this._placeholderLabelAlign!==t.horizontalAlign||this._placeholderLineHeight!==t.fontSize){this._placeholderLabelFont=e,this._placeholderLabelFontSize=i,this._placeholderLabelFontColor=t.fontColor,this._placeholderLabelAlign=t.horizontalAlign,this._placeholderLineHeight=t.fontSize;var n=this._placeholderStyleSheet,o=t.color.toCSS("rgba"),r=t.fontSize,a="";switch(t.horizontalAlign){case to.HorizontalAlign.LEFT:a="left";break;case to.HorizontalAlign.CENTER:a="center";break;case to.HorizontalAlign.RIGHT:a="right"}n.innerHTML="#".concat(this._domId,"::-webkit-input-placeholder{text-transform: initial;-family: ").concat(e,";font-size: ").concat(i,"px;color: ").concat(o,";line-height: ").concat(r,"px;text-align: ").concat(a,";}")+"#".concat(this._domId,"::-moz-placeholder{text-transform: initial;-family: ").concat(e,";font-size: ").concat(i,"px;color: ").concat(o,";line-height: ").concat(r,"px;text-align: ").concat(a,";}")+"#".concat(this._domId,"::-ms-input-placeholder{text-transform: initial;-family: ").concat(e,";font-size: ").concat(i,"px;color: ").concat(o,";line-height: ").concat(r,"px;text-align: ").concat(a,";}"),s.sys.browserType===s.sys.BROWSER_TYPE_EDGE&&(n.innerHTML+="#".concat(this._domId,"::-ms-clear{display: none;}"))}}}},{key:"_registerEventListeners",value:function(){if(this._edTxt){var t=this,e=this._edTxt,i=!1,n=this.__eventListeners;n.compositionStart=function(){i=!0},n.compositionEnd=function(){i=!1,t._delegate._editBoxTextChanged(e.value)},n.onInput=function(){if(!i){var n=t._delegate,o=n.maxLength;o>=0&&(e.value=e.value.slice(0,o)),n._editBoxTextChanged(e.value)}},n.onClick=function(){t._editing&&H.isMobile&&t._adjustWindowScroll()},n.onKeydown=function(i){i.keyCode===yt.KEY.enter?(i.propagationStopped=!0,t._delegate._editBoxEditingReturn(),t._isTextArea||e.blur()):i.keyCode===yt.KEY.tab&&(i.propagationStopped=!0,i.preventDefault(),eo.next(t))},n.onBlur=function(){H.isMobile&&i&&n.compositionEnd(),t._editing=!1,fr=null,t._hideDom(),t._delegate._editBoxEditingDidEnded()},e.addEventListener("compositionstart",n.compositionStart),e.addEventListener("compositionend",n.compositionEnd),e.addEventListener("input",n.onInput),e.addEventListener("keydown",n.onKeydown),e.addEventListener("blur",n.onBlur),e.addEventListener("touchstart",n.onClick)}}},{key:"_removeEventListeners",value:function(){if(this._edTxt){var t=this._edTxt,e=this.__eventListeners;t.removeEventListener("compositionstart",e.compositionStart),t.removeEventListener("compositionend",e.compositionEnd),t.removeEventListener("input",e.onInput),t.removeEventListener("keydown",e.onKeydown),t.removeEventListener("blur",e.onBlur),t.removeEventListener("touchstart",e.onClick),e.compositionStart=null,e.compositionEnd=null,e.onInput=null,e.onKeydown=null,e.onBlur=null,e.onClick=null}}}]),i}(cr);function vr(t){return t.replace(/(?:^|\s)\S/g,(function(t){return t.toUpperCase()}))}function mr(t){return t.charAt(0).toUpperCase()+t.slice(1)}!function(t){t.EDITING_DID_BEGAN="editing-did-began",t.EDITING_DID_ENDED="editing-did-ended",t.TEXT_CHANGED="text-changed",t.EDITING_RETURN="editing-return"}(ur||(ur={}));var br,Tr,Cr,Sr,xr,wr,Or,Er,Dr,Ar,kr,Lr,Pr,Rr,zr,Ir,Br,Hr,Mr,Nr,Fr,Vr,Ur,Wr,Gr,jr,Xr,Yr,Zr,qr,$r,Kr,Qr,Jr,ta,ea,ia,na,oa,ra,aa,sa,la=function(e){return t({EditBox:e,EditBoxComponent:e}),e}((io=n("cc.EditBox"),no=l(),oo=rt(100),ro=h(),ao=at(st),so=O(),lo=u(),ho=O(),uo=u(),co=o(to),po=O(),_o=u(),fo=o(to),go=O(),yo=u(),vo=o(ut),mo=O(),bo=u(),To=o(Jn),Co=O(),So=u(),xo=o(Qn),wo=O(),Oo=u(),Eo=o(Kn),Do=O(),Ao=u(),ko=O(),Lo=u(),Po=O(),Ro=u(),zo=o([Jt]),Io=O(),Bo=u(),Ho=o([Jt]),Mo=O(),No=u(),Fo=o([Jt]),Vo=O(),Uo=u(),Wo=o([Jt]),Go=O(),jo=u(),io(Xo=no(Xo=oo(Xo=ro(Xo=ao(Xo=r((hr=lr=function(t){function i(){var t,e;f(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=g(this,(t=y(i)).call.apply(t,[this].concat(o))),v(e,"editingDidBegan",Zo,m(e)),v(e,"textChanged",qo,m(e)),v(e,"editingDidEnded",$o,m(e)),v(e,"editingReturn",Ko,m(e)),e._impl=null,e._background=null,v(e,"_textLabel",Qo,m(e)),v(e,"_placeholderLabel",Jo,m(e)),v(e,"_returnType",tr,m(e)),v(e,"_useOriginalSize",er,m(e)),v(e,"_string",ir,m(e)),v(e,"_tabIndex",nr,m(e)),v(e,"_backgroundImage",or,m(e)),v(e,"_inputFlag",rr,m(e)),v(e,"_inputMode",ar,m(e)),v(e,"_maxLength",sr,m(e)),e._isLabelVisible=!1,e}return _(i,t),d(i,[{key:"__preload",value:function(){this._init()}},{key:"onEnable",value:function(){this._registerEvent(),this._impl&&this._impl.onEnable()}},{key:"update",value:function(){this._impl&&this._impl.update()}},{key:"onDisable",value:function(){this._unregisterEvent(),this._impl&&this._impl.onDisable()}},{key:"onDestroy",value:function(){this._impl&&this._impl.clear()}},{key:"setFocus",value:function(){this._impl&&this._impl.setFocus(!0)}},{key:"focus",value:function(){this._impl&&this._impl.setFocus(!0)}},{key:"blur",value:function(){this._impl&&this._impl.setFocus(!1)}},{key:"isFocused",value:function(){return!!this._impl&&this._impl.isFocused()}},{key:"_editBoxEditingDidBegan",value:function(){Jt.emitEvents(this.editingDidBegan,this),this.node.emit(ur.EDITING_DID_BEGAN,this)}},{key:"_editBoxEditingDidEnded",value:function(){Jt.emitEvents(this.editingDidEnded,this),this.node.emit(ur.EDITING_DID_ENDED,this)}},{key:"_editBoxTextChanged",value:function(t){t=this._updateLabelStringStyle(t,!0),this.string=t,Jt.emitEvents(this.textChanged,t,this),this.node.emit(ur.TEXT_CHANGED,this)}},{key:"_editBoxEditingReturn",value:function(){Jt.emitEvents(this.editingReturn,this),this.node.emit(ur.EDITING_RETURN,this)}},{key:"_showLabels",value:function(){this._isLabelVisible=!0,this._updateLabels()}},{key:"_hideLabels",value:function(){this._isLabelVisible=!1,this._textLabel&&(this._textLabel.node.active=!1),this._placeholderLabel&&(this._placeholderLabel.node.active=!1)}},{key:"_onTouchBegan",value:function(t){t.propagationStopped=!0}},{key:"_onTouchCancel",value:function(t){t.propagationStopped=!0}},{key:"_onTouchEnded",value:function(t){this._impl&&this._impl.beginEditing(),t.propagationStopped=!0}},{key:"_init",value:function(){this._createBackgroundSprite(),this._updatePlaceholderLabel(),this._updateTextLabel(),this._isLabelVisible=!0,this.node.on(ct.SIZE_CHANGED,this._resizeChildNodes,this),(this._impl=new i._EditBoxImpl).init(this),this._updateString(this._string),this._syncSize()}},{key:"_createBackgroundSprite",value:function(){this._background||(this._background=this.node.getComponent(Zt),this._background||(this._background=this.node.addComponent(Zt))),this._background.type=Zt.Type.SLICED,this._background.spriteFrame=this._backgroundImage}},{key:"_updateTextLabel",value:function(){var t=this._textLabel;if(!t){var e=this.node.getChildByName("TEXT_LABEL");e||(e=new lt("TEXT_LABEL")),(t=e.getComponent(to))||(t=e.addComponent(to)),e.parent=this.node,this._textLabel=t}this._textLabel.node._uiProps.uiTransformComp.setAnchorPoint(0,1),t.overflow=to.Overflow.CLAMP,this._inputMode===Qn.ANY?(t.verticalAlign=Xn.TOP,t.enableWrapText=!0):(t.verticalAlign=Xn.CENTER,t.enableWrapText=!1),t.string=this._updateLabelStringStyle(this._string)}},{key:"_updatePlaceholderLabel",value:function(){var t=this._placeholderLabel;if(!t){var e=this.node.getChildByName("PLACEHOLDER_LABEL");e||(e=new lt("PLACEHOLDER_LABEL")),(t=e.getComponent(to))||(t=e.addComponent(to)),e.parent=this.node,this._placeholderLabel=t}this._placeholderLabel.node._uiProps.uiTransformComp.setAnchorPoint(0,1),t.overflow=to.Overflow.CLAMP,this._inputMode===Qn.ANY?(t.verticalAlign=Xn.TOP,t.enableWrapText=!0):(t.verticalAlign=Xn.CENTER,t.enableWrapText=!1),t.string=this.placeholder}},{key:"_syncSize",value:function(){var t=this.node._uiProps.uiTransformComp,e=t.contentSize;if(this._background){var i=this._background.node._uiProps.uiTransformComp;i.anchorPoint=t.anchorPoint,i.setContentSize(e)}this._updateLabelPosition(e),this._impl&&this._impl.setSize(e.width,e.height)}},{key:"_updateLabels",value:function(){if(this._isLabelVisible){var t=this._string;this._textLabel&&(this._textLabel.node.active=""!==t),this._placeholderLabel&&(this._placeholderLabel.node.active=""===t)}}},{key:"_updateString",value:function(t){var e=this._textLabel;if(e){var i=t;i&&(i=this._updateLabelStringStyle(i)),e.string=i,this._updateLabels()}}},{key:"_updateLabelStringStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this._inputFlag;if(e||i!==Jn.PASSWORD)i===Jn.INITIAL_CAPS_ALL_CHARACTERS?t=t.toUpperCase():i===Jn.INITIAL_CAPS_WORD?t=vr(t):i===Jn.INITIAL_CAPS_SENTENCE&&(t=mr(t));else{for(var n="",o=t.length,r=0;r<o;++r)n+="â—";t=n}return t}},{key:"_registerEvent",value:function(){this.node.on(ct.TOUCH_START,this._onTouchBegan,this),this.node.on(ct.TOUCH_END,this._onTouchEnded,this)}},{key:"_unregisterEvent",value:function(){this.node.off(ct.TOUCH_START,this._onTouchBegan,this),this.node.off(ct.TOUCH_END,this._onTouchEnded,this)}},{key:"_updateLabelPosition",value:function(t){var i=this.node._uiProps.uiTransformComp,n=-i.anchorX*i.width,o=-i.anchorY*i.height,r=this._placeholderLabel,a=this._textLabel;a&&(a.node._uiProps.uiTransformComp.setContentSize(t.width-2,t.height),a.node.position=new e(n+2,o+t.height,a.node.position.z),a.verticalAlign=this._inputMode===Qn.ANY?Xn.TOP:Xn.CENTER,a.enableWrapText=this._inputMode===Qn.ANY),r&&(r.node._uiProps.uiTransformComp.setContentSize(t.width-2,t.height),r.lineHeight=t.height,r.node.position=new e(n+2,o+t.height,r.node.position.z),r.verticalAlign=this._inputMode===Qn.ANY?Xn.TOP:Xn.CENTER,r.enableWrapText=this._inputMode===Qn.ANY)}},{key:"_resizeChildNodes",value:function(){var t=this.node._uiProps.uiTransformComp,i=this._textLabel&&this._textLabel.node;i&&(i.position=new e(-t.width/2,t.height/2,i.position.z),i._uiProps.uiTransformComp.setContentSize(t.contentSize));var n=this._placeholderLabel&&this._placeholderLabel.node;n&&(n.position=new e(-t.width/2,t.height/2,n.position.z),n._uiProps.uiTransformComp.setContentSize(t.contentSize));var o=this._background&&this._background.node;o&&o._uiProps.uiTransformComp.setContentSize(t.contentSize)}},{key:"string",get:function(){return this._string},set:function(t){this._maxLength>=0&&t.length>=this._maxLength&&(t=t.slice(0,this._maxLength)),this._string=t,this._updateString(t)}},{key:"placeholder",get:function(){return this._placeholderLabel?this._placeholderLabel.string:""},set:function(t){this._placeholderLabel&&(this._placeholderLabel.string=t)}},{key:"textLabel",get:function(){return this._textLabel},set:function(t){this._textLabel!==t&&(this._textLabel=t,this._textLabel&&(this._updateTextLabel(),this._updateLabels()))}},{key:"placeholderLabel",get:function(){return this._placeholderLabel},set:function(t){this._placeholderLabel!==t&&(this._placeholderLabel=t,this._placeholderLabel&&(this._updatePlaceholderLabel(),this._updateLabels()))}},{key:"backgroundImage",get:function(){return this._backgroundImage},set:function(t){this._backgroundImage!==t&&(this._backgroundImage=t,this._createBackgroundSprite())}},{key:"inputFlag",get:function(){return this._inputFlag},set:function(t){this._inputFlag=t,this._updateString(this._string)}},{key:"inputMode",get:function(){return this._inputMode},set:function(t){this._inputMode!==t&&(this._inputMode=t,this._updateTextLabel(),this._updatePlaceholderLabel())}},{key:"returnType",get:function(){return this._returnType},set:function(t){this._returnType=t}},{key:"maxLength",get:function(){return this._maxLength},set:function(t){this._maxLength=t}},{key:"tabIndex",get:function(){return this._tabIndex},set:function(t){this._tabIndex!==t&&(this._tabIndex=t,this._impl&&this._impl.setTabIndex(t))}}]),i}(T),lr._EditBoxImpl=cr,lr.KeyboardReturnType=Kn,lr.InputFlag=Jn,lr.InputMode=Qn,lr.EventType=ur,a((Yo=hr).prototype,"string",[so,lo],Object.getOwnPropertyDescriptor(Yo.prototype,"string"),Yo.prototype),a(Yo.prototype,"placeholder",[ho,uo],Object.getOwnPropertyDescriptor(Yo.prototype,"placeholder"),Yo.prototype),a(Yo.prototype,"textLabel",[co,po,_o],Object.getOwnPropertyDescriptor(Yo.prototype,"textLabel"),Yo.prototype),a(Yo.prototype,"placeholderLabel",[fo,go,yo],Object.getOwnPropertyDescriptor(Yo.prototype,"placeholderLabel"),Yo.prototype),a(Yo.prototype,"backgroundImage",[vo,mo,bo],Object.getOwnPropertyDescriptor(Yo.prototype,"backgroundImage"),Yo.prototype),a(Yo.prototype,"inputFlag",[To,Co,So],Object.getOwnPropertyDescriptor(Yo.prototype,"inputFlag"),Yo.prototype),a(Yo.prototype,"inputMode",[xo,wo,Oo],Object.getOwnPropertyDescriptor(Yo.prototype,"inputMode"),Yo.prototype),a(Yo.prototype,"returnType",[Eo,Do,Ao],Object.getOwnPropertyDescriptor(Yo.prototype,"returnType"),Yo.prototype),a(Yo.prototype,"maxLength",[ko,Lo],Object.getOwnPropertyDescriptor(Yo.prototype,"maxLength"),Yo.prototype),a(Yo.prototype,"tabIndex",[Po,Ro],Object.getOwnPropertyDescriptor(Yo.prototype,"tabIndex"),Yo.prototype),Zo=a(Yo.prototype,"editingDidBegan",[zo,c,Io,Bo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),qo=a(Yo.prototype,"textChanged",[Ho,c,Mo,No],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$o=a(Yo.prototype,"editingDidEnded",[Fo,c,Vo,Uo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ko=a(Yo.prototype,"editingReturn",[Wo,c,Go,jo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qo=a(Yo.prototype,"_textLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jo=a(Yo.prototype,"_placeholderLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tr=a(Yo.prototype,"_returnType",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Kn.DEFAULT}}),er=a(Yo.prototype,"_useOriginalSize",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ir=a(Yo.prototype,"_string",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),nr=a(Yo.prototype,"_tabIndex",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),or=a(Yo.prototype,"_backgroundImage",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rr=a(Yo.prototype,"_inputFlag",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Jn.DEFAULT}}),ar=a(Yo.prototype,"_inputMode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Qn.ANY}}),sr=a(Yo.prototype,"_maxLength",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),Xo=Yo))||Xo)||Xo)||Xo)||Xo)||Xo)||Xo));H.isBrowser&&(la._EditBoxImpl=yr);var ha,ua,ca,pa,_a,da=ct;!function(t){t[t.NONE=0]="NONE",t[t.HORIZONTAL=1]="HORIZONTAL",t[t.VERTICAL=2]="VERTICAL",t[t.GRID=3]="GRID"}(ha||(ha={})),w(ha),function(t){t[t.NONE=0]="NONE",t[t.CONTAINER=1]="CONTAINER",t[t.CHILDREN=2]="CHILDREN"}(ua||(ua={})),w(ua),function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(ca||(ca={})),w(ca),function(t){t[t.BOTTOM_TO_TOP=0]="BOTTOM_TO_TOP",t[t.TOP_TO_BOTTOM=1]="TOP_TO_BOTTOM"}(pa||(pa={})),w(pa),function(t){t[t.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",t[t.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT"}(_a||(_a={})),w(_a);var fa,ga,ya,va,ma,ba,Ta,Ca,Sa,xa,wa,Oa,Ea,Da,Aa,ka,La,Pa,Ra,za,Ia,Ba,Ha,Ma,Na,Fa=new e,Va=new e,Ua=function(e){return t({Layout:e,LayoutComponent:e}),e}((br=n("cc.Layout"),Tr=l(),Cr=rt(110),Sr=h(),xr=at(st),wr=o(ha),Or=u(),Er=o(ua),Dr=u(),Ar=u(),kr=o(ca),Lr=u(),Pr=u(),Rr=u(),zr=u(),Ir=u(),Br=u(),Hr=u(),Mr=o(pa),Nr=u(),Fr=o(_a),Vr=u(),Ur=u(),Wr=u(),br(Gr=Tr(Gr=Cr(Gr=Sr(Gr=xr(Gr=r((sa=aa=function(t){function i(){var t,e;f(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=g(this,(t=y(i)).call.apply(t,[this].concat(o))),v(e,"_resizeMode",Xr,m(e)),v(e,"_N$layoutType",Yr,m(e)),v(e,"_N$padding",Zr,m(e)),v(e,"_cellSize",qr,m(e)),v(e,"_startAxis",$r,m(e)),v(e,"_paddingLeft",Kr,m(e)),v(e,"_paddingRight",Qr,m(e)),v(e,"_paddingTop",Jr,m(e)),v(e,"_paddingBottom",ta,m(e)),v(e,"_spacingX",ea,m(e)),v(e,"_spacingY",ia,m(e)),v(e,"_verticalDirection",na,m(e)),v(e,"_horizontalDirection",oa,m(e)),v(e,"_affectedByScale",ra,m(e)),e._layoutSize=new M(300,200),e._layoutDirty=!0,e._isAlign=!1,e}return _(i,t),d(i,[{key:"updateLayout",value:function(){this._layoutDirty&&this.node.children.length>0&&(this._doLayout(),this._layoutDirty=!1)}},{key:"onEnable",value:function(){this._addEventListeners();var t=this.node._uiProps.uiTransformComp;t.contentSize.equals(M.ZERO)&&t.setContentSize(this._layoutSize),0!==this._N$padding&&this._migratePaddingData(),this._doLayoutDirty()}},{key:"onDisable",value:function(){this._removeEventListeners()}},{key:"_migratePaddingData",value:function(){this._paddingLeft=this._N$padding,this._paddingRight=this._N$padding,this._paddingTop=this._N$padding,this._paddingBottom=this._N$padding,this._N$padding=0}},{key:"_addEventListeners",value:function(){Qt.on(te.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.on(da.SIZE_CHANGED,this._resized,this),this.node.on(da.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.on(da.CHILD_ADDED,this._childAdded,this),this.node.on(da.CHILD_REMOVED,this._childRemoved,this),this._addChildrenEventListeners()}},{key:"_removeEventListeners",value:function(){Qt.off(te.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.off(da.SIZE_CHANGED,this._resized,this),this.node.off(da.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.off(da.CHILD_ADDED,this._childAdded,this),this.node.off(da.CHILD_REMOVED,this._childRemoved,this),this._removeChildrenEventListeners()}},{key:"_addChildrenEventListeners",value:function(){for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e];i.on(da.TRANSFORM_CHANGED,this._doScaleDirty,this),i.on(da.SIZE_CHANGED,this._doLayoutDirty,this),i.on(da.TRANSFORM_CHANGED,this._transformDirty,this),i.on(da.ANCHOR_CHANGED,this._doLayoutDirty,this),i.on("active-in-hierarchy-changed",this._doLayoutDirty,this)}}},{key:"_removeChildrenEventListeners",value:function(){for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e];i.off(da.TRANSFORM_CHANGED,this._doScaleDirty,this),i.off(da.SIZE_CHANGED,this._doLayoutDirty,this),i.off(da.TRANSFORM_CHANGED,this._transformDirty,this),i.off(da.ANCHOR_CHANGED,this._doLayoutDirty,this),i.off("active-in-hierarchy-changed",this._doLayoutDirty,this)}}},{key:"_childAdded",value:function(t){t.on(da.TRANSFORM_CHANGED,this._doScaleDirty,this),t.on(da.SIZE_CHANGED,this._doLayoutDirty,this),t.on(da.TRANSFORM_CHANGED,this._transformDirty,this),t.on(da.ANCHOR_CHANGED,this._doLayoutDirty,this),t.on("active-in-hierarchy-changed",this._doLayoutDirty,this),this._doLayoutDirty()}},{key:"_childRemoved",value:function(t){t.off(da.TRANSFORM_CHANGED,this._doScaleDirty,this),t.off(da.SIZE_CHANGED,this._doLayoutDirty,this),t.off(da.TRANSFORM_CHANGED,this._transformDirty,this),t.off(da.ANCHOR_CHANGED,this._doLayoutDirty,this),t.off("active-in-hierarchy-changed",this._doLayoutDirty,this),this._doLayoutDirty()}},{key:"_resized",value:function(){this._layoutSize.set(this.node._uiProps.uiTransformComp.contentSize),this._doLayoutDirty()}},{key:"_doLayoutHorizontally",value:function(t,e,i,n){var o=this.node._uiProps.uiTransformComp,r=o.anchorPoint,a=this.node.children,s=1,l=this._paddingLeft,h=-r.x*t;this._horizontalDirection===_a.RIGHT_TO_LEFT&&(s=-1,h=(1-r.x)*t,l=this._paddingRight);for(var u=h+s*l-s*this._spacingX,c=0,p=0,_=0,d=0,f=0,g=0,y=0,v=0;v<a.length;++v)a[v].activeInHierarchy&&y++;var m=this._cellSize.width;this._N$layoutType!==ha.GRID&&this._resizeMode===ua.CHILDREN&&(m=(t-(this._paddingLeft+this._paddingRight)-(y-1)*this._spacingX)/y);for(var b=0;b<a.length;++b){var T=a[b],C=T._uiProps.uiTransformComp;if(T.activeInHierarchy&&C){T.getScale(Va);var S=this._getUsedScaleValue(Va.x),x=this._getUsedScaleValue(Va.y);this._resizeMode===ua.CHILDREN&&(C.width=m/S,this._N$layoutType===ha.GRID&&(C.height=this._cellSize.height/x));var w=C.anchorX,O=C.width*S,E=C.height*x;_>p&&(p=_),E>=p&&(_=p,p=E,g=C.anchorY),this._horizontalDirection===_a.RIGHT_TO_LEFT&&(w=1-C.anchorX),u=u+s*w*O+s*this._spacingX;var D=s*(1-w)*O;if(e){var A=u+D+s*(s>0?this._paddingRight:this._paddingLeft),k=!1;this._horizontalDirection===_a.LEFT_TO_RIGHT&&A>(1-r.x)*t&&(k=!0);var L=!1;this._horizontalDirection===_a.RIGHT_TO_LEFT&&A<-r.x*t&&(L=!0),(k||L)&&(E>=p?(0===_&&(_=p),c+=_,_=p):(c+=p,_=E,p=0),u=h+s*(l+w*O),d++)}var P=i(T,C,c,d);t>=O+this._paddingLeft+this._paddingRight&&n&&(T.getPosition(Fa),T.setPosition(u,P,Fa.z));var R=1,z=void 0,I=0===p?E:p;this._verticalDirection===pa.TOP_TO_BOTTOM?(f=f||o.height,(z=P+(R=-1)*(I*g+this._paddingBottom))<f&&(f=z)):(f=f||-o.height,(z=P+R*(I*g+this._paddingTop))>f&&(f=z)),u+=D}}return f}},{key:"_doLayoutVertically",value:function(t,e,i,n){var o=this.node._uiProps.uiTransformComp,r=o.anchorPoint,a=this.node.children,s=1,l=this._paddingBottom,h=-r.y*t;this._verticalDirection===pa.TOP_TO_BOTTOM&&(s=-1,h=(1-r.y)*t,l=this._paddingTop);for(var u=h+s*l-s*this._spacingY,c=0,p=0,_=0,d=0,f=0,g=0,y=0,v=0;v<a.length;++v)a[v].activeInHierarchy&&y++;var m=this._cellSize.height;this._N$layoutType!==ha.GRID&&this._resizeMode===ua.CHILDREN&&(m=(t-(this._paddingTop+this._paddingBottom)-(y-1)*this._spacingY)/y);for(var b=0;b<a.length;++b){var T=a[b];if(T){var C=T.getScale(),S=this._getUsedScaleValue(C.x),x=this._getUsedScaleValue(C.y),w=T._uiProps.uiTransformComp;if(T.activeInHierarchy&&w){this._resizeMode===ua.CHILDREN&&(w.height=m/x,this._N$layoutType===ha.GRID&&(w.width=this._cellSize.width/S));var O=w.anchorY,E=w.width*S,D=w.height*x;_>p&&(p=_),E>=p&&(_=p,p=E,g=w.anchorX),this._verticalDirection===pa.TOP_TO_BOTTOM&&(O=1-w.anchorY),u=u+s*O*D+s*this._spacingY;var A=s*(1-O)*D;if(e){var k=u+A+s*(s>0?this._paddingTop:this._paddingBottom),L=!1;this._verticalDirection===pa.BOTTOM_TO_TOP&&k>(1-r.y)*t&&(L=!0);var P=!1;this._verticalDirection===pa.TOP_TO_BOTTOM&&k<-r.y*t&&(P=!0),(L||P)&&(E>=p?(0===_&&(_=p),c+=_,_=p):(c+=p,_=E,p=0),u=h+s*(l+O*D),d++)}var R=i(T,w,c,d);t>=D+(this._paddingTop+this._paddingBottom)&&n&&(T.getPosition(Fa),T.setPosition(R,u,Fa.z));var z=1,I=void 0,B=0===p?E:p;this._horizontalDirection===_a.RIGHT_TO_LEFT?(z=-1,f=f||o.width,(I=R+z*(B*g+this._paddingLeft))<f&&(f=I)):(f=f||-o.width,(I=R+z*(B*g+this._paddingRight))>f&&(f=I)),u+=A}}}return f}},{key:"_doLayoutBasic",value:function(){for(var t=this.node.children,i=null,n=0;n<t.length;++n){var o=t[n],r=o._uiProps.uiTransformComp;r&&(o.activeInHierarchy&&(i?b.union(i,i,r.getBoundingBoxToWorld()):i=r.getBoundingBoxToWorld()))}if(i){var a=this.node.parent.getComponent(st);if(!a)return;e.set(Fa,i.x,i.y,0);var l=new e;a.convertToNodeSpaceAR(Fa,l),e.set(l,l.x-this._paddingLeft,l.y-this._paddingBottom,l.z),e.set(Fa,i.x+i.width,i.y+i.height,0);var h=new e;a.convertToNodeSpaceAR(Fa,h),e.set(h,h.x+this._paddingRight,h.y+this._paddingTop,h.z);var u=s.size(parseFloat((h.x-l.x).toFixed(2)),parseFloat((h.y-l.y).toFixed(2)));this.node.getPosition(Fa);var c=this.node._uiProps.uiTransformComp;if(0!==u.width){var p=(Fa.x-l.x)/u.width;c.anchorX=parseFloat(p.toFixed(2))}if(0!==u.height){var _=(Fa.y-l.y)/u.height;c.anchorY=parseFloat(_.toFixed(2))}c.setContentSize(u)}}},{key:"_doLayoutGridAxisHorizontal",value:function(t,e){var i=this,n=e.width,o=1,r=-t.y*e.height,a=this._paddingBottom;this._verticalDirection===pa.TOP_TO_BOTTOM&&(o=-1,r=(1-t.y)*e.height,a=this._paddingTop);var s=this,l=function(t,e,n,l){return r+o*(n+e.anchorY*e.height*s._getUsedScaleValue(t.getScale().y)+a+l*i._spacingY)},h=0;if(this._resizeMode===ua.CONTAINER){var u=this._doLayoutHorizontally(n,!0,l,!1);(h=r-u)<0&&(h*=-1),r=-t.y*h,this._verticalDirection===pa.TOP_TO_BOTTOM&&(o=-1,r=(1-t.y)*h)}this._doLayoutHorizontally(n,!0,l,!0),this._resizeMode===ua.CONTAINER&&this.node._uiProps.uiTransformComp.setContentSize(n,h)}},{key:"_doLayoutGridAxisVertical",value:function(t,e){var i=this,n=e.height,o=1,r=-t.x*e.width,a=this._paddingLeft;this._horizontalDirection===_a.RIGHT_TO_LEFT&&(o=-1,r=(1-t.x)*e.width,a=this._paddingRight);var s=this,l=function(t,e,n,l){return r+o*(n+e.anchorX*e.width*s._getUsedScaleValue(t.getScale().x)+a+l*i._spacingX)},h=0;if(this._resizeMode===ua.CONTAINER){var u=this._doLayoutVertically(n,!0,l,!1);(h=r-u)<0&&(h*=-1),r=-t.x*h,this._horizontalDirection===_a.RIGHT_TO_LEFT&&(o=-1,r=(1-t.x)*h)}this._doLayoutVertically(n,!0,l,!0),this._resizeMode===ua.CONTAINER&&this.node._uiProps.uiTransformComp.setContentSize(h,n)}},{key:"_doLayoutGrid",value:function(){var t=this.node._uiProps.uiTransformComp,e=t.anchorPoint,i=t.contentSize;this.startAxis===ca.HORIZONTAL?this._doLayoutGridAxisHorizontal(e,i):this.startAxis===ca.VERTICAL&&this._doLayoutGridAxisVertical(e,i)}},{key:"_getHorizontalBaseWidth",value:function(t){var e=0,i=0;if(this._resizeMode===ua.CONTAINER){for(var n=0;n<t.length;++n){var o=t[n];o.getScale(Va);var r=o._uiProps.uiTransformComp;o.activeInHierarchy&&r&&(i++,e+=r.width*this._getUsedScaleValue(Va.x))}e+=(i-1)*this._spacingX+this._paddingLeft+this._paddingRight}else e=this.node._uiProps.uiTransformComp.width;return e}},{key:"_getVerticalBaseHeight",value:function(t){var e=0,i=0;if(this._resizeMode===ua.CONTAINER){for(var n=0;n<t.length;++n){var o=t[n];o.getScale(Va);var r=o._uiProps.uiTransformComp;o.activeInHierarchy&&r&&(i++,e+=r.height*this._getUsedScaleValue(Va.y))}e+=(i-1)*this._spacingY+this._paddingBottom+this._paddingTop}else e=this.node._uiProps.uiTransformComp.height;return e}},{key:"_doLayout",value:function(){var t=this;if(this._N$layoutType===ha.HORIZONTAL){var i=this._getHorizontalBaseWidth(this.node.children);this._doLayoutHorizontally(i,!1,(function(i){return(t._isAlign?e.ZERO:i.position).y}),!0),this._isAlign=!1,this.node._uiProps.uiTransformComp.width=i}else if(this._N$layoutType===ha.VERTICAL){var n=this._getVerticalBaseHeight(this.node.children);this._doLayoutVertically(n,!1,(function(i){return(t._isAlign?e.ZERO:i.position).x}),!0),this._isAlign=!1,this.node._uiProps.uiTransformComp.height=n}else this._N$layoutType===ha.NONE?this._resizeMode===ua.CONTAINER&&this._doLayoutBasic():this._N$layoutType===ha.GRID&&this._doLayoutGrid()}},{key:"_getUsedScaleValue",value:function(t){return this._affectedByScale?Math.abs(t):1}},{key:"_transformDirty",value:function(t){t&vt.POSITION&&this._doLayoutDirty()}},{key:"_doLayoutDirty",value:function(){this._layoutDirty=!0}},{key:"_doScaleDirty",value:function(t){t&vt.SCALE&&(this._layoutDirty=this._layoutDirty||this._affectedByScale)}},{key:"type",get:function(){return this._N$layoutType},set:function(t){this._N$layoutType=t,this._isAlign=!0,this._doLayoutDirty()}},{key:"resizeMode",get:function(){return this._resizeMode},set:function(t){this._N$layoutType===ha.NONE&&t===ua.CHILDREN||(this._resizeMode=t,this._doLayoutDirty())}},{key:"cellSize",get:function(){return this._cellSize},set:function(t){this._cellSize!==t&&(this._cellSize.set(t),this._doLayoutDirty())}},{key:"startAxis",get:function(){return this._startAxis},set:function(t){this._startAxis!==t&&(this._startAxis=t,this._doLayoutDirty())}},{key:"paddingLeft",get:function(){return this._paddingLeft},set:function(t){this._paddingLeft!==t&&(this._paddingLeft=t,this._doLayoutDirty())}},{key:"paddingRight",get:function(){return this._paddingRight},set:function(t){this._paddingRight!==t&&(this._paddingRight=t,this._doLayoutDirty())}},{key:"paddingTop",get:function(){return this._paddingTop},set:function(t){this._paddingTop!==t&&(this._paddingTop=t,this._doLayoutDirty())}},{key:"paddingBottom",get:function(){return this._paddingBottom},set:function(t){this._paddingBottom!==t&&(this._paddingBottom=t,this._doLayoutDirty())}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX!==t&&(this._spacingX=t,this._doLayoutDirty())}},{key:"spacingY",get:function(){return this._spacingY},set:function(t){this._spacingY!==t&&(this._spacingY=t,this._doLayoutDirty())}},{key:"verticalDirection",get:function(){return this._verticalDirection},set:function(t){this._verticalDirection!==t&&(this._verticalDirection=t,this._doLayoutDirty())}},{key:"horizontalDirection",get:function(){return this._horizontalDirection},set:function(t){this._horizontalDirection!==t&&(this._horizontalDirection=t,this._doLayoutDirty())}},{key:"padding",get:function(){return this._paddingLeft},set:function(t){this._N$padding=t,this._migratePaddingData(),this._doLayoutDirty()}},{key:"affectedByScale",get:function(){return this._affectedByScale},set:function(t){this._affectedByScale=t,this._doLayoutDirty()}}]),i}(T),aa.Type=ha,aa.VerticalDirection=pa,aa.HorizontalDirection=_a,aa.ResizeMode=ua,aa.AxisDirection=ca,a((jr=sa).prototype,"type",[wr,Or],Object.getOwnPropertyDescriptor(jr.prototype,"type"),jr.prototype),a(jr.prototype,"resizeMode",[Er,Dr],Object.getOwnPropertyDescriptor(jr.prototype,"resizeMode"),jr.prototype),a(jr.prototype,"cellSize",[Ar],Object.getOwnPropertyDescriptor(jr.prototype,"cellSize"),jr.prototype),a(jr.prototype,"startAxis",[kr,Lr],Object.getOwnPropertyDescriptor(jr.prototype,"startAxis"),jr.prototype),a(jr.prototype,"paddingLeft",[Pr],Object.getOwnPropertyDescriptor(jr.prototype,"paddingLeft"),jr.prototype),a(jr.prototype,"paddingRight",[Rr],Object.getOwnPropertyDescriptor(jr.prototype,"paddingRight"),jr.prototype),a(jr.prototype,"paddingTop",[zr],Object.getOwnPropertyDescriptor(jr.prototype,"paddingTop"),jr.prototype),a(jr.prototype,"paddingBottom",[Ir],Object.getOwnPropertyDescriptor(jr.prototype,"paddingBottom"),jr.prototype),a(jr.prototype,"spacingX",[Br],Object.getOwnPropertyDescriptor(jr.prototype,"spacingX"),jr.prototype),a(jr.prototype,"spacingY",[Hr],Object.getOwnPropertyDescriptor(jr.prototype,"spacingY"),jr.prototype),a(jr.prototype,"verticalDirection",[Mr,Nr],Object.getOwnPropertyDescriptor(jr.prototype,"verticalDirection"),jr.prototype),a(jr.prototype,"horizontalDirection",[Fr,Vr],Object.getOwnPropertyDescriptor(jr.prototype,"horizontalDirection"),jr.prototype),a(jr.prototype,"padding",[Ur],Object.getOwnPropertyDescriptor(jr.prototype,"padding"),jr.prototype),a(jr.prototype,"affectedByScale",[Wr],Object.getOwnPropertyDescriptor(jr.prototype,"affectedByScale"),jr.prototype),Xr=a(jr.prototype,"_resizeMode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ua.NONE}}),Yr=a(jr.prototype,"_N$layoutType",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ha.NONE}}),Zr=a(jr.prototype,"_N$padding",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qr=a(jr.prototype,"_cellSize",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new M(40,40)}}),$r=a(jr.prototype,"_startAxis",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ca.HORIZONTAL}}),Kr=a(jr.prototype,"_paddingLeft",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qr=a(jr.prototype,"_paddingRight",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Jr=a(jr.prototype,"_paddingTop",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ta=a(jr.prototype,"_paddingBottom",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ea=a(jr.prototype,"_spacingX",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ia=a(jr.prototype,"_spacingY",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),na=a(jr.prototype,"_verticalDirection",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pa.TOP_TO_BOTTOM}}),oa=a(jr.prototype,"_horizontalDirection",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _a.LEFT_TO_RIGHT}}),ra=a(jr.prototype,"_affectedByScale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gr=jr))||Gr)||Gr)||Gr)||Gr)||Gr)||Gr));!function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE"}(fa||(fa={})),w(fa),function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER"}(ga||(ga={})),w(ga),function(t){t[t.PT_CORNER=1]="PT_CORNER",t[t.PT_LEFT=2]="PT_LEFT",t[t.PT_BEVEL=4]="PT_BEVEL",t[t.PT_INNERBEVEL=8]="PT_INNERBEVEL"}(ya||(ya={})),w(ya);var Wa,Ga,ja,Xa,Ya,Za,qa,$a,Ka,Qa,Ja,ts,es,is,ns,os,rs,as,ss,ls={parent:null,owner:null,subModelIdx:0},hs=function(e){return t({Graphics:e,GraphicsComponent:e}),e}((va=n("cc.Graphics"),ma=l(),ba=rt(110),Ta=h(),Ca=o(ga),Sa=u(),xa=o(fa),wa=u(),Oa=u(),Ea=u(),Da=u(),Aa=P(),va(ka=ma(ka=ba(ka=Ta((Na=Ma=function(t){function e(){var t;return f(this,e),(t=g(this,y(e).call(this))).impl=null,t.model=null,v(t,"_lineWidth",Pa,m(t)),v(t,"_strokeColor",Ra,m(t)),v(t,"_lineJoin",za,m(t)),v(t,"_lineCap",Ia,m(t)),v(t,"_fillColor",Ba,m(t)),v(t,"_miterLimit",Ha,m(t)),t._instanceMaterialType=$t.ADD_COLOR,t._uiMaterialDirty=!0,t}return _(e,t),d(e,[{key:"lineWidth",get:function(){return this._lineWidth},set:function(t){this._lineWidth=t,this.impl&&(this.impl.lineWidth=t)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin=t,this.impl&&(this.impl.lineJoin=t)}},{key:"lineCap",get:function(){return this._lineCap},set:function(t){this._lineCap=t,this.impl&&(this.impl.lineCap=t)}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){this.impl&&(this._strokeColor.set(t),this.impl.strokeColor=this._strokeColor)}},{key:"fillColor",get:function(){return this._fillColor},set:function(t){this.impl&&(this._fillColor.set(t),this.impl.fillColor=this._fillColor)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit=t}},{key:"color",get:function(){return this._color},set:function(t){this._color!==t&&(this._color.set(t),this._updateColor(),this.markForUpdateRenderData())}}]),d(e,[{key:"onRestore",value:function(){this.impl||this._flushAssembler()}},{key:"__preload",value:function(){z(y(e.prototype),"__preload",this).call(this),this.impl=this._assembler&&this._assembler.createImpl(this)}},{key:"onLoad",value:function(){this._sceneGetter=Qt.root.ui.getRenderSceneGetter(),this.model||(this.model=Qt.root.createModel(mt)),this.helpInstanceMaterial()}},{key:"onDisable",value:function(){this._detachFromScene()}},{key:"onDestroy",value:function(){z(y(e.prototype),"onDestroy",this).call(this),this._sceneGetter=null,this.model&&(this.model.destroy(),Qt.root.destroyModel(this.model),this.model=null),this.impl&&(this.impl.clear(),this.impl=null)}},{key:"moveTo",value:function(t,e){this.impl&&this.impl.moveTo(t,e)}},{key:"lineTo",value:function(t,e){this.impl&&this.impl.lineTo(t,e)}},{key:"bezierCurveTo",value:function(t,e,i,n,o,r){this.impl&&this.impl.bezierCurveTo(t,e,i,n,o,r)}},{key:"quadraticCurveTo",value:function(t,e,i,n){this.impl&&this.impl.quadraticCurveTo(t,e,i,n)}},{key:"arc",value:function(t,e,i,n,o,r){this.impl&&this.impl.arc(t,e,i,n,o,r)}},{key:"ellipse",value:function(t,e,i,n){this.impl&&this.impl.ellipse(t,e,i,n)}},{key:"circle",value:function(t,e,i){this.impl&&this.impl.circle(t,e,i)}},{key:"rect",value:function(t,e,i,n){this.impl&&this.impl.rect(t,e,i,n)}},{key:"roundRect",value:function(t,e,i,n,o){this.impl&&this.impl.roundRect(t,e,i,n,o)}},{key:"fillRect",value:function(t,e,i,n){this.rect(t,e,i,n),this.fill()}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.impl&&(this.impl.clear(t),this._detachFromScene(),this.model&&this.model.destroy(),this.markForUpdateRenderData())}},{key:"close",value:function(){this.impl&&this.impl.close()}},{key:"stroke",value:function(){this._assembler||this._flushAssembler(),this._assembler.stroke(this),this._attachToScene()}},{key:"fill",value:function(){this._assembler||this._flushAssembler(),this._assembler.fill(this),this._attachToScene()}},{key:"helpInstanceMaterial",value:function(){var t=null;ls.owner=this,this.sharedMaterial?(ls.parent=this.sharedMaterial[0],t=new bt(ls)):(ls.parent=Tt.get("ui-graphics-material"),(t=new bt(ls)).recompileShaders({USE_LOCAL:!0})),this._uiMaterial=ls.parent,this._uiMaterialIns=t,this.impl||(this._flushAssembler(),this.impl=this._assembler&&this._assembler.createImpl(this))}},{key:"_render",value:function(t){t.commitModel(this,this.model,this._uiMaterialIns)}},{key:"_flushAssembler",value:function(){var t=e.Assembler.getAssembler(this);this._assembler!==t&&(this._assembler=t)}},{key:"_canRender",value:function(){return!!z(y(e.prototype),"_canRender",this).call(this)&&(!!this.model&&this.model.inited)}},{key:"_attachToScene",value:function(){var t=Qt.root.ui.renderScene;this.model&&this.model.scene!==t&&(null!==this.model.scene&&this._detachFromScene(),t.addModel(this.model))}},{key:"_detachFromScene",value:function(){this.model&&this.model.scene&&(this.model.scene.removeModel(this.model),this.model.scene=null)}}]),e}(Yt),Ma.LineJoin=ga,Ma.LineCap=fa,a((La=Na).prototype,"lineWidth",[N],Object.getOwnPropertyDescriptor(La.prototype,"lineWidth"),La.prototype),a(La.prototype,"lineJoin",[Ca,Sa],Object.getOwnPropertyDescriptor(La.prototype,"lineJoin"),La.prototype),a(La.prototype,"lineCap",[xa,wa],Object.getOwnPropertyDescriptor(La.prototype,"lineCap"),La.prototype),a(La.prototype,"strokeColor",[Oa],Object.getOwnPropertyDescriptor(La.prototype,"strokeColor"),La.prototype),a(La.prototype,"fillColor",[Ea],Object.getOwnPropertyDescriptor(La.prototype,"fillColor"),La.prototype),a(La.prototype,"miterLimit",[Da],Object.getOwnPropertyDescriptor(La.prototype,"miterLimit"),La.prototype),a(La.prototype,"color",[dt,Aa],Object.getOwnPropertyDescriptor(La.prototype,"color"),La.prototype),Pa=a(La.prototype,"_lineWidth",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ra=a(La.prototype,"_strokeColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.BLACK.clone()}}),za=a(La.prototype,"_lineJoin",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ga.MITER}}),Ia=a(La.prototype,"_lineCap",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fa.BUTT}}),Ba=a(La.prototype,"_fillColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.WHITE.clone()}}),Ha=a(La.prototype,"_miterLimit",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),ka=La))||ka)||ka)||ka)||ka)),us=new x,cs=new F,ps=new x,_s=[];!function(t){t[t.RECT=0]="RECT",t[t.ELLIPSE=1]="ELLIPSE",t[t.GRAPHICS_STENCIL=2]="GRAPHICS_STENCIL"}(ss||(ss={})),w(ss);var ds,fs,gs,ys,vs,ms,bs,Ts,Cs,Ss,xs,ws,Os,Es,Ds,As,ks,Ls,Ps,Rs,zs,Is,Bs,Hs=function(e){return t({Mask:e,MaskComponent:e}),e}((Wa=n("cc.Mask"),Ga=l(),ja=rt(110),Xa=h(),Ya=o(ss),Za=O(),qa=u(),$a=u(),Ka=P(),Qa=P(),Ja=P(),Wa(ts=Ga(ts=ja(ts=Xa((as=rs=function(t){function i(){var t;return f(this,i),t=g(this,y(i).call(this)),v(t,"_type",is,m(t)),v(t,"_inverted",ns,m(t)),v(t,"_segments",os,m(t)),t._graphics=null,t._clearGraphics=null,t._instanceMaterialType=$t.ADD_COLOR,t._uiMaterialDirty=!0,t}return _(i,t),d(i,[{key:"type",get:function(){return this._type},set:function(t){this._type!==t&&(this._type=t,this._updateGraphics(),this._renderData&&(this.destroyRenderData(),this._renderData=null))}},{key:"inverted",get:function(){return this._inverted},set:function(t){s.game.renderType!==Ct.RENDER_TYPE_CANVAS?this._inverted=t:R(4202)}},{key:"segments",get:function(){return this._segments},set:function(t){this._segments!==t&&(this._segments=V(t,3,1e4),this._updateGraphics())}},{key:"graphics",get:function(){return this._graphics}},{key:"clearGraphics",get:function(){return this._clearGraphics}},{key:"dstBlendFactor",get:function(){return this._dstBlendFactor},set:function(t){this._dstBlendFactor!==t&&(this._dstBlendFactor=t,this._updateBlendFunc())}},{key:"srcBlendFactor",get:function(){return this._srcBlendFactor},set:function(t){this._srcBlendFactor!==t&&(this._srcBlendFactor=t,this._updateBlendFunc())}},{key:"color",get:function(){return this._color},set:function(t){this._color!==t&&(this._color.set(t),this.markForUpdateRenderData())}}]),d(i,[{key:"onLoad",value:function(){this._createGraphics(),this._clearGraphics&&this._clearGraphics.onLoad(),this._graphics&&this._graphics.onLoad()}},{key:"onRestore",value:function(){this._createGraphics(),this._updateGraphics()}},{key:"onEnable",value:function(){z(y(i.prototype),"onEnable",this).call(this),this._enableGraphics(),jt.on("design-resolution-changed",this._updateClearGraphics,this)}},{key:"onDisable",value:function(){z(y(i.prototype),"onDisable",this).call(this),this._disableGraphics(),jt.off("design-resolution-changed",this._updateClearGraphics)}},{key:"onDestroy",value:function(){z(y(i.prototype),"onDestroy",this).call(this),this._removeGraphics()}},{key:"isHit",value:function(t){var e=this.node._uiProps.uiTransformComp,i=e.contentSize,n=i.width,o=i.height,r=cs;this.node.getWorldMatrix(us),x.invert(ps,us),F.transformMat4(r,t,ps);var a=e.anchorPoint;r.x+=a.x*n,r.y+=a.y*o;var s=!1;if(this.type===ss.RECT||this.type===ss.GRAPHICS_STENCIL)s=r.x>=0&&r.y>=0&&r.x<=n&&r.y<=o;else if(this.type===ss.ELLIPSE){var l=n/2,h=o/2,u=r.x-.5*n,c=r.y-.5*o;s=u*u/(l*l)+c*c/(h*h)<1}return this._inverted&&(s=!s),s}},{key:"_render",value:function(t){t.commitComp(this,null,this._assembler)}},{key:"_postRender",value:function(t){this._postAssembler&&t.commitComp(this,null,this._postAssembler)}},{key:"_nodeStateChange",value:function(t){z(y(i.prototype),"_nodeStateChange",this).call(this,t),this._updateGraphics()}},{key:"_resolutionChanged",value:function(){this._updateClearGraphics()}},{key:"_canRender",value:function(){return!!z(y(i.prototype),"_canRender",this).call(this)&&(null!==this._clearGraphics&&null!==this._graphics)}},{key:"_flushAssembler",value:function(){var t=i.Assembler.getAssembler(this),e=i.PostAssembler.getAssembler(this);this._assembler!==t&&(this.destroyRenderData(),this._assembler=t),this._postAssembler!==e&&(this._postAssembler=e),this._renderData||this._assembler&&this._assembler.createData&&(this._renderData=this._assembler.createData(this),this._renderData.material=this.sharedMaterial,this.markForUpdateRenderData())}},{key:"_createGraphics",value:function(){if(!this._clearGraphics){var t=new lt("clear-graphics"),e=this._clearGraphics=t.addComponent(hs);e.delegateSrc=this.node,e.lineWidth=0;var i=p.WHITE.clone();i.a=0,e.fillColor=i}if(!this._graphics){var n=this._graphics=new hs;n.node=this.node,n.node.getWorldMatrix(),n.lineWidth=0;var o=p.WHITE.clone();o.a=0,n.fillColor=o}}},{key:"_updateClearGraphics",value:function(){if(this._clearGraphics){var t=Xt;this._clearGraphics.node.setWorldPosition(t.width/2,t.height/2,0),this._clearGraphics.clear(),this._clearGraphics.rect(-t.width/2,-t.height/2,t.width,t.height),this._clearGraphics.fill()}}},{key:"_updateGraphics",value:function(){if(this._graphics){var t=this.node._uiProps.uiTransformComp,i=this._graphics;i.clear();var n=t.contentSize,o=n.width,r=n.height,a=t.anchorPoint,s=-o*a.x,l=-r*a.y;if(this._type===ss.RECT)i.rect(s,l,o,r);else if(this._type===ss.ELLIPSE){for(var h=function(t,i,n){_s.length=0;for(var o=2*Math.PI/n,r=0;r<n;++r)_s.push(new e(i.x*Math.cos(o*r)+t.x,i.y*Math.sin(o*r)+t.y,0));return _s}(new e(s+o/2,l+r/2,0),new e(o/2,r/2,0),this._segments),u=0;u<h.length;++u){var c=h[u];0===u?i.moveTo(c.x,c.y):i.lineTo(c.x,c.y)}i.close()}i.fill()}}},{key:"_enableGraphics",value:function(){this._clearGraphics&&(this._clearGraphics.onEnable(),this._updateClearGraphics()),this._graphics&&(this._graphics.onEnable(),this._updateGraphics())}},{key:"_disableGraphics",value:function(){this._graphics&&this._graphics.onDisable(),this._clearGraphics&&this._clearGraphics.onDisable()}},{key:"_removeGraphics",value:function(){this._graphics&&this._graphics.destroy(),this._clearGraphics&&this._clearGraphics.destroy()}}]),i}(Yt),rs.Type=ss,a((es=as).prototype,"type",[Ya,Za,qa],Object.getOwnPropertyDescriptor(es.prototype,"type"),es.prototype),a(es.prototype,"inverted",[$a],Object.getOwnPropertyDescriptor(es.prototype,"inverted"),es.prototype),a(es.prototype,"segments",[N],Object.getOwnPropertyDescriptor(es.prototype,"segments"),es.prototype),a(es.prototype,"dstBlendFactor",[dt,Ka],Object.getOwnPropertyDescriptor(es.prototype,"dstBlendFactor"),es.prototype),a(es.prototype,"srcBlendFactor",[dt,Qa],Object.getOwnPropertyDescriptor(es.prototype,"srcBlendFactor"),es.prototype),a(es.prototype,"color",[dt,Ja],Object.getOwnPropertyDescriptor(es.prototype,"color"),es.prototype),is=a(es.prototype,"_type",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ss.RECT}}),ns=a(es.prototype,"_inverted",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),os=a(es.prototype,"_segments",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 64}}),ts=es))||ts)||ts)||ts)||ts));s.Mask=Hs,function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.FILLED=2]="FILLED"}(Bs||(Bs={})),i(Bs);var Ms,Ns,Fs,Vs,Us,Ws,Gs,js,Xs,Ys,Zs,qs,$s,Ks,Qs,Js,tl,el,il,nl,ol,rl,al,sl,ll,hl,ul,cl,pl,_l,dl,fl,gl,yl,vl,ml,bl,Tl,Cl,Sl,xl,wl,Ol,El,Dl,Al,kl=function(e){return t({ProgressBar:e,ProgressBarComponent:e}),e}((ds=n("cc.ProgressBar"),fs=l(),gs=rt(110),ys=h(),vs=at(st),ms=o(Zt),bs=u(),Ts=o(Bs),Cs=u(),Ss=u(),xs=W(),ws=u(),Os=u(),ds(Es=fs(Es=gs(Es=ys(Es=vs((Is=zs=function(t){function i(){var t,e;f(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=g(this,(t=y(i)).call.apply(t,[this].concat(o))),v(e,"_barSprite",As,m(e)),v(e,"_mode",ks,m(e)),v(e,"_totalLength",Ls,m(e)),v(e,"_progress",Ps,m(e)),v(e,"_reverse",Rs,m(e)),e}return _(i,t),d(i,[{key:"_initBarSprite",value:function(){if(this._barSprite){var t=this._barSprite.node;if(!t)return;var e=this.node._uiProps.uiTransformComp,i=e.contentSize,n=e.anchorPoint,o=t._uiProps.uiTransformComp.contentSize;if(this._barSprite.fillType===Zt.FillType.RADIAL&&(this._mode=Bs.FILLED),this._mode===Bs.HORIZONTAL?this.totalLength=o.width:this._mode===Bs.VERTICAL?this.totalLength=o.height:this.totalLength=this._barSprite.fillRange,t.parent===this.node){var r=-i.width*n.x;t.setPosition(r,0,0)}}}},{key:"_updateBarStatus",value:function(){if(this._barSprite){var t=this._barSprite.node;if(!t)return;var i=t._uiProps.uiTransformComp,n=i.anchorPoint,o=i.contentSize,r=t.getPosition(),a=new F(0,.5),s=G(this._progress),l=this._totalLength*s,h=o,u=0,c=0;switch(this._mode){case Bs.HORIZONTAL:this._reverse&&(a=new F(1,.5)),h=new M(l,o.height),u=this._totalLength,c=o.height;break;case Bs.VERTICAL:a=this._reverse?new F(.5,1):new F(.5,0),h=new M(o.width,l),u=o.width,c=this._totalLength}if(this._mode===Bs.FILLED)this._barSprite.type!==Zt.Type.FILLED?j("ProgressBar FILLED mode only works when barSprite's Type is FILLED!"):(this._reverse&&(l*=-1),this._barSprite.fillRange=l);else if(this._barSprite.type!==Zt.Type.FILLED){var p=a.x-n.x,_=a.y-n.y,d=new e(u*p,c*_,0);t.setPosition(r.x+d.x,r.y+d.y,r.z),i.setAnchorPoint(a),i.setContentSize(h)}else j("ProgressBar non-FILLED mode only works when barSprite's Type is non-FILLED!")}}},{key:"barSprite",get:function(){return this._barSprite},set:function(t){this._barSprite!==t&&(this._barSprite=t,this._initBarSprite())}},{key:"mode",get:function(){return this._mode},set:function(t){if(this._mode!==t&&(this._mode=t,this._barSprite)){var e=this._barSprite.node;if(!e)return;var i=e._uiProps.uiTransformComp.contentSize;this._mode===Bs.HORIZONTAL?this.totalLength=i.width:this._mode===Bs.VERTICAL?this.totalLength=i.height:this._mode===Bs.FILLED&&(this.totalLength=this._barSprite.fillRange)}}},{key:"totalLength",get:function(){return this._totalLength},set:function(t){this._mode===Bs.FILLED&&(t=G(t)),this._totalLength=t,this._updateBarStatus()}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,this._updateBarStatus())}},{key:"reverse",get:function(){return this._reverse},set:function(t){this._reverse!==t&&(this._reverse=t,this._barSprite&&(this._barSprite.fillStart=1-this._barSprite.fillStart),this._updateBarStatus())}}]),i}(T),zs.Mode=Bs,a((Ds=Is).prototype,"barSprite",[ms,bs],Object.getOwnPropertyDescriptor(Ds.prototype,"barSprite"),Ds.prototype),a(Ds.prototype,"mode",[Ts,Cs],Object.getOwnPropertyDescriptor(Ds.prototype,"mode"),Ds.prototype),a(Ds.prototype,"totalLength",[Ss],Object.getOwnPropertyDescriptor(Ds.prototype,"totalLength"),Ds.prototype),a(Ds.prototype,"progress",[xs,U,ws],Object.getOwnPropertyDescriptor(Ds.prototype,"progress"),Ds.prototype),a(Ds.prototype,"reverse",[Os],Object.getOwnPropertyDescriptor(Ds.prototype,"reverse"),Ds.prototype),As=a(Ds.prototype,"_barSprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ks=a(Ds.prototype,"_mode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Bs.HORIZONTAL}}),Ls=a(Ds.prototype,"_totalLength",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ps=a(Ds.prototype,"_progress",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),Rs=a(Ds.prototype,"_reverse",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Es=Ds))||Es)||Es)||Es)||Es)||Es)),Ll=function(e){return t({LabelOutline:e,LabelOutlineComponent:e}),e}((Ms=n("cc.LabelOutline"),Ns=l(),Fs=rt(110),Vs=h(),Us=at(to),Ws=u(),Gs=u(),Ms(js=Ns(js=Fs(js=Vs(js=Us(js=r((Ys=a((Xs=function(t){function e(){var t,i;f(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=g(this,(t=y(e)).call.apply(t,[this].concat(o))),v(i,"_color",Ys,m(i)),v(i,"_width",Zs,m(i)),i}return _(e,t),d(e,[{key:"onEnable",value:function(){this._updateRenderData()}},{key:"onDisable",value:function(){this._updateRenderData()}},{key:"_updateRenderData",value:function(){var t=this.node.getComponent(to);t&&t.updateRenderData(!0)}},{key:"color",get:function(){return this._color},set:function(t){this._color!==t&&(this._color.set(t),this._updateRenderData())}},{key:"width",get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this._updateRenderData())}}]),e}(T)).prototype,"_color",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(0,0,0,255)}}),Zs=a(Xs.prototype,"_width",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),a(Xs.prototype,"color",[Ws],Object.getOwnPropertyDescriptor(Xs.prototype,"color"),Xs.prototype),a(Xs.prototype,"width",[Gs],Object.getOwnPropertyDescriptor(Xs.prototype,"width"),Xs.prototype),js=Xs))||js)||js)||js)||js)||js)||js)),Pl=new Gt,Rl=new X((function(t){if(!s.isValid(t.node))return!1;var e=t.node.getComponent(Ll);return e&&(e.width=0),!0}),20);Rl.get=function(t,e){var i=this._get();i||(i={node:new St("RICHTEXT_CHILD"),comp:null,lineCount:0,styleIndex:0,imageOffset:"",clickParam:"",clickHandler:""});var n=i.node;n||(n=new St("RICHTEXT_CHILD"));var o=n.getComponent(to);return o||(o=n.addComponent(to)),o.string=t,o.horizontalAlign=jn.LEFT,o.verticalAlign=Xn.TOP,n.setPosition(0,0,0),n._uiProps.uiTransformComp.setAnchorPoint(.5,.5),{node:n,comp:o,lineCount:0,styleIndex:0,imageOffset:"",clickParam:"",clickHandler:""}};var zl,Il,Bl,Hl,Ml,Nl,Fl,Vl,Ul,Wl,Gl,jl,Xl,Yl,Zl,ql,$l,Kl,Ql,Jl,th,eh,ih,nh,oh,rh=function(e){return t({RichText:e,RichTextComponent:e}),e}((qs=n("cc.RichText"),$s=l(),Ks=rt(110),Qs=h(),Js=u(),tl=o(jn),el=u(),il=u(),nl=u(),ol=o(pt),rl=u(),al=u(),sl=o(Zn),ll=u(),hl=u(),ul=u(),cl=o(xt),pl=u(),_l=u(),qs(dl=$s(dl=Ks(dl=Qs(dl=r((Al=Dl=function(t){function e(){var t;return f(this,e),t=g(this,y(e).call(this)),v(t,"_lineHeight",gl,m(t)),v(t,"_string",yl,m(t)),v(t,"_horizontalAlign",vl,m(t)),v(t,"_fontSize",ml,m(t)),v(t,"_maxWidth",bl,m(t)),v(t,"_fontFamily",Tl,m(t)),v(t,"_font",Cl,m(t)),v(t,"_isSystemFontUsed",Sl,m(t)),v(t,"_userDefinedFont",xl,m(t)),v(t,"_cacheMode",wl,m(t)),v(t,"_imageAtlas",Ol,m(t)),v(t,"_handleTouchEvent",El,m(t)),t._textArray=[],t._labelSegments=[],t._labelSegmentsCache=[],t._linesWidth=[],t._lineCount=1,t._labelWidth=0,t._labelHeight=0,t._layoutDirty=!0,t._lineOffsetX=0,t._updateRichTextStatus=void 0,t._updateRichTextStatus=t._updateRichText,t}return _(e,t),d(e,[{key:"string",get:function(){return this._string},set:function(t){this._string!==t&&(this._string=t,this._updateRichTextStatus())}},{key:"horizontalAlign",get:function(){return this._horizontalAlign},set:function(t){this.horizontalAlign!==t&&(this._horizontalAlign=t,this._layoutDirty=!0,this._updateRichTextStatus())}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this._layoutDirty=!0,this._updateRichTextStatus())}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this._layoutDirty=!0,this._updateRichTextStatus())}},{key:"font",get:function(){return this._font},set:function(t){this._font!==t&&(this._font=t,this._layoutDirty=!0,this._font?(this.useSystemFont=!1,this._onTTFLoaded()):this.useSystemFont=!0,this._updateRichTextStatus())}},{key:"useSystemFont",get:function(){return this._isSystemFontUsed},set:function(t){this._isSystemFontUsed!==t&&(this._isSystemFontUsed=t,this._layoutDirty=!0,this._updateRichTextStatus())}},{key:"cacheMode",get:function(){return this._cacheMode},set:function(t){this._cacheMode!==t&&(this._cacheMode=t,this._updateRichTextStatus())}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this._layoutDirty=!0,this._updateRichTextStatus())}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this._layoutDirty=!0,this._updateRichTextStatus())}},{key:"imageAtlas",get:function(){return this._imageAtlas},set:function(t){this._imageAtlas!==t&&(this._imageAtlas=t,this._layoutDirty=!0,this._updateRichTextStatus())}},{key:"handleTouchEvent",get:function(){return this._handleTouchEvent},set:function(t){this._handleTouchEvent!==t&&(this._handleTouchEvent=t,this.enabledInHierarchy&&(this.handleTouchEvent?this._addEventListeners():this._removeEventListeners()))}}]),d(e,[{key:"onEnable",value:function(){this.handleTouchEvent&&this._addEventListeners(),this._updateRichText(),this._activateChildren(!0)}},{key:"onDisable",value:function(){this.handleTouchEvent&&this._removeEventListeners(),this._activateChildren(!1)}},{key:"start",value:function(){this._onTTFLoaded(),this.node.on(lt.EventType.ANCHOR_CHANGED,this._updateRichTextPosition,this)}},{key:"onRestore",value:function(){}},{key:"onDestroy",value:function(){for(var t,e=Y(this._labelSegments);!(t=e()).done;){var i=t.value;i.node.removeFromParent(),Rl.put(i)}this.node.off(lt.EventType.ANCHOR_CHANGED,this._updateRichTextPosition,this)}},{key:"_addEventListeners",value:function(){this.node.on(lt.EventType.TOUCH_END,this._onTouchEnded,this)}},{key:"_removeEventListeners",value:function(){this.node.off(lt.EventType.TOUCH_END,this._onTouchEnded,this)}},{key:"_updateLabelSegmentTextAttributes",value:function(){var t=this;this._labelSegments.forEach((function(e){t._applyTextAttribute(e)}))}},{key:"_createFontLabel",value:function(t){return Rl.get(t,this)}},{key:"_onTTFLoaded",value:function(){if(this._font instanceof wt)if(this._font._nativeAsset)this._layoutDirty=!0,this._updateRichText();else{var t=this;Ot.load(this._font.nativeUrl,(function(e,i){t._layoutDirty=!0,t._updateRichText()}))}else this._layoutDirty=!0,this._updateRichText()}},{key:"_measureText",value:function(t,e){var i=this,n=function(e){var n;return 0===i._labelSegmentsCache.length?(n=i._createFontLabel(e),i._labelSegmentsCache.push(n)):(n=i._labelSegmentsCache[0]).node.getComponent(to).string=e,n.styleIndex=t,i._applyTextAttribute(n),n.node._uiProps.uiTransformComp.contentSize.width};return e?n(e):n}},{key:"_onTouchEnded",value:function(t){for(var e,i=this,n=this.node.getComponents(T),o=function(){var o=e.value,r=o.clickHandler,a=o.clickParam;r&&i._containsTouchLocation(o,t.touch.getUILocation())&&(n.forEach((function(e){var i=e[r];e.enabledInHierarchy&&i&&i.call(e,t,a)})),t.propagationStopped=!0)},r=Y(this._labelSegments);!(e=r()).done;)o()}},{key:"_containsTouchLocation",value:function(t,e){var i=t.node.getComponent(st);return!!i&&i.getBoundingBoxToWorld().contains(e)}},{key:"_resetState",value:function(){for(var t=this,e=this.node.children,i=function(i){var n=e[i];if(("RICHTEXT_CHILD"===n.name||"RICHTEXT_Image_CHILD"===n.name)&&(n.parent===t.node?n.parent=null:e.splice(i,1),"RICHTEXT_CHILD"===n.name)){var o=t._labelSegments.findIndex((function(t){return t.node===n}));-1!==o&&Rl.put(t._labelSegments[o])}},n=e.length-1;n>=0;n--)i(n);this._labelSegments.length=0,this._labelSegmentsCache.length=0,this._linesWidth.length=0,this._lineOffsetX=0,this._lineCount=1,this._labelWidth=0,this._labelHeight=0,this._layoutDirty=!0}},{key:"_activateChildren",value:function(t){for(var e=this.node.children.length-1;e>=0;e--){var i=this.node.children[e];"RICHTEXT_CHILD"!==i.name&&"RICHTEXT_Image_CHILD"!==i.name||(i.active=t)}}},{key:"_addLabelSegment",value:function(t,e){var i;if(0===this._labelSegmentsCache.length)i=this._createFontLabel(t);else{var n=(i=this._labelSegmentsCache.pop()).node.getComponent(to);n&&(n.string=t)}return i.styleIndex=e,i.lineCount=this._lineCount,i.node._uiProps.uiTransformComp.setAnchorPoint(0,0),this._applyTextAttribute(i),this.node.addChild(i.node),this._labelSegments.push(i),i}},{key:"_updateRichTextWithMaxWidth",value:function(t,e,i){var n=e;if(this._lineOffsetX>0&&n+this._lineOffsetX>this._maxWidth)for(var o=0;this._lineOffsetX<=this._maxWidth;){var r=this._getFirstWordLen(t,o,t.length),a=t.substr(o,r),s=this._measureText(i,a);if(!(this._lineOffsetX+s<=this._maxWidth)){if(o>0){var l=t.substr(0,o);this._addLabelSegment(l,i),t=t.substr(o,t.length),n=this._measureText(i,t)}this._updateLineInfo();break}this._lineOffsetX+=s,o+=r}if(n>this._maxWidth)for(var h=Et(t,n,this._maxWidth,this._measureText(i)),u=0;u<h.length;++u){var c=h[u],p=this._addLabelSegment(c,i).node._uiProps.uiTransformComp.contentSize;this._lineOffsetX+=p.width,h.length>1&&u<h.length-1&&this._updateLineInfo()}else this._lineOffsetX+=n,this._addLabelSegment(t,i)}},{key:"_isLastComponentCR",value:function(t){return t.length-1===t.lastIndexOf("\n")}},{key:"_updateLineInfo",value:function(){this._linesWidth.push(this._lineOffsetX),this._lineOffsetX=0,this._lineCount++}},{key:"_needsUpdateTextLayout",value:function(t){if(this._layoutDirty||!this._textArray||!t)return!0;if(this._textArray.length!==t.length)return!0;for(var e=0;e<this._textArray.length;e++){var i=this._textArray[e],n=t[e];if(i.text!==n.text)return!0;var o=i.style,r=n.style;if(o){if(r){if(!!r.outline!=!!o.outline)return!0;if(o.size!==r.size||o.italic!==r.italic||o.isImage!==r.isImage)return!0;if(o.src!==r.src||o.imageAlign!==r.imageAlign||o.imageHeight!==r.imageHeight||o.imageWidth!==r.imageWidth||o.imageOffset!==r.imageOffset)return!0}else if(o.size||o.italic||o.isImage||o.outline)return!0}else if(r&&(r.size||r.italic||r.isImage||r.outline))return!0}return!1}},{key:"_addRichTextImageElement",value:function(t){if(t.style){var e=t.style,i=e.src,n=this._imageAtlas&&i&&this._imageAtlas.getSpriteFrame(i);if(n){var o=new St("RICHTEXT_Image_CHILD"),r=o.addComponent(Zt);switch(e.imageAlign){case"top":o._uiProps.uiTransformComp.setAnchorPoint(0,1);break;case"center":o._uiProps.uiTransformComp.setAnchorPoint(0,.5);break;default:o._uiProps.uiTransformComp.setAnchorPoint(0,0)}r.type=Zt.Type.SLICED,r.sizeMode=Zt.SizeMode.CUSTOM,r.spriteFrame=n,this.node.addChild(o);var a={node:o,comp:r,lineCount:0,styleIndex:0,imageOffset:e.imageOffset||"",clickParam:"",clickHandler:""};this._labelSegments.push(a);var s=n.rect.clone(),l=1,h=s.width,u=s.height,c=e.imageWidth||0,p=e.imageHeight||0;p>0?(h*=l=p/u,u*=l):(h*=l=this._lineHeight/u,u*=l),c>0&&(h=c),this._maxWidth>0?(this._lineOffsetX+h>this._maxWidth&&this._updateLineInfo(),this._lineOffsetX+=h):(this._lineOffsetX+=h,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX)),o._uiProps.uiTransformComp.setContentSize(h,u),a.lineCount=this._lineCount,a.clickHandler="",a.clickParam="";var _=e.event;_&&(a.clickHandler=_.click,a.clickParam=_.param)}else R(4400)}}},{key:"_updateRichText",value:function(){if(this.enabledInHierarchy){var t=Pl.parse(this._string);if(!this._needsUpdateTextLayout(t))return this._textArray=t.slice(),void this._updateLabelSegmentTextAttributes();this._textArray=t.slice(),this._resetState();for(var e,i=!1,n=0;n<this._textArray.length;++n){var o=this._textArray[n],r=o.text;if(void 0!==r){if(""===r){if(o.style&&o.style.isNewLine){this._updateLineInfo();continue}if(o.style&&o.style.isImage&&this._imageAtlas){this._addRichTextImageElement(o);continue}}for(var a=r.split("\n"),s=0;s<a.length;++s){var l=a[s];if(""!==l)if(i=!1,this._maxWidth>0){var h=this._measureText(n,l);this._updateRichTextWithMaxWidth(l,h,n),a.length>1&&s<a.length-1&&this._updateLineInfo()}else e=this._addLabelSegment(l,n),this._lineOffsetX+=e.node._uiProps.uiTransformComp.width,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX),a.length>1&&s<a.length-1&&this._updateLineInfo();else{if(this._isLastComponentCR(r)&&s===a.length-1)continue;this._updateLineInfo(),i=!0}}}}i||this._linesWidth.push(this._lineOffsetX),this._maxWidth>0&&(this._labelWidth=this._maxWidth),this._labelHeight=(this._lineCount+Dt)*this._lineHeight,this.node._uiProps.uiTransformComp.setContentSize(this._labelWidth,this._labelHeight),this._updateRichTextPosition(),this._layoutDirty=!1}}},{key:"_getFirstWordLen",value:function(t,e,i){var n=t.charAt(e);if(At(n)||kt(n))return 1;for(var o=1,r=e+1;r<i&&(n=t.charAt(r),!kt(n)&&!At(n));++r)o++;return o}},{key:"_updateRichTextPosition",value:function(){for(var t=0,e=1,i=this._lineCount,n=this.node._uiProps.uiTransformComp,o=n.anchorX,r=n.anchorY,a=0;a<this._labelSegments.length;++a){var s=this._labelSegments[a],l=s.lineCount;l>e&&(t=0,e=l);var h=this._labelWidth*(.5*this._horizontalAlign-o);switch(this._horizontalAlign){case jn.LEFT:break;case jn.CENTER:h-=this._linesWidth[l-1]/2;break;case jn.RIGHT:h-=this._linesWidth[l-1]}var u=s.node.position;if(s.node.setPosition(t+h,this._lineHeight*(i-l)-this._labelHeight*r,u.z),l===e&&(t+=s.node._uiProps.uiTransformComp.width),s.node.getComponent(Zt)){var c=s.node.position.clone(),p=this._lineHeight,_=this._lineHeight*(1+Dt);switch(s.node._uiProps.uiTransformComp.anchorY){case 1:c.y+=p+(_-p)/2;break;case.5:c.y+=_/2;break;default:c.y+=(_-p)/2}if(s.imageOffset){var d=s.imageOffset.split(",");if(1===d.length&&d[0]){var f=parseFloat(d[0]);Number.isInteger(f)&&(c.y+=f)}else if(2===d.length){var g=parseFloat(d[0]),y=parseFloat(d[1]);Number.isInteger(g)&&(c.x+=g),Number.isInteger(y)&&(c.y+=y)}}s.node.position=c}var v=s.node.getComponent(Ll);if(v){var m=s.node.position.clone();m.y=m.y-v.width,s.node.position=m}}}},{key:"_convertLiteralColorValue",value:function(t){var e=t.toUpperCase();return p[e]?p[e]:(new p).fromHEX(t)}},{key:"_applyTextAttribute",value:function(t){var e=t.node.getComponent(to);if(e){var i,n=t.styleIndex;if(this._textArray[n]&&(i=this._textArray[n].style),i){if(e.color=this._convertLiteralColorValue(i.color||"white"),e.isBold=!!i.bold,e.isItalic=!!i.italic,e.isUnderline=!!i.underline,i.outline){var o=t.node.getComponent(Ll);o||(o=t.node.addComponent(Ll)),o.color=this._convertLiteralColorValue(i.outline.color),o.width=i.outline.width}e.fontSize=i.size||this._fontSize,t.clickHandler="",t.clickParam="";var r=i.event;r&&(t.clickHandler=r.click||"",t.clickParam=r.param||"")}else e.fontSize=this._fontSize;e.cacheMode=this._cacheMode,this._font instanceof pt&&!this._isSystemFontUsed?e.font=this._font:e.fontFamily=this._fontFamily,e.useSystemFont=this._isSystemFontUsed,e.lineHeight=this._lineHeight,e.updateRenderData(!0)}}}]),e}(ze),Dl.HorizontalAlign=jn,Dl.VerticalAlign=Xn,a((fl=Al).prototype,"string",[k,Js],Object.getOwnPropertyDescriptor(fl.prototype,"string"),fl.prototype),a(fl.prototype,"horizontalAlign",[tl,el],Object.getOwnPropertyDescriptor(fl.prototype,"horizontalAlign"),fl.prototype),a(fl.prototype,"fontSize",[il],Object.getOwnPropertyDescriptor(fl.prototype,"fontSize"),fl.prototype),a(fl.prototype,"fontFamily",[nl],Object.getOwnPropertyDescriptor(fl.prototype,"fontFamily"),fl.prototype),a(fl.prototype,"font",[ol,rl],Object.getOwnPropertyDescriptor(fl.prototype,"font"),fl.prototype),a(fl.prototype,"useSystemFont",[al],Object.getOwnPropertyDescriptor(fl.prototype,"useSystemFont"),fl.prototype),a(fl.prototype,"cacheMode",[sl,ll],Object.getOwnPropertyDescriptor(fl.prototype,"cacheMode"),fl.prototype),a(fl.prototype,"maxWidth",[hl],Object.getOwnPropertyDescriptor(fl.prototype,"maxWidth"),fl.prototype),a(fl.prototype,"lineHeight",[ul],Object.getOwnPropertyDescriptor(fl.prototype,"lineHeight"),fl.prototype),a(fl.prototype,"imageAtlas",[cl,pl],Object.getOwnPropertyDescriptor(fl.prototype,"imageAtlas"),fl.prototype),a(fl.prototype,"handleTouchEvent",[_l],Object.getOwnPropertyDescriptor(fl.prototype,"handleTouchEvent"),fl.prototype),gl=a(fl.prototype,"_lineHeight",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),yl=a(fl.prototype,"_string",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"<color=#00ff00>Rich</color><color=#0fffff>Text</color>"}}),vl=a(fl.prototype,"_horizontalAlign",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return jn.LEFT}}),ml=a(fl.prototype,"_fontSize",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),bl=a(fl.prototype,"_maxWidth",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Tl=a(fl.prototype,"_fontFamily",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Arial"}}),Cl=a(fl.prototype,"_font",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sl=a(fl.prototype,"_isSystemFontUsed",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),xl=a(fl.prototype,"_userDefinedFont",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wl=a(fl.prototype,"_cacheMode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Zn.NONE}}),Ol=a(fl.prototype,"_imageAtlas",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),El=a(fl.prototype,"_handleTouchEvent",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),dl=fl))||dl)||dl)||dl)||dl)||dl)),ah=new e,sh=new e,lh=new e,hh=new F,uh=new p;!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(oh||(oh={})),w(oh);var ch,ph,_h,dh,fh,gh,yh,vh,mh,bh,Th,Ch,Sh,xh,wh,Oh,Eh,Dh,Ah,kh,Lh,Ph,Rh,zh,Ih,Bh,Hh,Mh,Nh,Fh,Vh,Uh,Wh,Gh,jh,Xh,Yh,Zh,qh,$h,Kh,Qh,Jh,tu,eu,iu,nu,ou,ru,au=function(e){return t({ScrollBar:e,ScrollBarComponent:e}),e}((zl=n("cc.ScrollBar"),Il=l(),Bl=rt(110),Hl=h(),Ml=at(st),Nl=o(Zt),Fl=O(),Vl=u(),Ul=o(oh),Wl=O(),Gl=u(),jl=O(),Xl=u(),Yl=O(),Zl=u(),zl(ql=Il(ql=Bl(ql=Hl(ql=Ml((nh=ih=function(t){function i(){var t,e;f(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=g(this,(t=y(i)).call.apply(t,[this].concat(o))),v(e,"_scrollView",Kl,m(e)),v(e,"_handle",Ql,m(e)),v(e,"_direction",Jl,m(e)),v(e,"_enableAutoHide",th,m(e)),v(e,"_autoHideTime",eh,m(e)),e._touching=!1,e._opacity=255,e._autoHideRemainingTime=0,e}return _(i,t),d(i,[{key:"hide",value:function(){this._autoHideRemainingTime=0,this._setOpacity(0)}},{key:"show",value:function(){this._autoHideRemainingTime=this._autoHideTime,this._setOpacity(this._opacity)}},{key:"onScroll",value:function(t){if(this._scrollView){var e=this._scrollView.content;if(e){var i=e._uiProps.uiTransformComp.contentSize,n=this._scrollView.node._uiProps.uiTransformComp.contentSize,o=this.node._uiProps.uiTransformComp.contentSize;if(!this._conditionalDisableScrollBar(i,n)){this._enableAutoHide&&(this._autoHideRemainingTime=this._autoHideTime,this._setOpacity(this._opacity));var r=0,a=0,s=0,l=0,h=0;this._direction===oh.HORIZONTAL?(r=i.width,a=n.width,h=o.width,s=t.x,l=-this._convertToScrollViewSpace(e).x):this._direction===oh.VERTICAL&&(r=i.height,a=n.height,h=o.height,s=t.y,l=-this._convertToScrollViewSpace(e).y);var u=this._calculateLength(r,a,h,s),c=this._calculatePosition(r,a,h,l,s,u);this._updateLength(u),this._updateHandlerPosition(c)}}}}},{key:"setScrollView",value:function(t){this._scrollView=t}},{key:"onTouchBegan",value:function(){this._enableAutoHide&&(this._touching=!0)}},{key:"onTouchEnded",value:function(){if(this._enableAutoHide&&(this._touching=!1,!(this._autoHideTime<=0))){if(this._scrollView){var t=this._scrollView.content;if(t){var e=t._uiProps.uiTransformComp.contentSize,i=this._scrollView.node._uiProps.uiTransformComp.contentSize;if(this._conditionalDisableScrollBar(e,i))return}}this._autoHideRemainingTime=this._autoHideTime}}},{key:"onEnable",value:function(){var t=this.node.getComponent(Zt);t&&(this._opacity=t.color.a)}},{key:"start",value:function(){this._enableAutoHide&&this._setOpacity(0)}},{key:"update",value:function(t){this._processAutoHide(t)}},{key:"_convertToScrollViewSpace",value:function(t){var e=this._scrollView&&this._scrollView.node._uiProps.uiTransformComp,i=t._uiProps.uiTransformComp;if(!e||!i)return ah;sh.set(-i.anchorX*i.width,-i.anchorY*i.height,0),i.convertToWorldSpaceAR(sh,lh);var n=e.convertToNodeSpaceAR(lh);return n.x+=e.anchorX*e.width,n.y+=e.anchorY*e.height,n}},{key:"_setOpacity",value:function(t){if(this._handle){var e=this.node.getComponent(Zt);e&&(uh.set(e.color),uh.a=t,e.color=uh),(e=this._handle.getComponent(Zt))&&(uh.set(e.color),uh.a=t,e.color=uh)}}},{key:"_updateHandlerPosition",value:function(t){if(this._handle){var e=this._fixupHandlerPosition();this._handle.node.setPosition(t.x+e.x,t.y+e.y,e.z)}}},{key:"_fixupHandlerPosition",value:function(){var t=this.node._uiProps.uiTransformComp,i=t.contentSize,n=t.anchorPoint,o=this.handle.node._uiProps.uiTransformComp.contentSize,r=this.handle.node.parent;e.set(sh,-i.width*n.x,-i.height*n.y,0);var a=this.node._uiProps.uiTransformComp.convertToWorldSpaceAR(sh,lh),s=new e;return r._uiProps.uiTransformComp.convertToNodeSpaceAR(a,s),this.direction===oh.HORIZONTAL?s=new e(s.x,s.y+(i.height-o.height)/2,0):this.direction===oh.VERTICAL&&(s=new e(s.x+(i.width-o.width)/2,s.y,0)),this.handle.node.setPosition(s),s}},{key:"_conditionalDisableScrollBar",value:function(t,e){return t.width<=e.width&&this._direction===oh.HORIZONTAL||t.height<=e.height&&this._direction===oh.VERTICAL}},{key:"_calculateLength",value:function(t,e,i,n){var o=t;return n&&(o+=20*(n>0?n:-n)),i*(e/o)}},{key:"_calculatePosition",value:function(t,i,n,o,r,a){var s=t-i;r&&(s+=Math.abs(r));var l=0;s&&(l=G(l=o/s));var h=(n-a)*l;return this._direction===oh.VERTICAL?new e(0,h,0):new e(h,0,0)}},{key:"_updateLength",value:function(t){if(this._handle){var e=this._handle.node._uiProps.uiTransformComp,i=e.contentSize,n=e.anchorPoint;n.x===hh.x&&n.y===hh.y||e.setAnchorPoint(hh),this._direction===oh.HORIZONTAL?e.setContentSize(t,i.height):e.setContentSize(i.width,t)}}},{key:"_processAutoHide",value:function(t){if(this._enableAutoHide&&!(this._autoHideRemainingTime<=0)&&!this._touching&&(this._autoHideRemainingTime-=t,this._autoHideRemainingTime<=this._autoHideTime)){this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime);var e=this._opacity*(this._autoHideRemainingTime/this._autoHideTime);this._setOpacity(e)}}},{key:"handle",get:function(){return this._handle},set:function(t){this._handle!==t&&(this._handle=t,this.onScroll(ah))}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this.onScroll(new e))}},{key:"enableAutoHide",get:function(){return this._enableAutoHide},set:function(t){this._enableAutoHide!==t&&(this._enableAutoHide=t,this._enableAutoHide&&this._setOpacity(0))}},{key:"autoHideTime",get:function(){return this._autoHideTime},set:function(t){this._autoHideTime!==t&&(this._autoHideTime=t)}}]),i}(T),ih.Direction=oh,a(($l=nh).prototype,"handle",[Nl,Fl,Vl],Object.getOwnPropertyDescriptor($l.prototype,"handle"),$l.prototype),a($l.prototype,"direction",[Ul,Wl,Gl],Object.getOwnPropertyDescriptor($l.prototype,"direction"),$l.prototype),a($l.prototype,"enableAutoHide",[jl,Xl],Object.getOwnPropertyDescriptor($l.prototype,"enableAutoHide"),$l.prototype),a($l.prototype,"autoHideTime",[Yl,Zl],Object.getOwnPropertyDescriptor($l.prototype,"autoHideTime"),$l.prototype),Kl=a($l.prototype,"_scrollView",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ql=a($l.prototype,"_handle",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jl=a($l.prototype,"_direction",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oh.HORIZONTAL}}),th=a($l.prototype,"_enableAutoHide",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),eh=a($l.prototype,"_autoHideTime",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ql=$l))||ql)||ql)||ql)||ql)||ql)),su=t("ViewGroup",n("cc.ViewGroup")(ch=rt(110)(ch=function(t){function e(){return f(this,e),g(this,y(e).apply(this,arguments))}return _(e,t),e}(T))||ch)||ch);s.ViewGroup=su;var lu,hu=new e,uu=new e,cu=new e,pu=new F,_u=new F,du=function(){return(new Date).getMilliseconds()},fu={"scroll-to-top":0,"scroll-to-bottom":1,"scroll-to-left":2,"scroll-to-right":3,scrolling:4,"bounce-bottom":6,"bounce-left":7,"bounce-right":8,"bounce-top":5,"scroll-ended":9,"touch-up":10,"scroll-ended-with-threshold":11,"scroll-began":12};!function(t){t.SCROLL_TO_TOP="scroll-to-top",t.SCROLL_TO_BOTTOM="scroll-to-bottom",t.SCROLL_TO_LEFT="scroll-to-left",t.SCROLL_TO_RIGHT="scroll-to-right",t.SCROLL_BEGAN="scroll-began",t.SCROLL_ENDED="scroll-ended",t.BOUNCE_TOP="bounce-top",t.BOUNCE_BOTTOM="bounce-bottom",t.BOUNCE_LEFT="bounce-left",t.BOUNCE_RIGHT="bounce-right",t.SCROLLING="scrolling",t.SCROLL_ENG_WITH_THRESHOLD="scroll-ended-with-threshold",t.TOUCH_UP="touch-up"}(lu||(lu={}));var gu,yu,vu,mu,bu,Tu,Cu,Su,xu,wu,Ou,Eu,Du,Au,ku,Lu,Pu,Ru,zu,Iu,Bu,Hu,Mu=function(e){return t({ScrollView:e,ScrollViewComponent:e}),e}((ph=n("cc.ScrollView"),_h=l(),dh=rt(110),fh=h(),gh=at(st),yh=W(),vh=O(),mh=u(),bh=W(),Th=O(),Ch=u(),Sh=O(),xh=u(),wh=O(),Oh=u(),Eh=o(lt),Dh=O(),Ah=u(),kh=O(),Lh=u(),Ph=o(au),Rh=O(),zh=u(),Ih=O(),Bh=u(),Hh=o(au),Mh=O(),Nh=u(),Fh=O(),Vh=u(),Uh=o([Jt]),Wh=O(),Gh=u(),ph(jh=_h(jh=dh(jh=fh(jh=gh((ru=ou=function(t){function i(){var t,n;f(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=g(this,(t=y(i)).call.apply(t,[this].concat(r))),v(n,"bounceDuration",Yh,m(n)),v(n,"brake",Zh,m(n)),v(n,"elastic",qh,m(n)),v(n,"inertia",$h,m(n)),v(n,"horizontal",Kh,m(n)),v(n,"vertical",Qh,m(n)),v(n,"cancelInnerEvents",Jh,m(n)),v(n,"scrollEvents",tu,m(n)),n._autoScrolling=!1,n._scrolling=!1,v(n,"_content",eu,m(n)),v(n,"_horizontalScrollBar",iu,m(n)),v(n,"_verticalScrollBar",nu,m(n)),n._topBoundary=0,n._bottomBoundary=0,n._leftBoundary=0,n._rightBoundary=0,n._touchMoveDisplacements=[],n._touchMoveTimeDeltas=[],n._touchMovePreviousTimestamp=0,n._touchMoved=!1,n._autoScrollAttenuate=!1,n._autoScrollStartPosition=new e,n._autoScrollTargetDelta=new e,n._autoScrollTotalTime=0,n._autoScrollAccumulatedTime=0,n._autoScrollCurrentlyOutOfBoundary=!1,n._autoScrollBraking=!1,n._autoScrollBrakingStartPosition=new e,n._outOfBoundaryAmount=new e,n._outOfBoundaryAmountDirty=!0,n._stopMouseWheel=!1,n._mouseWheelEventElapsedTime=0,n._isScrollEndedWithThresholdEventFired=!1,n._scrollEventEmitMask=0,n._isBouncing=!1,n._contentPos=new e,n._deltaPos=new e,n}return _(i,t),d(i,[{key:"scrollToBottom",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new F(0,0),applyToHorizontal:!1,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i,!0)}},{key:"scrollToTop",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new F(0,1),applyToHorizontal:!1,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)}},{key:"scrollToLeft",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new F(0,0),applyToHorizontal:!0,applyToVertical:!1});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)}},{key:"scrollToRight",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new F(1,0),applyToHorizontal:!0,applyToVertical:!1});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)}},{key:"scrollToTopLeft",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new F(0,1),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)}},{key:"scrollToTopRight",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new F(1,1),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)}},{key:"scrollToBottomLeft",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new F(0,0),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)}},{key:"scrollToBottomRight",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new F(1,0),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)}},{key:"scrollToOffset",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.getMaxScrollOffset(),o=new F(0,0);0===n.x?o.x=0:o.x=t.x/n.x,0===n.y?o.y=1:o.y=(n.y-t.y)/n.y,this.scrollTo(o,e,i)}},{key:"getScrollOffset",value:function(){var t=this._getContentTopBoundary()-this._topBoundary,i=this._getContentLeftBoundary()-this._leftBoundary;return new e(i,t,0)}},{key:"getMaxScrollOffset",value:function(){if(!this._content||!this.view)return hu;var t=this._content._uiProps.uiTransformComp.contentSize,i=t.width-this.view.width,n=t.height-this.view.height;return new e(i=i>=0?i:0,n=n>=0?n:0,0)}},{key:"scrollToPercentHorizontal",value:function(t,e,i){var n=this._calculateMovePercentDelta({anchor:new F(t,0),applyToHorizontal:!0,applyToVertical:!1});e?this._startAutoScroll(n,e,!1!==i):this._moveContent(n)}},{key:"scrollTo",value:function(t,e,i){var n=this._calculateMovePercentDelta({anchor:new F(t),applyToHorizontal:!0,applyToVertical:!0});e?this._startAutoScroll(n,e,i):this._moveContent(n)}},{key:"scrollToPercentVertical",value:function(t,e,i){var n=this._calculateMovePercentDelta({anchor:new F(0,t),applyToHorizontal:!1,applyToVertical:!0});e?this._startAutoScroll(n,e,i):this._moveContent(n)}},{key:"stopAutoScroll",value:function(){this._autoScrolling=!1,this._autoScrollAccumulatedTime=this._autoScrollTotalTime}},{key:"setContentPosition",value:function(t){if(this._content){var e=this.getContentPosition();Math.abs(t.x-e.x)<1e-4&&Math.abs(t.y-e.y)<1e-4||(this._content.setPosition(t),this._outOfBoundaryAmountDirty=!0)}}},{key:"getContentPosition",value:function(){return this._content?(this._contentPos.set(this._content.position),this._contentPos):hu}},{key:"isScrolling",value:function(){return this._scrolling}},{key:"isAutoScrolling",value:function(){return this._autoScrolling}},{key:"getScrollEndedEventTiming",value:function(){return 1e-4}},{key:"start",value:function(){this._calculateBoundary(),this._content&&Qt.once(te.EVENT_BEFORE_DRAW,this._adjustContentOutOfBoundary,this)}},{key:"onEnable",value:function(){this._registerEvent(),this._content&&(this._content.on(lt.EventType.SIZE_CHANGED,this._calculateBoundary,this),this._content.on(lt.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view&&(this.view.node.on(lt.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view.node.on(lt.EventType.SIZE_CHANGED,this._calculateBoundary,this))),this._calculateBoundary(),this._updateScrollBarState()}},{key:"update",value:function(t){this._autoScrolling&&this._processAutoScrolling(t)}},{key:"onDisable",value:function(){this._unregisterEvent(),this._content&&(this._content.off(lt.EventType.SIZE_CHANGED,this._calculateBoundary,this),this._content.off(lt.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view&&(this.view.node.off(lt.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view.node.off(lt.EventType.SIZE_CHANGED,this._calculateBoundary,this))),this._hideScrollBar(),this.stopAutoScroll()}},{key:"_registerEvent",value:function(){this.node.on(lt.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(lt.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(lt.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(lt.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on(lt.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)}},{key:"_unregisterEvent",value:function(){this.node.off(lt.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.off(lt.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.off(lt.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.off(lt.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off(lt.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)}},{key:"_onMouseWheel",value:function(t,i){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,i)){var n=new e,o=t.getScrollY();this.vertical?n.set(0,-.1*o,0):this.horizontal&&n.set(-.1*o,0,0),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(n),this._stopMouseWheel||(this._handlePressLogic(),this.schedule(this._checkMouseWheel,1/60,NaN,0),this._stopMouseWheel=!0),this._stopPropagationIfTargetIsMe(t)}}},{key:"_onTouchBegan",value:function(t,e){this.enabledInHierarchy&&this._content&&(this._hasNestedViewGroup(t,e)||(this._handlePressLogic(),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(t)))}},{key:"_onTouchMoved",value:function(t,e){if(this.enabledInHierarchy&&this._content&&!this._hasNestedViewGroup(t,e)){var i=t.touch;if(this._handleMoveLogic(i),this.cancelInnerEvents){var n=i.getUILocation(pu);if(n.subtract(i.getUIStartLocation(_u)),n.length()>7&&!this._touchMoved&&t.target!==this.node){var o=new Lt(t.getTouches(),t.bubbles);o.type=lt.EventType.TOUCH_CANCEL,o.touch=t.touch,o.simulate=!0,t.target.dispatchEvent(o),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}}}},{key:"_onTouchEnded",value:function(t,e){if(this.enabledInHierarchy&&this._content&&t&&!this._hasNestedViewGroup(t,e)){this._dispatchEvent(lu.TOUCH_UP);var i=t.touch;this._handleReleaseLogic(i),this._touchMoved?t.propagationStopped=!0:this._stopPropagationIfTargetIsMe(t)}}},{key:"_onTouchCancelled",value:function(t,e){if(this.enabledInHierarchy&&this._content&&!this._hasNestedViewGroup(t,e)){if(t&&!t.simulate){var i=t.touch;this._handleReleaseLogic(i)}this._stopPropagationIfTargetIsMe(t)}}},{key:"_calculateBoundary",value:function(){if(this._content&&this.view){var t=this._content.getComponent(Ua);t&&t.enabledInHierarchy&&t.updateLayout();var e=this.view,i=e.width*e.anchorX,n=e.height*e.anchorY;this._leftBoundary=-i,this._bottomBoundary=-n,this._rightBoundary=this._leftBoundary+e.width,this._topBoundary=this._bottomBoundary+e.height,this._moveContentToTopLeft(e.contentSize)}}},{key:"_hasNestedViewGroup",value:function(t,e){if(t&&t.eventPhase===Z.CAPTURING_PHASE){if(e)for(var i,n=Y(e);!(i=n()).done;){var o=i.value;if(this.node===o)return!(!t.target||!t.target.getComponent(su));if(o.getComponent(su))return!0}return!1}}},{key:"_startInertiaScroll",value:function(t){var i=new e(t);i.multiplyScalar(.7),this._startAttenuatingAutoScroll(i,t)}},{key:"_calculateAttenuatedFactor",value:function(t){return this.brake<=0?1-this.brake:(1-this.brake)*(1/(1+14e-6*t+t*t*8e-9))}},{key:"_startAttenuatingAutoScroll",value:function(t,i){var n=new e(t);if(n.normalize(),this._content&&this.view){var o=this._content._uiProps.uiTransformComp.contentSize,r=this.view.contentSize,a=o.width-r.width,s=o.height-r.height,l=this._calculateAttenuatedFactor(a),h=this._calculateAttenuatedFactor(s);n.x=n.x*a*(1-this.brake)*l,n.y=n.y*s*h*(1-this.brake),n.z=0}var u=t.length(),c=n.length()/u;if(n.add(t),this.brake>0&&c>7){c=Math.sqrt(c);var p=new e(t);p.multiplyScalar(c),n.set(p),n.add(t)}var _=this._calculateAutoScrollTimeByInitialSpeed(i.length());this.brake>0&&c>3&&(_*=c=3),0===this.brake&&c>1&&(_*=c),this._startAutoScroll(n,_,!0)}},{key:"_calculateAutoScrollTimeByInitialSpeed",value:function(t){return Math.sqrt(Math.sqrt(t/5))}},{key:"_startAutoScroll",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this._flattenVectorByDirection(t);this._autoScrolling=!0,this._autoScrollTargetDelta=o,this._autoScrollAttenuate=n,e.copy(this._autoScrollStartPosition,this.getContentPosition()),this._autoScrollTotalTime=i,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._isScrollEndedWithThresholdEventFired=!1,this._autoScrollBrakingStartPosition=new e;var r=this._getHowMuchOutOfBoundary();r.equals(hu,1e-4)||(this._autoScrollCurrentlyOutOfBoundary=!0)}},{key:"_calculateTouchMoveVelocity",value:function(){var t=0;if((t=this._touchMoveTimeDeltas.reduce((function(t,e){return t+e}),t))<=0||t>=.5)return new e;var i=new e;return i=this._touchMoveDisplacements.reduce((function(t,e){return t.add(e),t}),i),new e(i.x*(1-this.brake)/t,i.y*(1-this.brake)/t,0)}},{key:"_flattenVectorByDirection",value:function(t){var e=t;return e.x=this.horizontal?e.x:0,e.y=this.vertical?e.y:0,e}},{key:"_moveContent",value:function(t,e){var i=this._flattenVectorByDirection(t);uu.set(this.getContentPosition()),uu.add(i),uu.set(1e-4*Math.floor(1e4*uu.x),1e-4*Math.floor(1e4*uu.y),uu.z),this.setContentPosition(uu);var n=this._getHowMuchOutOfBoundary();this._updateScrollBar(n),this.elastic&&e&&this._startBounceBackIfNeeded()}},{key:"_getContentLeftBoundary",value:function(){if(!this._content)return-1;var t=this.getContentPosition(),e=this._content._uiProps.uiTransformComp;return t.x-e.anchorX*e.width}},{key:"_getContentRightBoundary",value:function(){if(!this._content)return-1;var t=this._content._uiProps.uiTransformComp;return this._getContentLeftBoundary()+t.width}},{key:"_getContentTopBoundary",value:function(){if(!this._content)return-1;var t=this._content._uiProps.uiTransformComp;return this._getContentBottomBoundary()+t.height}},{key:"_getContentBottomBoundary",value:function(){if(!this._content)return-1;var t=this.getContentPosition(),e=this._content._uiProps.uiTransformComp;return t.y-e.anchorY*e.height}},{key:"_getHowMuchOutOfBoundary",value:function(t){if((t=t||new e).equals(hu,1e-4)&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var i=new e;return this._getContentLeftBoundary()+t.x>this._leftBoundary?i.x=this._leftBoundary-(this._getContentLeftBoundary()+t.x):this._getContentRightBoundary()+t.x<this._rightBoundary&&(i.x=this._rightBoundary-(this._getContentRightBoundary()+t.x)),this._getContentTopBoundary()+t.y<this._topBoundary?i.y=this._topBoundary-(this._getContentTopBoundary()+t.y):this._getContentBottomBoundary()+t.y>this._bottomBoundary&&(i.y=this._bottomBoundary-(this._getContentBottomBoundary()+t.y)),t.equals(hu,1e-4)&&(this._outOfBoundaryAmount=i,this._outOfBoundaryAmountDirty=!1),i=this._clampDelta(i)}},{key:"_updateScrollBar",value:function(t){this._horizontalScrollBar&&this._horizontalScrollBar.onScroll(t),this.verticalScrollBar&&this.verticalScrollBar.onScroll(t)}},{key:"_onScrollBarTouchBegan",value:function(){this._horizontalScrollBar&&this._horizontalScrollBar.onTouchBegan(),this.verticalScrollBar&&this.verticalScrollBar.onTouchBegan()}},{key:"_onScrollBarTouchEnded",value:function(){this._horizontalScrollBar&&this._horizontalScrollBar.onTouchEnded(),this.verticalScrollBar&&this.verticalScrollBar.onTouchEnded()}},{key:"_dispatchEvent",value:function(t){if(t===lu.SCROLL_ENDED)this._scrollEventEmitMask=0;else if(t===lu.SCROLL_TO_TOP||t===lu.SCROLL_TO_BOTTOM||t===lu.SCROLL_TO_LEFT||t===lu.SCROLL_TO_RIGHT){var e=1<<fu[t];if(this._scrollEventEmitMask&e)return;this._scrollEventEmitMask|=e}Jt.emitEvents(this.scrollEvents,this,fu[t]),this.node.emit(t,this)}},{key:"_adjustContentOutOfBoundary",value:function(){if(this._content&&(this._outOfBoundaryAmountDirty=!0,this._isOutOfBoundary())){var t=this._getHowMuchOutOfBoundary();uu.set(this.getContentPosition()),uu.add(t),this._content.setPosition(uu),this._updateScrollBar(hu)}}},{key:"_hideScrollBar",value:function(){this._horizontalScrollBar&&this._horizontalScrollBar.hide(),this._verticalScrollBar&&this._verticalScrollBar.hide()}},{key:"_updateScrollBarState",value:function(){if(this._content&&this.view){var t=this.view,e=this._content._uiProps.uiTransformComp;this.verticalScrollBar&&(e.height<t.height?this.verticalScrollBar.hide():this.verticalScrollBar.show()),this.horizontalScrollBar&&(e.width<t.width?this.horizontalScrollBar.hide():this.horizontalScrollBar.show())}}},{key:"_stopPropagationIfTargetIsMe",value:function(t){t.eventPhase===Z.AT_TARGET&&t.target===this.node&&(t.propagationStopped=!0)}},{key:"_processDeltaMove",value:function(t){this._scrollChildren(t),this._gatherTouchMove(t)}},{key:"_handleMoveLogic",value:function(t){this._deltaPos.set(this._getLocalAxisAlignDelta(t)),this._processDeltaMove(this._deltaPos)}},{key:"_handleReleaseLogic",value:function(t){this._deltaPos.set(this._getLocalAxisAlignDelta(t)),this._gatherTouchMove(this._deltaPos),this._processInertiaScroll(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(lu.SCROLL_ENDED))}},{key:"_getLocalAxisAlignDelta",value:function(t){var i=this.node._uiProps.uiTransformComp,n=new e;return i&&(t.getUILocation(pu),t.getUIPreviousLocation(_u),uu.set(pu.x,pu.y,0),cu.set(_u.x,_u.y,0),i.convertToNodeSpaceAR(uu,uu),i.convertToNodeSpaceAR(cu,cu),e.subtract(n,uu,cu)),n}},{key:"_scrollChildren",value:function(t){var e,i,n=t=this._clampDelta(t);if(this.elastic&&(e=this._getHowMuchOutOfBoundary(),n.x*=0===e.x?1:.5,n.y*=0===e.y?1:.5),this.elastic||(e=this._getHowMuchOutOfBoundary(n),n.add(e)),this._content){var o=this._content._uiProps.uiTransformComp,r=o.anchorX,a=o.anchorY,s=o.width,l=o.height,h=this._content.position||hu;if(n.y>0)h.y-a*l+n.y>=this._bottomBoundary&&(i=lu.SCROLL_TO_BOTTOM);else if(n.y<0){h.y-a*l+l+n.y<=this._topBoundary&&(i=lu.SCROLL_TO_TOP)}if(n.x<0)h.x-r*s+s+n.x<=this._rightBoundary&&(i=lu.SCROLL_TO_RIGHT);else if(n.x>0){h.x-r*s+n.x>=this._leftBoundary&&(i=lu.SCROLL_TO_LEFT)}}this._moveContent(n,!1),0===n.x&&0===n.y||(this._scrolling||(this._scrolling=!0,this._dispatchEvent(lu.SCROLL_BEGAN)),this._dispatchEvent(lu.SCROLLING)),i&&i.length>0&&this._dispatchEvent(i)}},{key:"_handlePressLogic",value:function(){this._autoScrolling&&this._dispatchEvent(lu.SCROLL_ENDED),this._autoScrolling=!1,this._isBouncing=!1,this._touchMovePreviousTimestamp=du(),this._touchMoveDisplacements.length=0,this._touchMoveTimeDeltas.length=0,this._onScrollBarTouchBegan()}},{key:"_clampDelta",value:function(t){if(this._content&&this.view){var e=this.view.contentSize,i=this._content._uiProps.uiTransformComp;i.width<e.width&&(t.x=0),i.height<e.height&&(t.y=0)}return t}},{key:"_gatherTouchMove",value:function(t){var e=t.clone();for(this._clampDelta(e);this._touchMoveDisplacements.length>=5;)this._touchMoveDisplacements.shift(),this._touchMoveTimeDeltas.shift();this._touchMoveDisplacements.push(e);var i=du();this._touchMoveTimeDeltas.push((i-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=i}},{key:"_startBounceBackIfNeeded",value:function(){if(!this.elastic)return!1;var t=this._getHowMuchOutOfBoundary();if((t=this._clampDelta(t)).equals(hu,1e-4))return!1;var e=Math.max(this.bounceDuration,0);return this._startAutoScroll(t,e,!0),this._isBouncing||(t.y>0&&this._dispatchEvent(lu.BOUNCE_TOP),t.y<0&&this._dispatchEvent(lu.BOUNCE_BOTTOM),t.x>0&&this._dispatchEvent(lu.BOUNCE_RIGHT),t.x<0&&this._dispatchEvent(lu.BOUNCE_LEFT),this._isBouncing=!0),!0}},{key:"_processInertiaScroll",value:function(){if(!this._startBounceBackIfNeeded()&&this.inertia){var t=this._calculateTouchMoveVelocity();!t.equals(uu,1e-4)&&this.brake<1&&this._startInertiaScroll(t)}this._onScrollBarTouchEnded()}},{key:"_isOutOfBoundary",value:function(){return!this._getHowMuchOutOfBoundary().equals(hu,1e-4)}},{key:"_isNecessaryAutoScrollBrake",value:function(){if(this._autoScrollBraking)return!0;if(this._isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollCurrentlyOutOfBoundary=!0,this._autoScrollBraking=!0,this._autoScrollBrakingStartPosition=this.getContentPosition(),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1}},{key:"_processAutoScrolling",value:function(t){var i=this._isNecessaryAutoScrollBrake(),n=i?.05:1;this._autoScrollAccumulatedTime+=t*(1/n);var o,r=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(o=r,r=(o-=1)*o*o*o*o+1);var a=new e(this._autoScrollTargetDelta);a.multiplyScalar(r);var s=new e(this._autoScrollStartPosition);s.add(a);var l=Math.abs(r-1)<=1e-4;if(Math.abs(r-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent(lu.SCROLL_ENG_WITH_THRESHOLD),this._isScrollEndedWithThresholdEventFired=!0),this.elastic){var h=new e(s);h.subtract(this._autoScrollBrakingStartPosition),i&&h.multiplyScalar(n),s.set(this._autoScrollBrakingStartPosition),s.add(h)}else{var u=new e(s);u.subtract(this.getContentPosition());var c=this._getHowMuchOutOfBoundary(u);c.equals(hu,1e-4)||(s.add(c),l=!0)}l&&(this._autoScrolling=!1);var p=new e(s);p.subtract(this.getContentPosition()),this._moveContent(this._clampDelta(p),l),this._dispatchEvent(lu.SCROLLING),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent(lu.SCROLL_ENDED))}},{key:"_checkMouseWheel",value:function(t){if(!this._getHowMuchOutOfBoundary().equals(hu,1e-4))return this._processInertiaScroll(),this.unschedule(this._checkMouseWheel),this._dispatchEvent(lu.SCROLL_ENDED),void(this._stopMouseWheel=!1);this._mouseWheelEventElapsedTime+=t,this._mouseWheelEventElapsedTime>.1&&(this._onScrollBarTouchEnded(),this.unschedule(this._checkMouseWheel),this._dispatchEvent(lu.SCROLL_ENDED),this._stopMouseWheel=!1)}},{key:"_calculateMovePercentDelta",value:function(t){var i=t.anchor,n=t.applyToHorizontal,o=t.applyToVertical;this._calculateBoundary(),i.clampf(new F(0,0),new F(1,1));var r=this._getContentBottomBoundary()-this._bottomBoundary;r=-r;var a=this._getContentLeftBoundary()-this._leftBoundary;a=-a;var s=new e;if(this._content&&this.view){var l=0,h=this._content._uiProps.uiTransformComp.contentSize,u=this.view.contentSize;n&&(l=h.width-u.width,s.x=a-l*i.x),o&&(l=h.height-u.height,s.y=r-l*i.y)}return s}},{key:"_moveContentToTopLeft",value:function(t){var i=this._getContentBottomBoundary()-this._bottomBoundary;i=-i;var n=new e,o=0,r=this._getContentLeftBoundary()-this._leftBoundary;if(r=-r,this._content){var a=this._content._uiProps.uiTransformComp.contentSize;a.height<t.height&&(o=a.height-t.height,n.y=i-o),a.width<t.width&&(o=a.width-t.width,n.x=r)}this._updateScrollBarState(),this._moveContent(n),this._adjustContentOutOfBoundary()}},{key:"_scaleChanged",value:function(t){t===vt.SCALE&&this._calculateBoundary()}},{key:"content",get:function(){return this._content},set:function(t){if(this._content!==t){var e=t&&t.parent&&t.parent._uiProps.uiTransformComp;!t||t&&e?(this._content=t,this._calculateBoundary()):q(4302)}}},{key:"horizontalScrollBar",get:function(){return this._horizontalScrollBar},set:function(t){this._horizontalScrollBar!==t&&(this._horizontalScrollBar=t,this._horizontalScrollBar&&(this._horizontalScrollBar.setScrollView(this),this._updateScrollBar(hu)))}},{key:"verticalScrollBar",get:function(){return this._verticalScrollBar},set:function(t){this._verticalScrollBar!==t&&(this._verticalScrollBar=t,this._verticalScrollBar&&(this._verticalScrollBar.setScrollView(this),this._updateScrollBar(hu)))}},{key:"view",get:function(){var t=this._content&&this._content.parent;return t?t._uiProps.uiTransformComp:null}}]),i}(su),ou.EventType=lu,Yh=a((Xh=ru).prototype,"bounceDuration",[c,yh,vh,mh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Zh=a(Xh.prototype,"brake",[c,bh,Th,Ch],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),qh=a(Xh.prototype,"elastic",[c,Sh,xh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$h=a(Xh.prototype,"inertia",[c,wh,Oh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),a(Xh.prototype,"content",[Eh,Dh,Ah],Object.getOwnPropertyDescriptor(Xh.prototype,"content"),Xh.prototype),Kh=a(Xh.prototype,"horizontal",[c,kh,Lh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),a(Xh.prototype,"horizontalScrollBar",[Ph,Rh,zh],Object.getOwnPropertyDescriptor(Xh.prototype,"horizontalScrollBar"),Xh.prototype),Qh=a(Xh.prototype,"vertical",[c,Ih,Bh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),a(Xh.prototype,"verticalScrollBar",[Hh,Mh,Nh],Object.getOwnPropertyDescriptor(Xh.prototype,"verticalScrollBar"),Xh.prototype),Jh=a(Xh.prototype,"cancelInnerEvents",[c,Fh,Vh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),tu=a(Xh.prototype,"scrollEvents",[Uh,c,Wh,Gh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),eu=a(Xh.prototype,"_content",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),iu=a(Xh.prototype,"_horizontalScrollBar",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nu=a(Xh.prototype,"_verticalScrollBar",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jh=Xh))||jh)||jh)||jh)||jh)||jh)),Nu=new e;!function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(Hu||(Hu={})),w(Hu);var Fu,Vu,Uu,Wu,Gu,ju,Xu,Yu,Zu,qu,$u,Ku,Qu,Ju,tc,ec,ic,nc,oc,rc,ac=function(e){return t({Slider:e,SliderComponent:e}),e}((gu=n("cc.Slider"),yu=l(),vu=rt(110),mu=h(),bu=at(st),Tu=o(Zt),Cu=u(),Su=o(Hu),xu=u(),wu=W(),Ou=u(),Eu=o([Jt]),Du=u(),gu(Au=yu(Au=vu(Au=mu(Au=bu((Bu=Iu=function(t){function i(){var t,n;f(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=g(this,(t=y(i)).call.apply(t,[this].concat(r))),v(n,"slideEvents",Lu,m(n)),v(n,"_handle",Pu,m(n)),v(n,"_direction",Ru,m(n)),v(n,"_progress",zu,m(n)),n._offset=new e,n._dragging=!1,n._touchHandle=!1,n._handleLocalPos=new e,n._touchPos=new e,n}return _(i,t),d(i,[{key:"__preload",value:function(){this._updateHandlePosition()}},{key:"onEnable",value:function(){this._updateHandlePosition(),this.node.on(ct.TOUCH_START,this._onTouchBegan,this),this.node.on(ct.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(ct.TOUCH_END,this._onTouchEnded,this),this.node.on(ct.TOUCH_CANCEL,this._onTouchCancelled,this),this._handle&&this._handle.isValid&&(this._handle.node.on(ct.TOUCH_START,this._onHandleDragStart,this),this._handle.node.on(ct.TOUCH_MOVE,this._onTouchMoved,this),this._handle.node.on(ct.TOUCH_END,this._onTouchEnded,this))}},{key:"onDisable",value:function(){this.node.off(ct.TOUCH_START,this._onTouchBegan,this),this.node.off(ct.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(ct.TOUCH_END,this._onTouchEnded,this),this.node.off(ct.TOUCH_CANCEL,this._onTouchCancelled,this),this._handle&&this._handle.isValid&&(this._handle.node.off(ct.TOUCH_START,this._onHandleDragStart,this),this._handle.node.off(ct.TOUCH_MOVE,this._onTouchMoved,this),this._handle.node.off(ct.TOUCH_END,this._onTouchEnded,this))}},{key:"_onHandleDragStart",value:function(t){if(t&&this._handle&&this._handle.node._uiProps.uiTransformComp){this._dragging=!0,this._touchHandle=!0;var i=t.touch.getUILocation();e.set(this._touchPos,i.x,i.y,0),this._handle.node._uiProps.uiTransformComp.convertToNodeSpaceAR(this._touchPos,this._offset),t.propagationStopped=!0}}},{key:"_onTouchBegan",value:function(t){this._handle&&t&&(this._dragging=!0,this._touchHandle||this._handleSliderLogic(t.touch),t.propagationStopped=!0)}},{key:"_onTouchMoved",value:function(t){this._dragging&&t&&(this._handleSliderLogic(t.touch),t.propagationStopped=!0)}},{key:"_onTouchEnded",value:function(t){this._dragging=!1,this._touchHandle=!1,this._offset=new e,t&&(t.propagationStopped=!0)}},{key:"_onTouchCancelled",value:function(t){this._dragging=!1,t&&(t.propagationStopped=!0)}},{key:"_handleSliderLogic",value:function(t){this._updateProgress(t),this._emitSlideEvent()}},{key:"_emitSlideEvent",value:function(){Jt.emitEvents(this.slideEvents,this),this.node.emit("slide",this)}},{key:"_updateProgress",value:function(t){if(this._handle&&t){var i=t.getUILocation();e.set(this._touchPos,i.x,i.y,0);var n=this.node._uiProps.uiTransformComp,o=n.convertToNodeSpaceAR(this._touchPos,Nu);this.direction===Hu.Horizontal?this.progress=G(.5+(o.x-this._offset.x)/n.width):this.progress=G(.5+(o.y-this._offset.y)/n.height)}}},{key:"_updateHandlePosition",value:function(){if(this._handle){this._handleLocalPos.set(this._handle.node.getPosition());var t=this.node._uiProps.uiTransformComp;this._direction===Hu.Horizontal?this._handleLocalPos.x=-t.width*t.anchorX+this.progress*t.width:this._handleLocalPos.y=-t.height*t.anchorY+this.progress*t.height,this._handle.node.setPosition(this._handleLocalPos)}}},{key:"_changeLayout",value:function(){var t=this.node._uiProps.uiTransformComp,e=t.contentSize;if(t.setContentSize(e.height,e.width),this._handle){var i=this._handle.node.position;this._direction===Hu.Horizontal?this._handle.node.setPosition(i.x,0,i.z):this._handle.node.setPosition(0,i.y,i.z),this._updateHandlePosition()}}},{key:"handle",get:function(){return this._handle},set:function(t){this._handle!==t&&(this._handle=t)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this._changeLayout())}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,this._updateHandlePosition())}}]),i}(T),Iu.Direction=Hu,a((ku=Bu).prototype,"handle",[Tu,Cu],Object.getOwnPropertyDescriptor(ku.prototype,"handle"),ku.prototype),a(ku.prototype,"direction",[Su,xu],Object.getOwnPropertyDescriptor(ku.prototype,"direction"),ku.prototype),a(ku.prototype,"progress",[U,wu,Ou],Object.getOwnPropertyDescriptor(ku.prototype,"progress"),ku.prototype),Lu=a(ku.prototype,"slideEvents",[Eu,c,Du],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pu=a(ku.prototype,"_handle",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ru=a(ku.prototype,"_direction",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Hu.Horizontal}}),zu=a(ku.prototype,"_progress",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),Au=ku))||Au)||Au)||Au)||Au)||Au));function sc(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Object.assign.apply(Object,[{}].concat(e))}!function(t){t.TOGGLE="toggle"}(rc||(rc={}));var lc,hc,uc,cc,pc,_c,dc,fc,gc,yc,vc,mc,bc,Tc,Cc,Sc,xc,wc,Oc,Ec,Dc,Ac,kc,Lc,Pc,Rc,zc,Ic,Bc,Hc,Mc,Nc,Fc,Vc,Uc,Wc,Gc,jc,Xc,Yc,Zc,qc,$c,Kc,Qc,Jc,tp,ep,ip,np,op,rp,ap,sp=function(e){return t({Toggle:e,ToggleComponent:e}),e}((Fu=n("cc.Toggle"),Vu=l(),Uu=rt(110),Wu=h(),Gu=at(st),ju=O(),Xu=u(),Yu=o(Zt),Zu=O(),qu=u(),$u=o([Jt]),Ku=u(),Fu(Qu=Vu(Qu=Uu(Qu=Wu(Qu=Gu((oc=nc=function(t){function e(){var t,i;f(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=g(this,(t=y(e)).call.apply(t,[this].concat(o))),v(i,"checkEvents",tc,m(i)),v(i,"_isChecked",ec,m(i)),v(i,"_checkMark",ic,m(i)),i}return _(e,t),d(e,[{key:"_internalToggle",value:function(){this.isChecked=!this.isChecked}},{key:"_set",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._isChecked!=t){this._isChecked=t;var i=this._toggleContainer;i&&i.enabled&&this.enabled&&(t||!i.anyTogglesChecked()&&!i.allowSwitchOff)&&(this._isChecked=!0,i.notifyToggleCheck(this,e)),this.playEffect(),e&&this._emitToggleEvents()}}},{key:"playEffect",value:function(){this._checkMark&&(this._checkMark.node.active=this._isChecked)}},{key:"setIsCheckedWithoutNotify",value:function(t){this._set(t,!1)}},{key:"onEnable",value:function(){z(y(e.prototype),"onEnable",this).call(this),this.playEffect(),this.node.on(e.EventType.CLICK,this._internalToggle,this)}},{key:"onDisable",value:function(){z(y(e.prototype),"onDisable",this).call(this),this.node.off(e.EventType.CLICK,this._internalToggle,this)}},{key:"OnDestroy",value:function(){var t=this._toggleContainer;t&&t.ensureValidState()}},{key:"_emitToggleEvents",value:function(){this.node.emit(e.EventType.TOGGLE,this),this.checkEvents&&Jt.emitEvents(this.checkEvents,this)}},{key:"isChecked",get:function(){return this._isChecked},set:function(t){this._set(t)}},{key:"checkMark",get:function(){return this._checkMark},set:function(t){this._checkMark!==t&&(this._checkMark=t)}},{key:"_resizeToTarget",set:function(t){t&&this._resizeNodeToTargetNode()}},{key:"_toggleContainer",get:function(){var t=this.node.parent;return s.Node.isNode(t)?t.getComponent("cc.ToggleContainer"):null}}]),e}(qn),nc.EventType=sc(rc,Bi),a((Ju=oc).prototype,"isChecked",[ju,Xu],Object.getOwnPropertyDescriptor(Ju.prototype,"isChecked"),Ju.prototype),a(Ju.prototype,"checkMark",[Yu,Zu,qu],Object.getOwnPropertyDescriptor(Ju.prototype,"checkMark"),Ju.prototype),tc=a(Ju.prototype,"checkEvents",[$u,c,Ku],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ec=a(Ju.prototype,"_isChecked",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ic=a(Ju.prototype,"_checkMark",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qu=Ju))||Qu)||Qu)||Qu)||Qu)||Qu)),lp=function(e){return t({ToggleContainer:e,ToggleContainerComponent:e}),e}((lc=n("cc.ToggleContainer"),hc=l(),uc=rt(110),cc=h(),pc=u(),_c=o([Jt]),dc=u(),lc(fc=hc(fc=uc(fc=cc(fc=r((yc=a((gc=function(t){function e(){var t,i;f(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=g(this,(t=y(e)).call.apply(t,[this].concat(o))),v(i,"_allowSwitchOff",yc,m(i)),v(i,"checkEvents",vc,m(i)),i}return _(e,t),d(e,[{key:"start",value:function(){this.ensureValidState()}},{key:"activeToggles",value:function(){return this.toggleItems.filter((function(t){return t.isChecked}))}},{key:"anyTogglesChecked",value:function(){return!!this.toggleItems.find((function(t){return t.isChecked}))}},{key:"notifyToggleCheck",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.enabledInHierarchy){for(var i=0;i<this.toggleItems.length;i++){var n=this.toggleItems[i];n!==t&&(e?n.isChecked=!1:n.setIsCheckedWithoutNotify(!1))}this.checkEvents&&s.Component.EventHandler.emitEvents(this.checkEvents,t)}}},{key:"ensureValidState",value:function(){var t=this.toggleItems;if(!this._allowSwitchOff&&!this.anyTogglesChecked()&&0!==t.length){var e=t[0];e.isChecked=!0,this.notifyToggleCheck(e)}var i=this.activeToggles();if(i.length>1)for(var n=i[0],o=0;o<i.length;++o){var r=i[o];r!==n&&(r.isChecked=!1)}}},{key:"allowSwitchOff",get:function(){return this._allowSwitchOff},set:function(t){this._allowSwitchOff=t}},{key:"toggleItems",get:function(){return this.node.children.map((function(t){var e=t.getComponent("cc.Toggle");if(e&&e.enabled)return e})).filter(Boolean)}}]),e}(T)).prototype,"_allowSwitchOff",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a(gc.prototype,"allowSwitchOff",[pc],Object.getOwnPropertyDescriptor(gc.prototype,"allowSwitchOff"),gc.prototype),vc=a(gc.prototype,"checkEvents",[_c,c,dc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fc=gc))||fc)||fc)||fc)||fc)||fc)),hp=function(e){return t({UIMeshRenderer:e,UIModelComponent:e}),e}(n("cc.UIMeshRenderer")(mc=l()(mc=rt(110)(mc=h()(mc=function(t){function e(){var t,i;f(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=g(this,(t=y(e)).call.apply(t,[this].concat(o))))._models=null,i._modelComponent=null,i}return _(e,t),d(e,[{key:"onLoad",value:function(){this.node._uiProps.uiTransformComp||this.node.addComponent("cc.UITransform"),this._modelComponent=this.getComponent("cc.RenderableComponent"),this._modelComponent?(this._modelComponent._sceneGetter=Qt.root.ui.getRenderSceneGetter(),this._models=this._modelComponent._collectModels()):console.warn("node '".concat(this.node&&this.node.name,"' doesn't have any renderable component"))}},{key:"onEnable",value:function(){z(y(e.prototype),"onEnable",this).call(this),this._modelComponent&&this._modelComponent._attachToScene()}},{key:"onDisable",value:function(){z(y(e.prototype),"onDisable",this).call(this),this._modelComponent&&this._modelComponent._detachFromScene()}},{key:"onDestroy",value:function(){z(y(e.prototype),"onDestroy",this).call(this),this._modelComponent=this.getComponent("cc.RenderableComponent"),this._modelComponent&&(this._modelComponent._sceneGetter=null,s.isValid(this._modelComponent,!0)&&this._modelComponent._attachToScene(),this._models=null)}},{key:"updateAssembler",value:function(t){if(this._models){for(var e,i=Y(this._models);!(e=i()).done;){var n=e.value;t.commitModel.call(t,this,n,this._modelComponent.material)}return!0}return!1}},{key:"update",value:function(){this._fitUIRenderQueue()}},{key:"_fitUIRenderQueue",value:function(){if(this._modelComponent)for(var t=this._modelComponent.sharedMaterials.length,e=0;e<t;e++){var i=this._modelComponent.getMaterialInstance(e);if(null!=i)for(var n=i.passes,o=n.length,r=0;r<o;r++){var a=n[r];a._priority=Pt.MAX-11,a.blendState.targets[0].blend||i.overridePipelineStates({blendState:{targets:[{blend:!0}]}},r)}}}},{key:"modelComponent",get:function(){return this._modelComponent}}]),e}(ze))||mc)||mc)||mc)||mc),up=new e;function cp(t){return t instanceof Rt?Xt:t._uiProps.uiTransformComp?t._uiProps.uiTransformComp.contentSize:M.ZERO}function pp(t,e,i,n){for(var o=t.parent?t.parent.getScale():up,r=o.x,a=o.y,s=0,l=0,h=t.parent;;){if(!h)return i.x=i.y=0,void(n.x=n.y=1);var u=h.getPosition();if(s+=u.x,l+=u.y,(h=h.parent)===e)break;var c=(o=h?h.getScale():up).x,p=o.y;s*=c,l*=p,r*=c,a*=p}n.x=0!==r?1/r:1,n.y=0!==a?1/a:1,i.x=-s,i.y=-l}!function(t){t[t.ONCE=0]="ONCE",t[t.ALWAYS=1]="ALWAYS",t[t.ON_WINDOW_RESIZE=2]="ON_WINDOW_RESIZE"}(rp||(rp={})),w(rp),function(t){t[t.TOP=1]="TOP",t[t.MID=2]="MID",t[t.BOT=4]="BOT",t[t.LEFT=8]="LEFT",t[t.CENTER=16]="CENTER",t[t.RIGHT=32]="RIGHT",t[t.HORIZONTAL=56]="HORIZONTAL",t[t.VERTICAL=7]="VERTICAL"}(ap||(ap={}));var _p,dp,fp,gp,yp,vp,mp,bp,Tp,Cp,Sp,xp,wp,Op,Ep,Dp,Ap,kp,Lp,Pp=ap.TOP|ap.BOT,Rp=ap.LEFT|ap.RIGHT,zp=function(e){return t({Widget:e,WidgetComponent:e}),e}((bc=n("cc.Widget"),Tc=l(),Cc=rt(110),Sc=h(),xc=at(st),wc=o(lt),Oc=u(),Ec=u(),Dc=u(),Ac=u(),kc=u(),Lc=u(),Pc=u(),Rc=P(),zc=P(),Ic=o(rp),Bc=u(),bc(Hc=Tc(Hc=Cc(Hc=Sc(Hc=xc(Hc=r((op=np=function(t){function i(){var t,n;f(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=g(this,(t=y(i)).call.apply(t,[this].concat(r))))._lastPos=new e,n._lastSize=new M,n._dirty=!0,v(n,"_alignFlags",Nc,m(n)),v(n,"_target",Fc,m(n)),v(n,"_left",Vc,m(n)),v(n,"_right",Uc,m(n)),v(n,"_top",Wc,m(n)),v(n,"_bottom",Gc,m(n)),v(n,"_horizontalCenter",jc,m(n)),v(n,"_verticalCenter",Xc,m(n)),v(n,"_isAbsLeft",Yc,m(n)),v(n,"_isAbsRight",Zc,m(n)),v(n,"_isAbsTop",qc,m(n)),v(n,"_isAbsBottom",$c,m(n)),v(n,"_isAbsHorizontalCenter",Kc,m(n)),v(n,"_isAbsVerticalCenter",Qc,m(n)),v(n,"_originalWidth",Jc,m(n)),v(n,"_originalHeight",tp,m(n)),v(n,"_alignMode",ep,m(n)),v(n,"_lockFlags",ip,m(n)),n}return _(i,t),d(i,[{key:"updateAlignment",value:function(){s._widgetManager.updateAlignment(this.node)}},{key:"_validateTargetInDEV",value:function(){}},{key:"setDirty",value:function(){this._recursiveDirty()}},{key:"onEnable",value:function(){this.node.getPosition(this._lastPos),this._lastSize.set(this.node._uiProps.uiTransformComp.contentSize),s._widgetManager.add(this),this._registerEvent(),this._registerTargetEvents()}},{key:"onDisable",value:function(){s._widgetManager.remove(this),this._unregisterEvent(),this._unregisterTargetEvents()}},{key:"onDestroy",value:function(){this._removeParentEvent()}},{key:"_adjustWidgetToAllowMovingInEditor",value:function(t){if(t&vt.POSITION&&!s._widgetManager.isAligning){var i=this.node.getPosition(),n=this._lastPos,o=new e(i);o.subtract(n);var r=this.node.parent,a=new e(1,1,1);if(this.target&&(r=this.target,pp(this.node,r,new e,a)),r){var l=cp(r),h=new e;0!==l.width&&0!==l.height&&e.set(h,o.x/l.width,o.y/l.height,h.z),this.isAlignTop&&(this._top-=(this._isAbsTop?o.y:h.y)*a.y),this.isAlignBottom&&(this._bottom+=(this._isAbsBottom?o.y:h.y)*a.y),this.isAlignLeft&&(this._left+=(this._isAbsLeft?o.x:h.x)*a.x),this.isAlignRight&&(this._right-=(this._isAbsRight?o.x:h.x)*a.x),this.isAlignHorizontalCenter&&(this._horizontalCenter+=(this._isAbsHorizontalCenter?o.x:h.x)*a.x),this.isAlignVerticalCenter&&(this._verticalCenter+=(this._isAbsVerticalCenter?o.y:h.y)*a.y),this._recursiveDirty()}}}},{key:"_adjustWidgetToAllowResizingInEditor",value:function(){if(!s._widgetManager.isAligning){this.setDirty();var t=this.node._uiProps.uiTransformComp,i=t.contentSize,n=this._lastSize,o=new e(i.width-n.width,i.height-n.height,0),r=this.node.parent,a=new e(1,1,1);if(this.target&&(r=this.target,pp(this.node,r,new e,a)),r){var l=cp(r),h=new e;0!==l.width&&0!==l.height&&e.set(h,o.x/l.width,o.y/l.height,h.z);var u=t.anchorPoint;this.isAlignTop&&(this._top-=(this._isAbsTop?o.y:h.y)*(1-u.y)*a.y),this.isAlignBottom&&(this._bottom-=(this._isAbsBottom?o.y:h.y)*u.y*a.y),this.isAlignLeft&&(this._left-=(this._isAbsLeft?o.x:h.x)*u.x*a.x),this.isAlignRight&&(this._right-=(this._isAbsRight?o.x:h.x)*(1-u.x)*a.x),this._recursiveDirty()}}}},{key:"_adjustWidgetToAnchorChanged",value:function(){this.setDirty()}},{key:"_adjustTargetToParentChanged",value:function(t){t&&this._unregisterOldParentEvents(t),this.node.getParent()&&this._registerTargetEvents()}},{key:"_registerEvent",value:function(){this.node.on(ct.TRANSFORM_CHANGED,this._adjustWidgetToAllowMovingInEditor,this),this.node.on(ct.SIZE_CHANGED,this._adjustWidgetToAllowResizingInEditor,this),this.node.on(ct.ANCHOR_CHANGED,this._adjustWidgetToAnchorChanged,this),this.node.on(ct.PARENT_CHANGED,this._adjustTargetToParentChanged,this)}},{key:"_unregisterEvent",value:function(){this.node.off(ct.TRANSFORM_CHANGED,this._adjustWidgetToAllowMovingInEditor,this),this.node.off(ct.SIZE_CHANGED,this._adjustWidgetToAllowResizingInEditor,this),this.node.off(ct.ANCHOR_CHANGED,this._adjustWidgetToAnchorChanged,this)}},{key:"_removeParentEvent",value:function(){this.node.off(ct.PARENT_CHANGED,this._adjustTargetToParentChanged,this)}},{key:"_autoChangedValue",value:function(t,e){var i=(this._alignFlags&t)>0,n=this.node.parent&&this.node.parent._uiProps.uiTransformComp;if(i&&n){var o=n.contentSize;this.isAlignLeft&&t===ap.LEFT?this._left=e?this._left*o.width:this._left/o.width:this.isAlignRight&&t===ap.RIGHT?this._right=e?this._right*o.width:this._right/o.width:this.isAlignHorizontalCenter&&t===ap.CENTER?this._horizontalCenter=e?this._horizontalCenter*o.width:this._horizontalCenter/o.width:this.isAlignTop&&t===ap.TOP?this._top=e?this._top*o.height:this._top/o.height:this.isAlignBottom&&t===ap.BOT?this._bottom=e?this._bottom*o.height:this._bottom/o.height:this.isAbsoluteVerticalCenter&&t===ap.MID&&(this._verticalCenter=this._verticalCenter/o.height),this._recursiveDirty()}}},{key:"_registerTargetEvents",value:function(){var t=this._target||this.node.parent;t&&(t.getComponent(st)?(t.on(ct.TRANSFORM_CHANGED,this._targetChangedOperation,this),t.on(ct.SIZE_CHANGED,this._targetChangedOperation,this)):R(6501,this.node.name))}},{key:"_unregisterTargetEvents",value:function(){var t=this._target||this.node.parent;t&&(t.off(ct.TRANSFORM_CHANGED,this._targetChangedOperation,this),t.off(ct.SIZE_CHANGED,this._targetChangedOperation,this))}},{key:"_unregisterOldParentEvents",value:function(t){var e=this._target||t;e&&(e.off(ct.TRANSFORM_CHANGED,this._targetChangedOperation,this),e.off(ct.SIZE_CHANGED,this._targetChangedOperation,this))}},{key:"_targetChangedOperation",value:function(){this._recursiveDirty()}},{key:"_setAlign",value:function(t,e){if(e!==(this._alignFlags&t)>0){var i=(t&Rp)>0,n=this.node._uiProps.uiTransformComp;e?(this._alignFlags|=t,i?(this.isAlignHorizontalCenter=!1,this.isStretchWidth&&(this._originalWidth=n.width)):(this.isAlignVerticalCenter=!1,this.isStretchHeight&&(this._originalHeight=n.height))):(i?this.isStretchWidth&&(n.width=this._originalWidth):this.isStretchHeight&&(n.height=this._originalHeight),this._alignFlags&=~t)}}},{key:"_recursiveDirty",value:function(){this._dirty||(this._dirty=!0)}},{key:"target",get:function(){return this._target},set:function(t){this._target!==t&&(this._unregisterTargetEvents(),this._target=t,this._registerTargetEvents(),this._validateTargetInDEV(),this._recursiveDirty())}},{key:"isAlignTop",get:function(){return(this._alignFlags&ap.TOP)>0},set:function(t){this._setAlign(ap.TOP,t),this._recursiveDirty()}},{key:"isAlignBottom",get:function(){return(this._alignFlags&ap.BOT)>0},set:function(t){this._setAlign(ap.BOT,t),this._recursiveDirty()}},{key:"isAlignLeft",get:function(){return(this._alignFlags&ap.LEFT)>0},set:function(t){this._setAlign(ap.LEFT,t),this._recursiveDirty()}},{key:"isAlignRight",get:function(){return(this._alignFlags&ap.RIGHT)>0},set:function(t){this._setAlign(ap.RIGHT,t),this._recursiveDirty()}},{key:"isAlignVerticalCenter",get:function(){return(this._alignFlags&ap.MID)>0},set:function(t){t?(this.isAlignTop=!1,this.isAlignBottom=!1,this._alignFlags|=ap.MID):this._alignFlags&=~ap.MID,this._recursiveDirty()}},{key:"isAlignHorizontalCenter",get:function(){return(this._alignFlags&ap.CENTER)>0},set:function(t){t?(this.isAlignLeft=!1,this.isAlignRight=!1,this._alignFlags|=ap.CENTER):this._alignFlags&=~ap.CENTER,this._recursiveDirty()}},{key:"isStretchWidth",get:function(){return(this._alignFlags&Rp)===Rp}},{key:"isStretchHeight",get:function(){return(this._alignFlags&Pp)===Pp}},{key:"top",get:function(){return this._top},set:function(t){this._top=t,this._recursiveDirty()}},{key:"editorTop",get:function(){return this._isAbsTop?this._top:100*this._top},set:function(t){this._top=this._isAbsTop?t:t/100,this._recursiveDirty()}},{key:"bottom",get:function(){return this._bottom},set:function(t){this._bottom=t,this._recursiveDirty()}},{key:"editorBottom",get:function(){return this._isAbsBottom?this._bottom:100*this._bottom},set:function(t){this._bottom=this._isAbsBottom?t:t/100,this._recursiveDirty()}},{key:"left",get:function(){return this._left},set:function(t){this._left=t,this._recursiveDirty()}},{key:"editorLeft",get:function(){return this._isAbsLeft?this._left:100*this._left},set:function(t){this._left=this._isAbsLeft?t:t/100,this._recursiveDirty()}},{key:"right",get:function(){return this._right},set:function(t){this._right=t,this._recursiveDirty()}},{key:"editorRight",get:function(){return this._isAbsRight?this._right:100*this._right},set:function(t){this._right=this._isAbsRight?t:t/100,this._recursiveDirty()}},{key:"horizontalCenter",get:function(){return this._horizontalCenter},set:function(t){this._horizontalCenter=t,this._recursiveDirty()}},{key:"editorHorizontalCenter",get:function(){return this._isAbsHorizontalCenter?this._horizontalCenter:100*this._horizontalCenter},set:function(t){this._horizontalCenter=this._isAbsHorizontalCenter?t:t/100,this._recursiveDirty()}},{key:"verticalCenter",get:function(){return this._verticalCenter},set:function(t){this._verticalCenter=t,this._recursiveDirty()}},{key:"editorVerticalCenter",get:function(){return this._isAbsVerticalCenter?this._verticalCenter:100*this._verticalCenter},set:function(t){this._verticalCenter=this._isAbsVerticalCenter?t:t/100,this._recursiveDirty()}},{key:"isAbsoluteTop",get:function(){return this._isAbsTop},set:function(t){this._isAbsTop!==t&&(this._isAbsTop=t,this._autoChangedValue(ap.TOP,this._isAbsTop))}},{key:"isAbsoluteBottom",get:function(){return this._isAbsBottom},set:function(t){this._isAbsBottom!==t&&(this._isAbsBottom=t,this._autoChangedValue(ap.BOT,this._isAbsBottom))}},{key:"isAbsoluteLeft",get:function(){return this._isAbsLeft},set:function(t){this._isAbsLeft!==t&&(this._isAbsLeft=t,this._autoChangedValue(ap.LEFT,this._isAbsLeft))}},{key:"isAbsoluteRight",get:function(){return this._isAbsRight},set:function(t){this._isAbsRight!==t&&(this._isAbsRight=t,this._autoChangedValue(ap.RIGHT,this._isAbsRight))}},{key:"isAbsoluteHorizontalCenter",get:function(){return this._isAbsHorizontalCenter},set:function(t){this._isAbsHorizontalCenter!==t&&(this._isAbsHorizontalCenter=t,this._autoChangedValue(ap.CENTER,this._isAbsHorizontalCenter))}},{key:"isAbsoluteVerticalCenter",get:function(){return this._isAbsVerticalCenter},set:function(t){this._isAbsVerticalCenter!==t&&(this._isAbsVerticalCenter=t,this._autoChangedValue(ap.MID,this._isAbsVerticalCenter))}},{key:"alignMode",get:function(){return this._alignMode},set:function(t){this._alignMode=t,this._recursiveDirty()}},{key:"alignFlags",get:function(){return this._alignFlags},set:function(t){this._alignFlags!==t&&(this._alignFlags=t,this._recursiveDirty())}}]),i}(T),np.AlignMode=rp,a((Mc=op).prototype,"target",[wc,Oc],Object.getOwnPropertyDescriptor(Mc.prototype,"target"),Mc.prototype),a(Mc.prototype,"isAlignTop",[Ec],Object.getOwnPropertyDescriptor(Mc.prototype,"isAlignTop"),Mc.prototype),a(Mc.prototype,"isAlignBottom",[Dc],Object.getOwnPropertyDescriptor(Mc.prototype,"isAlignBottom"),Mc.prototype),a(Mc.prototype,"isAlignLeft",[Ac],Object.getOwnPropertyDescriptor(Mc.prototype,"isAlignLeft"),Mc.prototype),a(Mc.prototype,"isAlignRight",[kc],Object.getOwnPropertyDescriptor(Mc.prototype,"isAlignRight"),Mc.prototype),a(Mc.prototype,"isAlignVerticalCenter",[Lc],Object.getOwnPropertyDescriptor(Mc.prototype,"isAlignVerticalCenter"),Mc.prototype),a(Mc.prototype,"isAlignHorizontalCenter",[Pc],Object.getOwnPropertyDescriptor(Mc.prototype,"isAlignHorizontalCenter"),Mc.prototype),a(Mc.prototype,"isStretchWidth",[Rc],Object.getOwnPropertyDescriptor(Mc.prototype,"isStretchWidth"),Mc.prototype),a(Mc.prototype,"isStretchHeight",[zc],Object.getOwnPropertyDescriptor(Mc.prototype,"isStretchHeight"),Mc.prototype),a(Mc.prototype,"editorTop",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"editorTop"),Mc.prototype),a(Mc.prototype,"editorBottom",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"editorBottom"),Mc.prototype),a(Mc.prototype,"editorLeft",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"editorLeft"),Mc.prototype),a(Mc.prototype,"editorRight",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"editorRight"),Mc.prototype),a(Mc.prototype,"editorHorizontalCenter",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"editorHorizontalCenter"),Mc.prototype),a(Mc.prototype,"editorVerticalCenter",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"editorVerticalCenter"),Mc.prototype),a(Mc.prototype,"isAbsoluteTop",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"isAbsoluteTop"),Mc.prototype),a(Mc.prototype,"isAbsoluteBottom",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"isAbsoluteBottom"),Mc.prototype),a(Mc.prototype,"isAbsoluteLeft",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"isAbsoluteLeft"),Mc.prototype),a(Mc.prototype,"isAbsoluteRight",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"isAbsoluteRight"),Mc.prototype),a(Mc.prototype,"isAbsoluteHorizontalCenter",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"isAbsoluteHorizontalCenter"),Mc.prototype),a(Mc.prototype,"isAbsoluteVerticalCenter",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"isAbsoluteVerticalCenter"),Mc.prototype),a(Mc.prototype,"alignMode",[Ic,Bc],Object.getOwnPropertyDescriptor(Mc.prototype,"alignMode"),Mc.prototype),a(Mc.prototype,"alignFlags",[N],Object.getOwnPropertyDescriptor(Mc.prototype,"alignFlags"),Mc.prototype),Nc=a(Mc.prototype,"_alignFlags",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fc=a(Mc.prototype,"_target",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vc=a(Mc.prototype,"_left",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Uc=a(Mc.prototype,"_right",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wc=a(Mc.prototype,"_top",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gc=a(Mc.prototype,"_bottom",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),jc=a(Mc.prototype,"_horizontalCenter",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Xc=a(Mc.prototype,"_verticalCenter",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Yc=a(Mc.prototype,"_isAbsLeft",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Zc=a(Mc.prototype,"_isAbsRight",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qc=a(Mc.prototype,"_isAbsTop",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$c=a(Mc.prototype,"_isAbsBottom",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Kc=a(Mc.prototype,"_isAbsHorizontalCenter",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Qc=a(Mc.prototype,"_isAbsVerticalCenter",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Jc=a(Mc.prototype,"_originalWidth",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tp=a(Mc.prototype,"_originalHeight",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ep=a(Mc.prototype,"_alignMode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return rp.ON_WINDOW_RESIZE}}),ip=a(Mc.prototype,"_lockFlags",[c,$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hc=Mc))||Hc)||Hc)||Hc)||Hc)||Hc)||Hc));s.internal.computeInverseTransForTarget=pp,s.internal.getReadonlyNodeSize=cp;var Ip,Bp=new p;!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(Ip||(Ip={})),w(Ip);var Hp,Mp,Np,Fp,Vp,Up,Wp,Gp,jp,Xp,Yp,Zp,qp,$p,Kp,Qp,Jp,t_,e_,i_,n_,o_,r_,a_,s_,l_,h_,u_,c_,p_,__,d_,f_,g_,y_,v_,m_,b_,T_,C_,S_,x_,w_,O_,E_,D_=function(e){return t({PageViewIndicator:e,PageViewIndicatorComponent:e}),e}((_p=n("cc.PageViewIndicator"),dp=l(),fp=rt(110),gp=h(),yp=o(ut),vp=u(),mp=o(Ip),bp=u(),Tp=o(M),Cp=u(),Sp=u(),_p(xp=dp(xp=fp(xp=gp((Lp=kp=function(t){function e(){var t,i;f(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=g(this,(t=y(e)).call.apply(t,[this].concat(o))),v(i,"spacing",Op,m(i)),v(i,"_spriteFrame",Ep,m(i)),v(i,"_direction",Dp,m(i)),v(i,"_cellSize",Ap,m(i)),i._layout=null,i._pageView=null,i._indicators=[],i}return _(e,t),d(e,[{key:"onLoad",value:function(){this._updateLayout()}},{key:"setPageView",value:function(t){this._pageView=t,this._refresh()}},{key:"_updateLayout",value:function(){this._layout=this.getComponent(Ua),this._layout||(this._layout=this.addComponent(Ua));var t=this._layout;this.direction===Ip.HORIZONTAL?(t.type=Ua.Type.HORIZONTAL,t.spacingX=this.spacing):this.direction===Ip.VERTICAL&&(t.type=Ua.Type.VERTICAL,t.spacingY=this.spacing),t.resizeMode=Ua.ResizeMode.CONTAINER}},{key:"_createIndicator",value:function(){var t=new lt,e=t.addComponent(Zt);return e.spriteFrame=this.spriteFrame,e.sizeMode=Zt.SizeMode.CUSTOM,t.parent=this.node,t._uiProps.uiTransformComp.setContentSize(this._cellSize),t}},{key:"_changedState",value:function(){var t=this._indicators;if(0!==t.length&&this._pageView){var e=this._pageView.curPageIdx;if(!(e>=t.length)){for(var i=0;i<t.length;++i){var n=t[i];if(n._uiProps.uiComp){var o=n._uiProps.uiComp;Bp.set(o.color),Bp.a=127.5,o.color=Bp}}if(t[e]._uiProps.uiComp){var r=t[e]._uiProps.uiComp;Bp.set(r.color),Bp.a=255,r.color=Bp}}}}},{key:"_refresh",value:function(){if(this._pageView){var t=this._indicators,e=this._pageView.getPages();if(e.length!==t.length){var i=0;if(e.length>t.length)for(i=0;i<e.length;++i)t[i]||(t[i]=this._createIndicator());else for(i=t.length-e.length;i>0;--i){var n=t[i-1];this.node.removeChild(n),t.splice(i-1,1)}this._layout&&this._layout.enabledInHierarchy&&this._layout.updateLayout(),this._changedState()}}}},{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(t){this._spriteFrame!==t&&(this._spriteFrame=t)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t)}},{key:"cellSize",get:function(){return this._cellSize},set:function(t){this._cellSize!==t&&(this._cellSize=t)}}]),e}(T),kp.Direction=Ip,a((wp=Lp).prototype,"spriteFrame",[yp,vp],Object.getOwnPropertyDescriptor(wp.prototype,"spriteFrame"),wp.prototype),a(wp.prototype,"direction",[mp,bp],Object.getOwnPropertyDescriptor(wp.prototype,"direction"),wp.prototype),a(wp.prototype,"cellSize",[Tp,Cp],Object.getOwnPropertyDescriptor(wp.prototype,"cellSize"),wp.prototype),Op=a(wp.prototype,"spacing",[c,Sp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ep=a(wp.prototype,"_spriteFrame",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dp=a(wp.prototype,"_direction",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ip.HORIZONTAL}}),Ap=a(wp.prototype,"_cellSize",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new M(20,20)}}),xp=wp))||xp)||xp)||xp)||xp)),A_=new F;!function(t){t[t.Unified=0]="Unified",t[t.Free=1]="Free"}(w_||(w_={})),w(w_),function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(O_||(O_={})),w(O_),function(t){t.PAGE_TURNING="page-turning"}(E_||(E_={}));var k_,L_,P_,R_,z_,I_,B_,H_,M_,N_,F_,V_,U_,W_,G_,j_,X_,Y_,Z_,q_,$_,K_,Q_,J_,td,ed,id,nd,od,rd,ad,sd,ld,hd,ud,cd,pd,_d,dd,fd,gd,yd=function(e){return t({PageView:e,PageViewComponent:e}),e}((Hp=n("cc.PageView"),Mp=l(),Np=rt(110),Fp=h(),Vp=o(w_),Up=u(),Wp=o(O_),Gp=u(),jp=W(),Xp=u(),Yp=W(),Zp=u(),qp=o(D_),$p=u(),Kp=u(),Qp=o(au),Jp=P(),t_=o(au),e_=P(),i_=P(),n_=P(),o_=P(),r_=o([Jt]),a_=P(),s_=o([Jt]),l_=u(),Hp(h_=Mp(h_=Np(h_=Fp((x_=S_=function(t){function i(){var t,n;f(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=g(this,(t=y(i)).call.apply(t,[this].concat(r))),v(n,"autoPageTurningThreshold",c_,m(n)),v(n,"horizontal",p_,m(n)),v(n,"vertical",__,m(n)),v(n,"cancelInnerEvents",d_,m(n)),v(n,"scrollEvents",f_,m(n)),v(n,"pageTurningSpeed",g_,m(n)),v(n,"pageEvents",y_,m(n)),v(n,"_sizeMode",v_,m(n)),v(n,"_direction",m_,m(n)),v(n,"_scrollThreshold",b_,m(n)),v(n,"_pageTurningEventTiming",T_,m(n)),v(n,"_indicator",C_,m(n)),n._curPageIdx=0,n._lastPageIdx=0,n._pages=[],n._initContentPos=new e,n._scrollCenterOffsetX=[],n._scrollCenterOffsetY=[],n._touchBeganPosition=new e,n._touchEndPosition=new e,n}return _(i,t),d(i,[{key:"__preload",value:function(){this.node.on(ct.SIZE_CHANGED,this._updateAllPagesSize,this)}},{key:"onEnable",value:function(){z(y(i.prototype),"onEnable",this).call(this),this.node.on(i.EventType.SCROLL_ENG_WITH_THRESHOLD,this._dispatchPageTurningEvent,this)}},{key:"onDisable",value:function(){z(y(i.prototype),"onDisable",this).call(this),this.node.off(i.EventType.SCROLL_ENG_WITH_THRESHOLD,this._dispatchPageTurningEvent,this)}},{key:"onLoad",value:function(){this._initPages(),this.indicator&&this.indicator.setPageView(this)}},{key:"onDestroy",value:function(){this.node.off(ct.SIZE_CHANGED,this._updateAllPagesSize,this)}},{key:"getCurrentPageIndex",value:function(){return this._curPageIdx}},{key:"setCurrentPageIndex",value:function(t){this.scrollToPage(t,1)}},{key:"getPages",value:function(){return this._pages}},{key:"addPage",value:function(t){t&&-1===this._pages.indexOf(t)&&this.content&&(t._uiProps.uiTransformComp?(this.content.addChild(t),this._pages.push(t),this._updatePageView()):q(4301))}},{key:"insertPage",value:function(t,e){if(!(e<0)&&t&&-1===this._pages.indexOf(t)&&this.content)if(e>=this._pages.length)this.addPage(t);else{if(!t._uiProps.uiTransformComp)return void q(4301);this._pages.splice(e,0,t),this.content.insertChild(t,e),this._updatePageView()}}},{key:"removePage",value:function(t){if(t&&this.content){var e=this._pages.indexOf(t);-1!==e?this.removePageAtIndex(e):R(4300,t.name)}}},{key:"removePageAtIndex",value:function(t){var e=this._pages;if(!(t<0||t>=e.length)){var i=e[t];i&&this.content&&(this.content.removeChild(i),e.splice(t,1),this._updatePageView())}}},{key:"removeAllPages",value:function(){if(this.content){for(var t=this._pages,e=0,i=t.length;e<i;e++)this.content.removeChild(t[e]);this._pages.length=0,this._updatePageView()}}},{key:"scrollToPage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;t<0||t>=this._pages.length||(this._curPageIdx=t,this.scrollToOffset(this._moveOffsetValue(t),e,!0),this.indicator&&this.indicator._changedState())}},{key:"getScrollEndedEventTiming",value:function(){return this.pageTurningEventTiming}},{key:"_updatePageView",value:function(){if(this.content){var t=this.content.getComponent(Ua);t&&t.enabled&&t.updateLayout();var e=this._pages.length;this._curPageIdx>=e&&(this._curPageIdx=0===e?0:e-1,this._lastPageIdx=this._curPageIdx);for(var i=this._initContentPos,n=0;n<e;++n){var o=this._pages[n].position;this.direction===O_.Horizontal?this._scrollCenterOffsetX[n]=Math.abs(i.x+o.x):this._scrollCenterOffsetY[n]=Math.abs(i.y+o.y)}this.indicator&&this.indicator._refresh()}}},{key:"_updateAllPagesSize",value:function(){var t=this.view;if(this.content&&t&&this._sizeMode===w_.Unified)for(var e=this._pages,i=t.contentSize,n=0,o=e.length;n<o;n++)e[n]._uiProps.uiTransformComp.setContentSize(i)}},{key:"_handleReleaseLogic",value:function(){this._autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(i.EventType.SCROLL_ENDED))}},{key:"_onTouchBegan",value:function(t,n){t.touch.getUILocation(A_),e.set(this._touchBeganPosition,A_.x,A_.y,0),z(y(i.prototype),"_onTouchBegan",this).call(this,t,n)}},{key:"_onTouchMoved",value:function(t,e){z(y(i.prototype),"_onTouchMoved",this).call(this,t,e)}},{key:"_onTouchEnded",value:function(t,n){t.touch.getUILocation(A_),e.set(this._touchEndPosition,A_.x,A_.y,0),z(y(i.prototype),"_onTouchEnded",this).call(this,t,n)}},{key:"_onTouchCancelled",value:function(t,n){t.touch.getUILocation(A_),e.set(this._touchEndPosition,A_.x,A_.y,0),z(y(i.prototype),"_onTouchCancelled",this).call(this,t,n)}},{key:"_onMouseWheel",value:function(){}},{key:"_syncScrollDirection",value:function(){this.horizontal=this.direction===O_.Horizontal,this.vertical=this.direction===O_.Vertical}},{key:"_syncSizeMode",value:function(){var t=this.view;if(this.content&&t){var e=this.content.getComponent(Ua);if(e){if(this._sizeMode===w_.Free&&this._pages.length>0){var i=this._pages[0]._uiProps.uiTransformComp,n=this._pages[this._pages.length-1]._uiProps.uiTransformComp;this.direction===O_.Horizontal?(e.paddingLeft=(t.width-i.width)/2,e.paddingRight=(t.width-n.width)/2):this.direction===O_.Vertical&&(e.paddingTop=(t.height-i.height)/2,e.paddingBottom=(t.height-n.height)/2)}e.updateLayout()}}}},{key:"_initPages",value:function(){if(this.content){this._initContentPos=this.content.position;for(var t=this.content.children,e=0;e<t.length;++e){var i=t[e];this._pages.indexOf(i)>=0||this._pages.push(i)}this._syncScrollDirection(),this._syncSizeMode(),this._updatePageView()}}},{key:"_dispatchPageTurningEvent",value:function(){this._lastPageIdx!==this._curPageIdx&&(this._lastPageIdx=this._curPageIdx,Jt.emitEvents(this.pageEvents,this,E_.PAGE_TURNING),this.node.emit(E_.PAGE_TURNING,this))}},{key:"_isQuicklyScrollable",value:function(t){if(this.direction===O_.Horizontal){if(Math.abs(t.x)>this.autoPageTurningThreshold)return!0}else if(this.direction===O_.Vertical&&Math.abs(t.y)>this.autoPageTurningThreshold)return!0;return!1}},{key:"_moveOffsetValue",value:function(t){var i=new e;if(this._sizeMode===w_.Free)this.direction===O_.Horizontal?i.x=this._scrollCenterOffsetX[t]:this.direction===O_.Vertical&&(i.y=this._scrollCenterOffsetY[t]);else{var n=this.view;if(!n)return i;this.direction===O_.Horizontal?i.x=t*n.width:this.direction===O_.Vertical&&(i.y=t*n.height)}return i}},{key:"_getDragDirection",value:function(t){return this._direction===O_.Horizontal?0===t.x?0:t.x>0?1:-1:0===t.y?0:t.y<0?1:-1}},{key:"_isScrollable",value:function(t,e,i){if(this._sizeMode===w_.Free){var n=0,o=0;if(this.direction===O_.Horizontal)return n=this._scrollCenterOffsetX[e],o=this._scrollCenterOffsetX[i],Math.abs(t.x)>=Math.abs(n-o)*this.scrollThreshold;if(this.direction===O_.Vertical)return n=this._scrollCenterOffsetY[e],o=this._scrollCenterOffsetY[i],Math.abs(t.y)>=Math.abs(n-o)*this.scrollThreshold}else{var r=this.view;if(!r)return;if(this.direction===O_.Horizontal)return Math.abs(t.x)>=r.width*this.scrollThreshold;if(this.direction===O_.Vertical)return Math.abs(t.y)>=r.height*this.scrollThreshold}}},{key:"_autoScrollToPage",value:function(){if(this._startBounceBackIfNeeded()){var t=this._getHowMuchOutOfBoundary();((t=this._clampDelta(t)).x>0||t.y<0)&&(this._curPageIdx=0===this._pages.length?0:this._pages.length-1),(t.x<0||t.y>0)&&(this._curPageIdx=0),this.indicator&&this.indicator._changedState()}else{var i=new e;e.subtract(i,this._touchBeganPosition,this._touchEndPosition);var n=this._curPageIdx,o=n+this._getDragDirection(i),r=this.pageTurningSpeed*Math.abs(n-o);if(o<this._pages.length){if(this._isScrollable(i,n,o))return void this.scrollToPage(o,r);var a=this._calculateTouchMoveVelocity();if(this._isQuicklyScrollable(a))return void this.scrollToPage(o,r)}this.scrollToPage(n,r)}}},{key:"sizeMode",get:function(){return this._sizeMode},set:function(t){this._sizeMode!==t&&(this._sizeMode=t,this._syncSizeMode())}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this._syncScrollDirection())}},{key:"scrollThreshold",get:function(){return this._scrollThreshold},set:function(t){this._scrollThreshold!==t&&(this._scrollThreshold=t)}},{key:"pageTurningEventTiming",get:function(){return this._pageTurningEventTiming},set:function(t){this._pageTurningEventTiming!==t&&(this._pageTurningEventTiming=t)}},{key:"indicator",get:function(){return this._indicator},set:function(t){this._indicator!==t&&(this._indicator=t,this.indicator&&this.indicator.setPageView(this))}},{key:"curPageIdx",get:function(){return this._curPageIdx}},{key:"verticalScrollBar",get:function(){return z(y(i.prototype),"verticalScrollBar",this)},set:function(t){I(y(i.prototype),"verticalScrollBar",t,this,!0)}},{key:"horizontalScrollBar",get:function(){return z(y(i.prototype),"horizontalScrollBar",this)},set:function(t){I(y(i.prototype),"horizontalScrollBar",t,this,!0)}}]),i}(Mu),S_.SizeMode=w_,S_.Direction=O_,S_.EventType=sc(E_,lu),a((u_=x_).prototype,"sizeMode",[Vp,Up],Object.getOwnPropertyDescriptor(u_.prototype,"sizeMode"),u_.prototype),a(u_.prototype,"direction",[Wp,Gp],Object.getOwnPropertyDescriptor(u_.prototype,"direction"),u_.prototype),a(u_.prototype,"scrollThreshold",[U,jp,Xp],Object.getOwnPropertyDescriptor(u_.prototype,"scrollThreshold"),u_.prototype),a(u_.prototype,"pageTurningEventTiming",[U,Yp,Zp],Object.getOwnPropertyDescriptor(u_.prototype,"pageTurningEventTiming"),u_.prototype),a(u_.prototype,"indicator",[qp,$p],Object.getOwnPropertyDescriptor(u_.prototype,"indicator"),u_.prototype),c_=a(u_.prototype,"autoPageTurningThreshold",[c,Kp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),a(u_.prototype,"verticalScrollBar",[Qp,dt,Jp],Object.getOwnPropertyDescriptor(u_.prototype,"verticalScrollBar"),u_.prototype),a(u_.prototype,"horizontalScrollBar",[t_,dt,e_],Object.getOwnPropertyDescriptor(u_.prototype,"horizontalScrollBar"),u_.prototype),p_=a(u_.prototype,"horizontal",[dt,c,i_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),__=a(u_.prototype,"vertical",[dt,c,n_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d_=a(u_.prototype,"cancelInnerEvents",[dt,c,o_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),f_=a(u_.prototype,"scrollEvents",[r_,c,dt,a_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g_=a(u_.prototype,"pageTurningSpeed",[c,N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),y_=a(u_.prototype,"pageEvents",[s_,c,l_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v_=a(u_.prototype,"_sizeMode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w_.Unified}}),m_=a(u_.prototype,"_direction",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O_.Horizontal}}),b_=a(u_.prototype,"_scrollThreshold",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),T_=a(u_.prototype,"_pageTurningEventTiming",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),C_=a(u_.prototype,"_indicator",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h_=u_))||h_)||h_)||h_)||h_)),vd=function(e){return t({UIStaticBatch:e,UIStaticBatchComponent:e}),e}((k_=n("cc.UIStaticBatch"),L_=l(),P_=h(),R_=rt(110),z_=P(),I_=P(),B_=P(),H_=o(_t),M_=L(),N_=P(),k_(F_=L_(F_=P_(F_=R_((a((V_=function(t){function e(){var t,i;f(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=g(this,(t=y(e)).call.apply(t,[this].concat(o))))._init=!1,i._meshBuffer=null,i._dirty=!0,i._lastMeshBuffer=null,i._uiDrawBatchList=[],i}return _(e,t),d(e,[{key:"onLoad",value:function(){var t=this._getUI();if(t){var e=ne,i=new ee(t);i.initialize(e,this._arrivalMaxBuffer),this._meshBuffer=i}}},{key:"onDestroy",value:function(){z(y(e.prototype),"onDestroy",this).call(this),this._clearData(),this._meshBuffer&&(this._meshBuffer.destroy(),this._meshBuffer=null)}},{key:"updateAssembler",value:function(t){this._dirty&&(t.finishMergeBatches(),this._lastMeshBuffer=t.currBufferBatch,t.currBufferBatch=this._meshBuffer,t.currStaticRoot=this),this._init&&(t.finishMergeBatches(),t.commitStaticBatch(this))}},{key:"postUpdateAssembler",value:function(t){this._dirty&&(t.finishMergeBatches(),t.currBufferBatch=this._lastMeshBuffer,t.currStaticRoot=null,this._dirty=!1,this._init=!0,this.node._static=!0,this._meshBuffer.uploadData())}},{key:"markAsDirty",value:function(){this._getUI()&&(this.node._static=!1,this._dirty=!0,this._init=!1,this._clearData())}},{key:"_requireDrawBatch",value:function(){var t=new ie;return t.isStatic=!0,this._uiDrawBatchList.push(t),t}},{key:"_clearData",value:function(){if(this._meshBuffer){this._meshBuffer.reset();for(var t=this._getUI(),e=0;e<this._uiDrawBatchList.length;e++){this._uiDrawBatchList[e].destroy(t)}}this._uiDrawBatchList.length=0,this._init=!1}},{key:"_getUI",value:function(){return Qt.root&&Qt.root.ui?Qt.root.ui:(R(9301),null)}},{key:"_arrivalMaxBuffer",value:function(){R(9300)}},{key:"dstBlendFactor",get:function(){return this._dstBlendFactor},set:function(t){this._dstBlendFactor!==t&&(this._dstBlendFactor=t,this._updateBlendFunc())}},{key:"srcBlendFactor",get:function(){return this._srcBlendFactor},set:function(t){this._srcBlendFactor!==t&&(this._srcBlendFactor=t,this._updateBlendFunc())}},{key:"color",get:function(){return this._color},set:function(t){this._color!==t&&(this._color.set(t),this._updateColor(),this.markForUpdateRenderData())}},{key:"sharedMaterials",get:function(){return z(y(e.prototype),"sharedMaterials",this)},set:function(t){I(y(e.prototype),"sharedMaterials",t,this,!0)}},{key:"drawBatchList",get:function(){return this._uiDrawBatchList}}]),e}(Yt)).prototype,"dstBlendFactor",[dt,z_],Object.getOwnPropertyDescriptor(V_.prototype,"dstBlendFactor"),V_.prototype),a(V_.prototype,"srcBlendFactor",[dt,I_],Object.getOwnPropertyDescriptor(V_.prototype,"srcBlendFactor"),V_.prototype),a(V_.prototype,"color",[dt,B_],Object.getOwnPropertyDescriptor(V_.prototype,"color"),V_.prototype),a(V_.prototype,"sharedMaterials",[dt,H_,M_,N_],Object.getOwnPropertyDescriptor(V_.prototype,"sharedMaterials"),V_.prototype),F_=V_))||F_)||F_)||F_)||F_)),md=function(e){return t({UIOpacity:e,UIOpacityComponent:e}),e}(n("cc.UIOpacity")(U_=l()(U_=rt(110)(U_=h()(U_=r((a((W_=function(t){function e(){var t,i;f(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=g(this,(t=y(e)).call.apply(t,[this].concat(o))),v(i,"_opacity",G_,m(i)),i}return _(e,t),d(e,[{key:"onEnable",value:function(){this.node._uiProps.opacity=this._opacity/255}},{key:"onDisable",value:function(){this.node._uiProps.opacity=1}},{key:"opacity",get:function(){return this._opacity},set:function(t){this._opacity!==t&&(this._opacity=t,this.node._uiProps.opacity=t/255)}}]),e}(T)).prototype,"opacity",[N],Object.getOwnPropertyDescriptor(W_.prototype,"opacity"),W_.prototype),G_=a(W_.prototype,"_opacity",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),U_=W_))||U_)||U_)||U_)||U_)||U_),bd=function(e){return t({SafeArea:e,SafeAreaComponent:e}),e}((j_=n("cc.SafeArea"),X_=l(),Y_=rt(110),Z_=h(),q_=at(zp),j_($_=X_($_=Y_($_=r($_=Z_($_=q_($_=function(t){function e(){return f(this,e),g(this,y(e).apply(this,arguments))}return _(e,t),d(e,[{key:"onEnable",value:function(){this.updateArea(),jt.on("canvas-resize",this.updateArea,this)}},{key:"onDisable",value:function(){jt.off("canvas-resize",this.updateArea,this)}},{key:"updateArea",value:function(){var t=this.node.getComponent(zp),e=this.node.getComponent(st);if(t&&e){var i=s.winSize,n=s.sys;t.updateAlignment();var o=this.node.position,r=e.anchorPoint;t.isAlignTop=t.isAlignBottom=t.isAlignLeft=t.isAlignRight=!0;var a=i.width,l=i.height,h=n.getSafeAreaRect();console.log(h),t.top=l-h.y-h.height,t.bottom=h.y,t.left=h.x,t.right=a-h.x-h.width,t.updateAlignment();var u=this.node.position,c=r.x-(u.x-o.x)/e.width,p=r.y-(u.y-o.y)/e.height;e.setAnchorPoint(c,p),t.enabled=!0}}}]),e}(T))||$_)||$_)||$_)||$_)||$_)||$_)),Td=function(e){return t({UICoordinateTracker:e,UICoordinateTrackerComponent:e}),e}((K_=n("cc.UICoordinateTracker"),Q_=l(),J_=h(),td=rt(110),ed=o(lt),id=u(),nd=o(Wt),od=u(),rd=u(),ad=u(),sd=o([Jt]),ld=u(),K_(hd=Q_(hd=J_(hd=td((a((ud=function(t){function i(){var t,n;f(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=g(this,(t=y(i)).call.apply(t,[this].concat(r))),v(n,"syncEvents",cd,m(n)),v(n,"_target",pd,m(n)),v(n,"_camera",_d,m(n)),v(n,"_useScale",dd,m(n)),v(n,"_distance",fd,m(n)),n._transformPos=new e,n._viewPos=new e,n._canMove=!0,n._lastWPos=new e,n._lastCameraPos=new e,n}return _(i,t),d(i,[{key:"onEnable",value:function(){this._checkCanMove()}},{key:"update",value:function(){var t=this.node.worldPosition,i=this._camera;if(this._canMove&&i&&i.camera&&(!this._lastWPos.equals(t)||!this._lastCameraPos.equals(i.node.worldPosition))&&(this._lastWPos.set(t),this._lastCameraPos.set(i.node.worldPosition),i.camera.update(),i.convertToUINode(t,this._target,this._transformPos),this._useScale&&e.transformMat4(this._viewPos,this.node.worldPosition,i.camera.matView),this.syncEvents.length>0)){var n=this._distance/Math.abs(this._viewPos.z);Jt.emitEvents(this.syncEvents,this._transformPos,n)}}},{key:"_checkCanMove",value:function(){this._canMove=!(!this._camera||!this._target)}},{key:"target",get:function(){return this._target},set:function(t){this._target!==t&&(this._target=t,this._checkCanMove())}},{key:"camera",get:function(){return this._camera},set:function(t){this._camera!==t&&(this._camera=t,this._checkCanMove())}},{key:"useScale",get:function(){return this._useScale},set:function(t){this._useScale!==t&&(this._useScale=t)}},{key:"distance",get:function(){return this._distance},set:function(t){this._distance!==t&&(this._distance=t)}}]),i}(T)).prototype,"target",[ed,id],Object.getOwnPropertyDescriptor(ud.prototype,"target"),ud.prototype),a(ud.prototype,"camera",[nd,od],Object.getOwnPropertyDescriptor(ud.prototype,"camera"),ud.prototype),a(ud.prototype,"useScale",[rd],Object.getOwnPropertyDescriptor(ud.prototype,"useScale"),ud.prototype),a(ud.prototype,"distance",[ad],Object.getOwnPropertyDescriptor(ud.prototype,"distance"),ud.prototype),cd=a(ud.prototype,"syncEvents",[sd,c,ld],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pd=a(ud.prototype,"_target",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_d=a(ud.prototype,"_camera",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dd=a(ud.prototype,"_useScale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),fd=a(ud.prototype,"_distance",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),hd=ud))||hd)||hd)||hd)||hd)),Cd=[ct.TOUCH_START,ct.TOUCH_END,ct.TOUCH_MOVE,ct.MOUSE_DOWN,ct.MOUSE_MOVE,ct.MOUSE_UP,ct.MOUSE_ENTER,ct.MOUSE_LEAVE,ct.MOUSE_WHEEL];function Sd(t){t.propagationStopped=!0}var xd=function(e){return t({BlockInputEvents:e,BlockInputEventsComponent:e}),e}(n("cc.BlockInputEvents")(gd=l()(gd=h()(gd=function(t){function e(){return f(this,e),g(this,y(e).apply(this,arguments))}return _(e,t),d(e,[{key:"onEnable",value:function(){for(var t=0;t<Cd.length;t++)this.node.on(Cd[t],Sd,this)}},{key:"onDisable",value:function(){for(var t=0;t<Cd.length;t++)this.node.off(Cd[t],Sd,this)}}]),e}(T))||gd)||gd)||gd),wd=new e,Od=new F,Ed=new e,Dd=new e(1,1,1);function Ad(t,i){var n,o=i.target,r=Ed,a=Dd;if(o?pp(t,n=o,r,a):n=t.parent,n.getComponent(st)){var s=cp(n),l=n instanceof Rt,h=l?Od:n.getComponent(st).anchorPoint,u=l;t.getPosition(wd);var c=t._uiProps.uiTransformComp,p=wd.x,_=wd.y,d=c.anchorPoint,f=t.getScale();if(i.alignFlags&ap.HORIZONTAL){var g=0,y=0,v=s.width;u?(g=Xt.left.x,y=Xt.right.x):y=(g=-h.x*v)+v,g+=i.isAbsoluteLeft?i.left:i.left*v,y-=i.isAbsoluteRight?i.right:i.right*v,o&&(g+=r.x,g*=a.x,y+=r.x,y*=a.x);var m=0,b=d.x,T=f.x;if(T<0&&(b=1-b,T=-T),i.isStretchWidth)m=y-g,0!==T&&(c.width=m/T),p=g+b*m;else if(m=c.width*T,i.isAlignHorizontalCenter){var C=i.isAbsoluteHorizontalCenter?i.horizontalCenter:i.horizontalCenter*v,S=(.5-h.x)*s.width;o&&(C*=a.x,S+=r.x,S*=a.x),p=S+(b-.5)*m+C}else p=i.isAlignLeft?g+b*m:y+(b-1)*m;i._lastSize.width=m}if(i.alignFlags&ap.VERTICAL){var x=0,w=0,O=s.height;u?(w=Xt.bottom.y,x=Xt.top.y):x=(w=-h.y*O)+O,w+=i.isAbsoluteBottom?i.bottom:i.bottom*O,x-=i.isAbsoluteTop?i.top:i.top*O,o&&(w+=r.y,w*=a.y,x+=r.y,x*=a.y);var E=0,D=d.y,A=f.y;if(A<0&&(D=1-D,A=-A),i.isStretchHeight)E=x-w,0!==A&&(c.height=E/A),_=w+D*E;else if(E=c.height*A,i.isAlignVerticalCenter){var k=i.isAbsoluteVerticalCenter?i.verticalCenter:i.verticalCenter*O,L=(.5-h.y)*s.height;o&&(k*=a.y,L+=r.y,L*=a.y),_=L+(D-.5)*E+k}else _=i.isAlignBottom?w+D*E:x+(D-1)*E;i._lastSize.height=E}t.setPosition(p,_,wd.z),e.set(i._lastPos,p,_,wd.z)}}function kd(){var t=Qt.getScene();if(t){if(Rd.isAligning=!0,Rd._nodesOrderDirty)Ld.length=0,function t(e){var i=e.getComponent(zp);if(i)if(Ad(e,i),i.alignMode!==rp.ALWAYS)i.enabled=!1;else{if(!s.isValid(e,!0))return;Ld.push(i)}for(var n,o=e.children,r=Y(o);!(n=r()).done;){var a=n.value;a.active&&t(a)}}(t),Rd._nodesOrderDirty=!1;else{var e=null,i=Rd._activeWidgetsIterator;for(i.i=0;i.i<Ld.length;++i.i)(e=Ld[i.i])._dirty&&(Ad(e.node,e),e._dirty=!1)}Rd.isAligning=!1}}var Ld=[];var Pd=[],Rd=t("widgetManager",s._widgetManager={isAligning:!1,_nodesOrderDirty:!1,_activeWidgetsIterator:new K.MutableForwardIterator(Ld),animationState:null,init:function(){if(Qt.on(te.EVENT_AFTER_UPDATE,kd),H.isMobile){var t=this.onResized.bind(this);window.addEventListener("resize",t),window.addEventListener("orientationchange",t)}else Kt.instance.on("design-resolution-changed",this.onResized,this)},add:function(t){this._nodesOrderDirty=!0;var e=Qt.root.ui.getScreen(t.node._uiProps.uiTransformComp.visibility);e&&-1===Pd.indexOf(e)&&(Pd.push(e),e.node.on("design-resolution-changed",this.onResized,this))},remove:function(t){this._activeWidgetsIterator.remove(t)},onResized:function(){var t=Qt.getScene();t&&this.refreshWidgetOnResized(t)},refreshWidgetOnResized:function(t){if(lt.isNode(t)){var e=t.getComponent(zp);e&&e.alignMode===rp.ON_WINDOW_RESIZE&&(e.enabled=!0)}for(var i,n=t.children,o=Y(n);!(i=o()).done;){var r=i.value;this.refreshWidgetOnResized(r)}},updateOffsetsToStayPut:function(t,i){function n(t,e){return Math.abs(t-e)>1e-10?e:t}var o=t.node,r=o.parent;if(r){var a=new e,s=new e(1,1,1);if(t.target&&pp(o,r=t.target,a,s),!i)return;var l=r._uiProps.uiTransformComp,h=o._uiProps.uiTransformComp;if(!l)return void R(6501,t.node.name);var u=l.anchorPoint,c=cp(r),p=h.anchorPoint,_=o.getPosition(),d=ap,f=o.getScale(),g=0;if(i&d.LEFT){var y=-u.x*c.width;y+=a.x,y*=s.x,g=_.x-p.x*h.width*f.x-y,t.isAbsoluteLeft||(g/=c.width),g/=s.x,t.left=n(t.left,g)}if(i&d.RIGHT){var v=(1-u.x)*c.width;v+=a.x,g=(v*=s.x)-(_.x+(1-p.x)*h.width*f.x),t.isAbsoluteRight||(g/=c.width),g/=s.x,t.right=n(t.right,g)}if(i&d.TOP){var m=(1-u.y)*c.height;m+=a.y,g=(m*=s.y)-(_.y+(1-p.y)*h.height*f.y),t.isAbsoluteTop||(g/=c.height),g/=s.y,t.top=n(t.top,g)}if(i&d.BOT){var b=-u.y*c.height;b+=a.y,b*=s.y,g=_.y-p.y*h.height*f.y-b,t.isAbsoluteBottom||(g/=c.height),g/=s.y,t.bottom=n(t.bottom,g)}}},updateAlignment:function t(e){var i=e.parent;i&&lt.isNode(i)&&t(i);var n=e.getComponent(zp);n&&i&&Ad(e,n)},AlignMode:rp,AlignFlags:ap});Qt.on(te.EVENT_INIT,(function(){Rd.init()}));var zd=function t(e,i,n){f(this,t),this.i=void 0,this.x=void 0,this.y=void 0,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1,this.i=e,this.x=i,this.y=n};function Id(t,e,i,n,o){var r=0,a=null;if(o===function(t,e,i,n){for(var o=0,r=e,a=i-n;r<i;r+=n)o+=(t[a]-t[r])*(t[r+1]+t[a+1]),a=r;return o}(t,e,i,n)>0)for(r=e;r<i;r+=n)a=tf(r,t[r],t[r+1],a);else for(r=i-n;r>=e;r-=n)a=tf(r,t[r],t[r+1],a);return a&&$d(a,a.next)&&(ef(a),a=a.next),a}function Bd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return t;e||(e=t);var i=t,n=!1;do{if(n=!1,i.steiner||!$d(i,i.next)&&0!==qd(i.prev,i,i.next))i=i.next;else{if(ef(i),(i=e=i.prev)===i.next)return null;n=!0}}while(n||i!==e);return e}function Hd(t,e,i,n,o,r){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(t){!a&&r&&Gd(t,n,o,r);for(var s=t,l=null,h=null;t.prev!==t.next;)if(l=t.prev,h=t.next,r?Nd(t,n,o,r):Md(t))e.push(l.i/i),e.push(t.i/i),e.push(h.i/i),ef(t),t=h.next,s=h.next;else if((t=h)===s){a?1===a?Hd(t=Fd(t,e,i),e,i,n,o,r,2):2===a&&Vd(t,e,i,n,o,r):Hd(Bd(t),e,i,n,o,r,1);break}}}function Md(t){var e=t.prev,i=t,n=t.next;if(qd(e,i,n)>=0)return!1;for(var o=t.next.next;o!==t.prev;){if(Yd(e.x,e.y,i.x,i.y,n.x,n.y,o.x,o.y)&&qd(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function Nd(t,e,i,n){var o=t.prev,r=t,a=t.next;if(qd(o,r,a)>=0)return!1;for(var s=o.x<r.x?o.x<a.x?o.x:a.x:r.x<a.x?r.x:a.x,l=o.y<r.y?o.y<a.y?o.y:a.y:r.y<a.y?r.y:a.y,h=o.x>r.x?o.x>a.x?o.x:a.x:r.x>a.x?r.x:a.x,u=o.y>r.y?o.y>a.y?o.y:a.y:r.y>a.y?r.y:a.y,c=jd(s,l,e,i,n),p=jd(h,u,e,i,n),_=t.nextZ;_&&_.z<=p;){if(_!==t.prev&&_!==t.next&&Yd(o.x,o.y,r.x,r.y,a.x,a.y,_.x,_.y)&&qd(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(_=t.prevZ;_&&_.z>=c;){if(_!==t.prev&&_!==t.next&&Yd(o.x,o.y,r.x,r.y,a.x,a.y,_.x,_.y)&&qd(_.prev,_,_.next)>=0)return!1;_=_.prevZ}return!0}function Fd(t,e,i){var n=t;do{var o=n.prev,r=n.next.next;!$d(o,r)&&Kd(o,n,n.next,r)&&Qd(o,r)&&Qd(r,o)&&(e.push(o.i/i),e.push(n.i/i),e.push(r.i/i),ef(n),ef(n.next),n=t=r),n=n.next}while(n!==t);return n}function Vd(t,e,i,n,o,r){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Zd(a,s)){var l=Jd(a,s);return a=Bd(a,a.next),l=Bd(l,l.next),Hd(a,e,i,n,o,r),void Hd(l,e,i,n,o,r)}s=s.next}a=a.next}while(a!==t)}function Ud(t,e){return t.x-e.x}function Wd(t,e){if(e=function(t,e){var i=e,n=t.x,o=t.y,r=-1/0,a=null;do{if(o<=i.y&&o>=i.next.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>r){if(r=s,s===n){if(o===i.y)return i;if(o===i.next.y)return i.next}a=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!a)return null;if(n===r)return a.prev;var l,h=a,u=a.x,c=a.y,p=1/0;i=a.next;for(;i!==h;)n>=i.x&&i.x>=u&&Yd(o<c?n:r,o,u,c,o<c?r:n,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(n-i.x))<p||l===p&&i.x>a.x)&&Qd(i,t)&&(a=i,p=l),i=i.next;return a}(t,e)){var i=Jd(e,t);Bd(i,i.next)}}function Gd(t,e,i,n){var o=t;do{null===o.z&&(o.z=jd(o.x,o.y,e,i,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e=0,i=null,n=null,o=null,r=null,a=0,s=0,l=0,h=1;do{for(i=t,t=null,r=null,a=0;i;){for(a++,n=i,s=0,e=0;e<h&&(s++,n=n.nextZ);e++);for(l=h;s>0||l>0&&n;)0===s?(o=n,n=n.nextZ,l--):0!==l&&n?i.z<=n.z?(o=i,i=i.nextZ,s--):(o=n,n=n.nextZ,l--):(o=i,i=i.nextZ,s--),r?r.nextZ=o:t=o,o.prevZ=r,r=o;i=n}r.nextZ=null,h*=2}while(a>1)}(o)}function jd(t,e,i,n,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)/o)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)/o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Xd(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function Yd(t,e,i,n,o,r,a,s){return(o-a)*(e-s)-(t-a)*(r-s)>=0&&(t-a)*(n-s)-(i-a)*(e-s)>=0&&(i-a)*(r-s)-(o-a)*(n-s)>=0}function Zd(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Kd(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&Qd(t,e)&&Qd(e,t)&&function(t,e){var i=t,n=!1,o=(t.x+e.x)/2,r=(t.y+e.y)/2;do{i.y>r!=i.next.y>r&&o<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)}function qd(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function $d(t,e){return t.x===e.x&&t.y===e.y}function Kd(t,e,i,n){return!!($d(t,e)&&$d(i,n)||$d(t,n)&&$d(i,e))||qd(t,e,i)>0!=qd(t,e,n)>0&&qd(i,n,t)>0!=qd(i,n,e)>0}function Qd(t,e){return qd(t.prev,t,t.next)<0?qd(t,e,t.next)>=0&&qd(t,t.prev,e)>=0:qd(t,e,t.prev)<0||qd(t,t.next,e)<0}function Jd(t,e){var i=new zd(t.i,t.x,t.y),n=new zd(e.i,e.x,e.y),o=t.next,r=e.prev;return t.next=e,e.prev=t,i.next=o,o.prev=i,n.next=i,i.prev=n,r.next=n,n.prev=r,n}function tf(t,e,i,n){var o=new zd(t,e,i);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function ef(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function nf(t,e,i){i=i||3;var n=e?e.length:0,o=n?e[0]*i:t.length,r=Id(t,0,o,i,!0),a=[];if(!r)return a;var s=0,l=0,h=0,u=0,c=0,p=0,_=0;if(n&&(r=function(t,e,i,n){var o,r=[],a=0,s=null;for(a=0,o=e.length;a<o;a++)(s=Id(t,e[a]*n,a<o-1?e[a+1]*n:t.length,n,!1))&&(s===s.next&&(s.steiner=!0),r.push(Xd(s)));if(r.sort(Ud),!i)return i;for(a=0;a<r.length;a++)Wd(r[a],i),i=Bd(i,i.next);return i}(t,e,r,i)),t.length>80*i){s=h=t[0],l=u=t[1];for(var d=i;d<o;d+=i)(c=t[d])<s&&(s=c),(p=t[d+1])<l&&(l=p),c>h&&(h=c),p>u&&(u=p);_=Math.max(h-s,u-l)}return Hd(r,a,i,s,l,_),a}var of=Math.PI,rf=Math.min,af=Math.max,sf=Math.cos,lf=Math.sin,hf=Math.abs,uf=Math.sign,cf=.5522847493;function pf(t,e,i,n,o){t.moveTo(e-n,i),t.bezierCurveTo(e-n,i+o*cf,e-n*cf,i+o,e,i+o),t.bezierCurveTo(e+n*cf,i+o,e+n,i+o*cf,e+n,i),t.bezierCurveTo(e+n,i-o*cf,e+n*cf,i-o,e,i-o),t.bezierCurveTo(e-n*cf,i-o,e-n,i-o*cf,e-n,i),t.close()}for(var _f=function(t){function e(t,i){var n;return f(this,e),(n=g(this,y(e).call(this,t,i))).dx=0,n.dy=0,n.dmx=0,n.dmy=0,n.flags=0,n.len=0,n.reset(),n}return _(e,t),d(e,[{key:"reset",value:function(){this.dx=0,this.dy=0,this.dmx=0,this.dmy=0,this.flags=0,this.len=0}}]),e}(F),df=function(){function t(){f(this,t),this.closed=!1,this.bevel=0,this.complex=!0,this.points=[],this.reset()}return d(t,[{key:"reset",value:function(){this.closed=!1,this.bevel=0,this.complex=!0,this.points?this.points.length=0:this.points=[]}}]),t}(),ff=function(){function t(){f(this,t),this.dataOffset=0,this.updatePathOffset=!1,this.pathLength=0,this.pathOffset=0,this.paths=[],this.tessTol=.25,this.distTol=.01,this.fillColor=p.WHITE.clone(),this.lineCap=fa.BUTT,this.strokeColor=p.BLACK.clone(),this.lineJoin=ga.MITER,this.lineWidth=0,this.pointsOffset=0,this._commandX=0,this._commandY=0,this._points=[],this._renderDataPool=new zt((function(){return new It}),16),this._renderDataList=[],this._curPath=null}return d(t,[{key:"moveTo",value:function(t,e){this.updatePathOffset&&(this.pathOffset=this.pathLength,this.updatePathOffset=!1),this._addPath(),this.addPoint(t,e,ya.PT_CORNER),this._commandX=t,this._commandY=e}},{key:"lineTo",value:function(t,e){this.addPoint(t,e,ya.PT_CORNER),this._commandX=t,this._commandY=e}},{key:"bezierCurveTo",value:function(t,e,i,n,o,r){var a=this._curPath,s=a.points[a.points.length-1];s&&(s.x!==t||s.y!==e||i!==o||n!==r?(!function t(e,i,n,o,r,a,s,l,h,u,c){var p,_,d,f,g,y,v,m,b,T,C,S,x,w,O,E;u>10||(g=.5*(a+l),y=.5*(s+h),v=.5*((p=.5*(i+o))+(d=.5*(o+a))),m=.5*((_=.5*(n+r))+(f=.5*(r+s))),((O=hf((o-l)*(w=h-n)-(r-h)*(x=l-i)))+(E=hf((a-l)*w-(s-h)*x)))*(O+E)<e.tessTol*(x*x+w*w)?e.addPoint(l,h,0===c?c|ya.PT_BEVEL:c):(t(e,i,n,p,_,v,m,C=.5*(v+(b=.5*(d+g))),S=.5*(m+(T=.5*(f+y))),u+1,0),t(e,C,S,b,T,g,y,l,h,u+1,c)))}(this,s.x,s.y,t,e,i,n,o,r,0,ya.PT_CORNER),this._commandX=o,this._commandY=r):this.lineTo(o,r))}},{key:"quadraticCurveTo",value:function(t,e,i,n){var o=this._commandX,r=this._commandY;this.bezierCurveTo(o+2/3*(t-o),r+2/3*(e-r),i+2/3*(t-i),n+2/3*(e-n),i,n)}},{key:"arc",value:function(t,e,i,n,o,r){!function(t,e,i,n,o,r,a){var s,l,h=0,u=0,c=0,p=0,_=0,d=0,f=0,g=0,y=0,v=0,m=0,b=0,T=0,C=0;if(u=r-o,a=a||!1)if(hf(u)>=2*of)u=2*of;else for(;u<0;)u+=2*of;else if(hf(u)>=2*of)u=2*-of;else for(;u>0;)u-=2*of;for(l=0|af(1,rf(hf(u)/(.5*of)+.5,5)),c=hf(4/3*(1-sf(s=u/l/2))/lf(s)),a||(c=-c),C=0;C<=l;C++)d=e+(p=sf(h=o+u*(C/l)))*n,f=i+(_=lf(h))*n,g=-_*n*c,y=p*n*c,0===C?t.moveTo(d,f):t.bezierCurveTo(v+b,m+T,d-g,f-y,d,f),v=d,m=f,b=g,T=y}(this,t,e,i,n,o,r)}},{key:"ellipse",value:function(t,e,i,n){pf(this,t,e,i,n),this._curPath.complex=!1}},{key:"circle",value:function(t,e,i){pf(this,t,e,i,i),this._curPath.complex=!1}},{key:"rect",value:function(t,e,i,n){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.close(),this._curPath.complex=!1}},{key:"roundRect",value:function(t,e,i,n,o){!function(t,e,i,n,o,r){if(r<.1)t.rect(e,i,n,o);else{var a=rf(r,.5*hf(n))*uf(n),s=rf(r,.5*hf(o))*uf(o);t.moveTo(e,i+s),t.lineTo(e,i+o-s),t.bezierCurveTo(e,i+o-s*(1-cf),e+a*(1-cf),i+o,e+a,i+o),t.lineTo(e+n-a,i+o),t.bezierCurveTo(e+n-a*(1-cf),i+o,e+n,i+o-s*(1-cf),e+n,i+o-s),t.lineTo(e+n,i+s),t.bezierCurveTo(e+n,i+s*(1-cf),e+n-a*(1-cf),i,e+n-a,i),t.lineTo(e+a,i),t.bezierCurveTo(e+a*(1-cf),i,e,i+s*(1-cf),e,i+s),t.close()}}(this,t,e,i,n,o),this._curPath.complex=!1}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pathLength=0,this.pathOffset=0,this.pointsOffset=0,this.dataOffset=0,this._curPath=null,this.paths.length=0,this._points.length=0;for(var e=this._renderDataList,i=0,n=e.length;i<n;i++){var o=e[i];o&&o.reset()}this._renderDataList.length=0,t&&this._renderDataPool.reset()}},{key:"close",value:function(){this._curPath.closed=!0}},{key:"requestRenderData",value:function(){var t=this._renderDataPool.add();return this._renderDataList.push(t),t}},{key:"getRenderData",value:function(){return 0===this._renderDataList.length&&this.requestRenderData(),this._renderDataList}},{key:"addPoint",value:function(t,e,i){var n=this._curPath;if(n){var o=this._points,r=n.points,a=o[this.pointsOffset++];a?(a.x=t,a.y=e):(a=new _f(t,e),o.push(a)),a.flags=i,r.push(a)}}},{key:"_addPath",value:function(){var t=this.pathLength,e=this.paths[t];return e?e.reset():(e=new df,this.paths.push(e)),this.pathLength++,this._curPath=e,e}}]),t}(),gf=Math.PI,yf=Math.min,vf=Math.max,mf=Math.ceil,bf=Math.acos,Tf=Math.cos,Cf=Math.sin,Sf=Math.atan2,xf=[{name:Bt.ATTR_POSITION,format:Ht.RGB32F},{name:Bt.ATTR_COLOR,format:Ht.RGBA32F}],wf={dist:{name:"a_dist",format:Ht.R32F}},Of=[],Ef=[],Df=[],Af=[],kf=null,Lf=null,Pf=new p,Rf=[],zf=0;zf<4;zf++)Rf.push(new e);function If(t,e,i){return t<e?e:t>i?i:t}var Bf={useModel:!0,createImpl:function(t){return new ff},updateRenderData:function(t){for(var e=t.impl?t.impl.getRenderData():[],i=0,n=e.length;i<n;i++)e[i].material=t.getUIMaterialInstance()},fillBuffers:function(t,e){},renderIA:function(t,e){},getRenderData:function(t,e){if(!Lf)return null;var i=Lf.getRenderData(),n=i[Lf.dataOffset];if(!n)return null;var o=n,r=o?o.vertexCount+e:0;return(r>65535||3*r>131070)&&(++Lf.dataOffset,Lf.dataOffset<i.length?n=i[Lf.dataOffset]:(n=Lf.requestRenderData(),i[Lf.dataOffset]=n),n.material=t.getUIMaterialInstance(),o=n),o&&o.vertexCount<r&&o.request(e,3*e),n},stroke:function(t){p.copy(Pf,t.strokeColor),t.impl&&(this._flattenPaths(t.impl),this._expandStroke(t),t.impl.updatePathOffset=!0,this.end(t))},fill:function(t){p.copy(Pf,t.fillColor),this._expandFill(t),t.impl&&(t.impl.updatePathOffset=!0),this.end(t)},end:function(t){t.model&&t.model.inited&&t.model.destroy();var e=t.impl,i=Mt.TRIANGLE_LIST,n=e&&e.getRenderData();if(n){var o=0;Of.length=0,Af.length=0,Ef.length=0,Df.length=0;for(var r,a=Y(n);!(r=a()).done;){var s=r.value,l=s.byteCount>>2,h=s.vData;for(o=0;o<l;)Of.push(h[o++]),Of.push(h[o++]),Of.push(h[o++]),Ef.push(h[o++]),Ef.push(h[o++]),Ef.push(h[o++]),Ef.push(h[o++]),Af.push(h[o++]);l=s.indicesCount;var u=s.iData;for(o=0;o<l;)Df.push(u[o++])}if((0!==Of.length||0!==Af.length||0!==Ef.length)&&0!==Df.length){var c=Nt({primitiveMode:i,positions:Of,colors:Ef,attributes:xf,customAttributes:[{attr:wf.dist,values:Af}],indices:Df},void 0,{calculateBounds:!1});t.model.initialize(t.node),t.model.initSubModel(0,c.renderingSubMeshes[0],t.getUIMaterialInstance()),t.markForUpdateRenderData()}}},_expandStroke:function(t){var e=.5*t.lineWidth,i=t.lineCap,n=t.lineJoin,o=t.miterLimit;if(Lf=t.impl){var r=function(t,e,i){var n=2*bf(t/(t+i));return vf(2,mf(e/n))}(e,gf,Lf.tessTol);this._calculateJoins(Lf,e,n,o);for(var a=Lf.paths,s=0,l=Lf.pathOffset,h=Lf.pathLength;l<h;l++){var u=a[l],c=u.points.length;n===ga.ROUND?s+=2*(c+u.bevel*(r+2)+1):s+=2*(c+5*u.bevel+1),u.closed||(i===fa.ROUND?s+=2*(2*r+2):s+=12)}var p=kf=this.getRenderData(t,s);if(p){for(var _=p.vData,d=p.iData,f=Lf.pathOffset,g=Lf.pathLength;f<g;f++){var y=a[f],v=y.points,m=v.length,b=p.vertexStart,T=void 0,C=void 0,S=0,x=0,w=y.closed;if(w?(T=v[m-1],C=v[0],S=0,x=m):(T=v[0],C=v[1],S=1,x=m-1),!w){var O=new _f(C.x,C.y);O.subtract(T),O.normalize();var E=O.x,D=O.y;i===fa.BUTT?this._buttCapStart(T,E,D,e,0):i===fa.SQUARE?this._buttCapStart(T,E,D,e,e):i===fa.ROUND&&this._roundCapStart(T,E,D,e,r)}for(var A=S;A<x;++A)n===ga.ROUND?this._roundJoin(T,C,e,e,r):0!=(C.flags&(ya.PT_BEVEL|ya.PT_INNERBEVEL))?this._bevelJoin(T,C,e,e):(this._vSet(C.x+C.dmx*e,C.y+C.dmy*e,1),this._vSet(C.x-C.dmx*e,C.y-C.dmy*e,-1)),T=C,C=v[A+1];if(w){var k=8*b;this._vSet(_[k],_[k+1],1),this._vSet(_[k+8],_[k+8+1],-1)}else{var L=new _f(C.x,C.y);L.subtract(T),L.normalize();var P=L.x,R=L.y;i===fa.BUTT?this._buttCapEnd(C,P,R,e,0):i===fa.SQUARE?this._buttCapEnd(C,P,R,e,e):i===fa.ROUND&&this._roundCapEnd(C,P,R,e,r)}for(var z=p.indicesStart,I=b+2,B=p.vertexStart;I<B;I++)d[z++]=I-2,d[z++]=I-1,d[z++]=I;if(p.indicesStart=z,z!==p.indicesCount){var H=new Array(p.indicesCount-z);p.iData.set(H,z)}}kf=null,Lf=null}}},_expandFill:function(t){if(Lf=t.impl){for(var e=Lf.paths,i=0,n=Lf.pathOffset,o=Lf.pathLength;n<o;n++){i+=e[n].points.length}var r=kf=this.getRenderData(t,i);if(r){for(var a=r,s=a.vData,l=a.iData,h=Lf.pathOffset,u=Lf.pathLength;h<u;h++){var c=e[h],p=c.points,_=p.length;if(0!==_){for(var d=r.vertexStart,f=0;f<_;++f)this._vSet(p[f].x,p[f].y);var g=r.indicesStart;if(c.complex){for(var y=[],v=d,m=r.vertexStart;v<m;v++){var b=8*v;y.push(s[b++]),y.push(s[b++]),y.push(s[b++])}var T=nf(y,null,3);if(!T||0===T.length)continue;for(var C=0,S=T.length;C<S;C++)l[g++]=T[C]+d}else for(var x=d,w=d+2,O=a.vertexStart;w<O;w++)l[g++]=x,l[g++]=w-1,l[g++]=w;if(a.indicesStart=g,g!==a.indicesCount){var E=new Array(a.indicesCount-g);a.iData.set(E,g)}}}kf=null,Lf=null}}},_calculateJoins:function(t,e,i,n){var o=0;e>0&&(o=1/e);for(var r=t.paths,a=t.pathOffset,s=t.pathLength;a<s;a++){var l=r[a],h=l.points,u=h.length,c=h[u-1],p=h[0];l.bevel=0;for(var _=0;_<u;_++){var d,f,g=c.dy,y=-c.dx,v=p.dy,m=-p.dx;if(p.dmx=.5*(g+v),p.dmy=.5*(y+m),(d=p.dmx*p.dmx+p.dmy*p.dmy)>1e-6){var b=1/d;b>600&&(b=600),p.dmx*=b,p.dmy*=b}p.dx*c.dy-c.dx*p.dy>0&&(p.flags|=ya.PT_LEFT),d*(f=vf(11,yf(c.len,p.len)*o))*f<1&&(p.flags|=ya.PT_INNERBEVEL),p.flags&ya.PT_CORNER&&(d*n*n<1||i===ga.BEVEL||i===ga.ROUND)&&(p.flags|=ya.PT_BEVEL),0!=(p.flags&(ya.PT_BEVEL|ya.PT_INNERBEVEL))&&l.bevel++,c=p,p=h[_+1]}}},_flattenPaths:function(t){for(var e=t.paths,i=t.pathOffset,n=t.pathLength;i<n;i++){var o=e[i],r=o.points,a=r[r.length-1],s=r[0];a.equals(s)&&(o.closed=!0,r.pop(),a=r[r.length-1]);for(var l=0,h=r.length;l<h;l++){var u=new _f(s.x,s.y);u.subtract(a),a.len=u.length(),(u.x||u.y)&&u.normalize(),a.dx=u.x,a.dy=u.y,a=s,s=r[l+1]}}},_chooseBevel:function(t,e,i,n){var o=i.x,r=i.y,a=0,s=0,l=0,h=0;return 0!==t?(a=o+e.dy*n,s=r-e.dx*n,l=o+i.dy*n,h=r-i.dx*n):(a=l=o+i.dmx*n,s=h=r+i.dmy*n),[a,s,l,h]},_buttCapStart:function(t,e,i,n,o){var r=t.x-e*o,a=t.y-i*o,s=i,l=-e;this._vSet(r+s*n,a+l*n,1),this._vSet(r-s*n,a-l*n,-1)},_buttCapEnd:function(t,e,i,n,o){var r=t.x+e*o,a=t.y+i*o,s=i,l=-e;this._vSet(r+s*n,a+l*n,1),this._vSet(r-s*n,a-l*n,-1)},_roundCapStart:function(t,e,i,n,o){for(var r=t.x,a=t.y,s=i,l=-e,h=0;h<o;h++){var u=h/(o-1)*gf,c=Tf(u)*n,p=Cf(u)*n;this._vSet(r-s*c-e*p,a-l*c-i*p,1),this._vSet(r,a,0)}this._vSet(r+s*n,a+l*n,1),this._vSet(r-s*n,a-l*n,-1)},_roundCapEnd:function(t,e,i,n,o){var r=t.x,a=t.y,s=i,l=-e;this._vSet(r+s*n,a+l*n,1),this._vSet(r-s*n,a-l*n,-1);for(var h=0;h<o;h++){var u=h/(o-1)*gf,c=Tf(u)*n,p=Cf(u)*n;this._vSet(r,a,0),this._vSet(r-s*c+e*p,a-l*c+i*p,1)}},_roundJoin:function(t,e,i,n,o){var r=t.dy,a=-t.dx,s=e.dy,l=-e.dx,h=e.x,u=e.y;if(0!=(e.flags&ya.PT_LEFT)){var c=this._chooseBevel(e.flags&ya.PT_INNERBEVEL,t,e,i),p=c[0],_=c[1],d=c[2],f=c[3],g=Sf(-a,-r),y=Sf(-l,-s);y>g&&(y-=2*gf),this._vSet(p,_,1),this._vSet(h-r*n,e.y-a*n,-1);for(var v=If(mf((g-y)/gf)*o,2,o),m=0;m<v;m++){var b=g+m/(v-1)*(y-g),T=h+Tf(b)*n,C=u+Cf(b)*n;this._vSet(h,u,0),this._vSet(T,C,-1)}this._vSet(d,f,1),this._vSet(h-s*n,u-l*n,-1)}else{var S=this._chooseBevel(e.flags&ya.PT_INNERBEVEL,t,e,-n),x=S[0],w=S[1],O=S[2],E=S[3],D=Sf(a,r),A=Sf(l,s);A<D&&(A+=2*gf),this._vSet(h+r*n,u+a*n,1),this._vSet(x,w,-1);for(var k=If(mf((A-D)/gf)*o,2,o),L=0;L<k;L++){var P=D+L/(k-1)*(A-D),R=h+Tf(P)*i,z=u+Cf(P)*i;this._vSet(R,z,1),this._vSet(h,u,0)}this._vSet(h+s*n,u+l*n,1),this._vSet(O,E,-1)}},_bevelJoin:function(t,e,i,n){var o=0,r=0,a=0,s=0,l=0,h=0,u=0,c=0,p=t.dy,_=-t.dx,d=e.dy,f=-e.dx;if(e.flags&ya.PT_LEFT){var g=this._chooseBevel(e.flags&ya.PT_INNERBEVEL,t,e,i);l=g[0],h=g[1],u=g[2],c=g[3],this._vSet(l,h,1),this._vSet(e.x-p*n,e.y-_*n,-1),this._vSet(u,c,1),this._vSet(e.x-d*n,e.y-f*n,-1)}else{var y=this._chooseBevel(e.flags&ya.PT_INNERBEVEL,t,e,-n);o=y[0],r=y[1],a=y[2],s=y[3],this._vSet(e.x+p*i,e.y+_*i,1),this._vSet(o,r,-1),this._vSet(e.x+d*i,e.y+f*i,1),this._vSet(a,s,-1)}},_vSet:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(kf){var n=kf,o=8*n.vertexStart,r=n.vData;r[o++]=t,r[o++]=e,r[o++]=0,p.toArray(r,Pf,o),o+=4,r[o++]=i,n.vertexStart++}}},Hf=t("graphicsAssembler",{getAssembler:function(t){return Bf}});hs.Assembler=Hf;var Mf=function t(){f(this,t),this.u=0,this.v=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.textureID=0,this.validDefinition=!1,this.xAdvance=0},Nf=function(){function t(){f(this,t),this._letterDefinitions={}}return d(t,[{key:"addLetterDefinitions",value:function(t,e){this._letterDefinitions[t]=e}},{key:"cloneLetterDefinition",value:function(){for(var t={},e=0,i=Object.keys(this._letterDefinitions);e<i.length;e++){var n=i[e],o=new Mf;Q(o,this._letterDefinitions[n]),t[n]=o}return t}},{key:"assignLetterDefinitions",value:function(t){for(var e=0,i=Object.keys(this._letterDefinitions);e<i.length;e++){var n=i[e],o=t[n],r=this._letterDefinitions[n];Q(r,o)}}},{key:"scaleFontLetterDefinition",value:function(t){for(var e=0,i=Object.keys(this._letterDefinitions);e<i.length;e++){var n=i[e],o=this._letterDefinitions[n];o.width*=t,o.height*=t,o.offsetX*=t,o.offsetY*=t,o.xAdvance*=t}}},{key:"getLetterDefinitionForChar",value:function(t){return this._letterDefinitions[t.charCodeAt(0)]}},{key:"letterDefinitions",get:function(){return this._letterDefinitions}}]),t}();s.FontAtlas=Nf;var Ff=function t(){f(this,t),this.char="",this.valid=!0,this.positionX=0,this.positionY=0,this.lineIndex=0},Vf=new b,Uf=null,Wf=null,Gf=[],jf=[],Xf=[],Yf=[],Zf=new M,qf=null,$f=null,Kf=0,Qf=0,Jf=0,tg=0,eg=0,ig=1,ng=null,og="",rg=0,ag=0,sg=new M,lg=0,hg=0,ug=0,cg=0,pg=0,_g=!1,dg=0,fg=0,gg=0,yg={createData:function(t){return t.requestRenderData()},fillBuffers:function(t,e){Ri(t.node,e,t.renderData,t.color)},appendQuad:function(t,e,i,n,o,r,a){var s=t.renderData;if(s){var l=s.dataLength;s.dataLength+=4,s.vertexCount=s.dataLength,s.indicesCount=s.dataLength/2*3;var h=s.data,u=e.width,c=e.height,p=i.width,_=i.height,d=0,f=0,g=0,y=0;n?(d=i.x/u,y=(i.x+_)/u,f=(i.y+p)/c,g=i.y/c,h[l].u=d,h[l].v=g,h[l+1].u=d,h[l+1].v=f,h[l+2].u=y,h[l+2].v=g,h[l+3].u=y,h[l+3].v=f):(d=i.x/u,y=(i.x+p)/u,f=(i.y+_)/c,g=i.y/c,h[l].u=d,h[l].v=f,h[l+1].u=y,h[l+1].v=f,h[l+2].u=d,h[l+2].v=g,h[l+3].u=y,h[l+3].v=g),h[l].x=o,h[l].y=r-_*a,h[l+1].x=o+p*a,h[l+1].y=r-_*a,h[l+2].x=o,h[l+2].y=r,h[l+3].x=o+p*a,h[l+3].y=r}}};J(yg,{updateRenderData:function(t){t.renderData&&t.renderData.vertDirty&&Uf!==t&&(Wf=(Uf=t).node._uiProps.uiTransformComp,this._updateProperties(),this._updateContent(),Uf.actualFontSize=rg,Wf.setContentSize(sg),Uf.renderData.vertDirty=Uf.renderData.uvDirty=!1,Uf=null,this._resetProperties())},_updateFontScale:function(){ig=rg/ag},_updateProperties:function(){if(Uf){var t=Uf.font;if(t){if(ng=t.spriteFrame,$f=t.fntConfig,!(qf=Uf.fontAtlas)){qf=new Nf;for(var e=$f.fontDefDictionary,i=0,n=Object.keys(e);i<n.length;i++){var o=n[i],r=new Mf,a=e[o].rect;r.offsetX=e[o].xOffset,r.offsetY=e[o].yOffset,r.width=a.width,r.height=a.height,r.u=a.x,r.v=a.y,r.textureID=0,r.validDefinition=!0,r.xAdvance=e[o].xAdvance,qf.addLetterDefinitions(o,r)}Uf.fontAtlas=qf}og=Uf.string.toString(),rg=Uf.fontSize,ag=$f.fontSize;var s=Wf.contentSize;sg.width=s.width,sg.height=s.height,lg=Uf.horizontalAlign,hg=Uf.verticalAlign,ug=Uf.spacingX,pg=Uf.overflow,cg=Uf.lineHeight,_g=pg!==Yn.NONE&&(pg===Yn.RESIZE_HEIGHT||Uf.enableWrapText),this._setupBMFontOverflowMetrics()}}},_resetProperties:function(){qf=null,$f=null,ng=null},_updateContent:function(){this._updateFontScale(),this._computeHorizontalKerningForText(),this._alignText()},_computeHorizontalKerningForText:function(){for(var t=og,e=t.length,i=$f.kerningDict,n=Gf,o=-1,r=0;r<e;++r){var a=t.charCodeAt(r),s=i[o<<16|65535&a]||0;n[r]=r<e-1?s:0,o=a}},_multilineTextWrap:function(t){var e=og.length,i=0,n=0,o=0,r=0,a=0,s=0,l=0,h=null,u=new F;this._updateFontScale();for(var c=qf.letterDefinitions,p=0;p<e;){var _=og.charAt(p);if("\n"!==_){for(var d=t(og,p,e),f=s,g=l,y=a,v=n,m=!1,b=0;b<d;++b){var T=p+b;if("\r"!==(_=og.charAt(T)))if(h=qf&&qf.getLetterDefinitionForChar(_)){var C=v+h.offsetX*ig;if(_g&&gg>0&&n>0&&C+h.width*ig>gg&&!kt(_)){Xf.push(a),a=0,i++,n=0,o-=cg*ig+0,m=!0;break}u.x=C,u.y=o-h.offsetY*ig,this._recordLetterInfo(c,u,_,T,i),T+1<Gf.length&&T<e-1&&(v+=Gf[T+1]),v+=h.xAdvance*ig+ug,y=u.x+h.width*ig,f<u.y&&(f=u.y),g>u.y-h.height*ig&&(g=u.y-h.height*ig)}else this._recordPlaceholderInfo(T,_),console.log("Can't find letter definition in texture atlas "+$f.atlasName+" for letter:"+_);else this._recordPlaceholderInfo(T,_)}m||(n=v,s<f&&(s=f),l>g&&(l=g),r<(a=y)&&(r=a),p+=d)}else Xf.push(a),a=0,i++,n=0,o-=cg*ig+0,this._recordPlaceholderInfo(p,_),p++}return Xf.push(a),Qf=(Kf=i+1)*cg*ig,Kf>1&&(Qf+=0*(Kf-1)),sg.width=dg,sg.height=fg,dg<=0&&(sg.width=parseFloat(r.toFixed(2))),fg<=0&&(sg.height=parseFloat(Qf.toFixed(2))),tg=sg.height,eg=0,s>0&&(tg=sg.height+s),l<-Qf&&(eg=Qf+l),!0},_getFirstCharLen:function(){return 1},_getFirstWordLen:function(t,e,i){var n=t.charAt(e);if(At(n)||"\n"===n||kt(n))return 1;var o=1,r=qf&&qf.getLetterDefinitionForChar(n);if(!r)return o;for(var a=r.xAdvance*ig+ug,s=e+1;s<i&&(n=t.charAt(s),r=qf&&qf.getLetterDefinitionForChar(n));++s){if(a+r.offsetX*ig+r.width*ig>gg&&!kt(n)&&gg>0)return o;if(a+=r.xAdvance*ig+ug,"\n"===n||kt(n)||At(n))break;o++}return o},_multilineTextWrapByWord:function(){return this._multilineTextWrap(this._getFirstWordLen)},_multilineTextWrapByChar:function(){return this._multilineTextWrap(this._getFirstCharLen)},_recordPlaceholderInfo:function(t,e){if(t>=jf.length){var i=new Ff;jf.push(i)}jf[t].char=e,jf[t].valid=!1},_recordLetterInfo:function(t,e,i,n,o){if(n>=jf.length){var r=new Ff;jf.push(r)}var a=i.charCodeAt(0);jf[n].lineIndex=o,jf[n].char=i,jf[n].valid=t[a].validDefinition,jf[n].positionX=e.x,jf[n].positionY=e.y},_alignText:function(){Qf=0,Xf.length=0,this._multilineTextWrapByWord(),this._computeAlignmentOffset(),pg===Yn.SHRINK&&rg>0&&this._isVerticalClamp()&&this._shrinkLabelToContentSize(this._isVerticalClamp),this._updateQuads()||pg===Yn.SHRINK&&this._shrinkLabelToContentSize(this._isHorizontalClamp)},_scaleFontSizeDown:function(t){var e=!0;t||(t=.1,e=!1),rg=t,e&&this._updateContent()},_shrinkLabelToContentSize:function(t){for(var e=rg,i=cg,n=qf,o=0,r=n?n.cloneLetterDefinition():{},a=!0;t();){var s=e-++o;if(a=!1,s<=0)break;var l=s/e;n&&(n.assignLetterDefinitions(r),n.scaleFontLetterDefinition(l)),cg=i*l,this._multilineTextWrapByWord(),this._computeAlignmentOffset()}cg=i,n&&n.assignLetterDefinitions(r),a||e-o>=0&&this._scaleFontSizeDown(e-o)},_isVerticalClamp:function(){return Qf>sg.height},_isHorizontalClamp:function(){if(qf){for(var t=!1,e=0,i=og.length;e<i;++e){var n=jf[e];if(n.valid){var o=qf.getLetterDefinitionForChar(n.char);if(!o)continue;var r=n.positionX+o.width/2*ig,a=n.lineIndex;if(dg>0)if(_g){if(Xf[a]>sg.width&&(r>sg.width||r<0)){t=!0;break}}else if(r>sg.width){t=!0;break}}}return t}},_isHorizontalClamped:function(t,e){var i=Xf[e],n=t>sg.width||t<0;return _g?i>sg.width&&n:n},_updateQuads:function(){if(!Uf)return!1;var t=qf?qf.letterDefinitions:{},e=ng,i=Uf.renderData;i.dataLength=i.vertexCount=i.indicesCount=0;for(var n=Wf.anchorPoint,o=sg,r=n.x*o.width,a=n.y*o.height,s=!0,l=0,h=og.length;l<h;++l){var u=jf[l];if(u.valid){var c=t[u.char.charCodeAt(0)];if(c){Vf.height=c.height,Vf.width=c.width,Vf.x=c.u,Vf.y=c.v;var p=u.positionY+Jf;if(fg>0){if(p>tg){var _=p-tg;Vf.y+=_,Vf.height-=_,p-=_}p-c.height*ig<eg&&(Vf.height=p<eg?0:p-eg)}var d=u.lineIndex,f=u.positionX+c.width/2*ig+Yf[d];if(dg>0&&this._isHorizontalClamped(f,d))if(pg===Yn.CLAMP)Vf.width=0;else if(pg===Yn.SHRINK){if(sg.width>c.width){s=!1;break}Vf.width=0}if(ng&&Vf.height>0&&Vf.width>0){var g=ng.isRotated(),y=ng.getOriginalSize(),v=ng.getRect(),m=ng.getOffset(),b=m.x+(y.width-v.width)/2,T=m.y-(y.height-v.height)/2;if(g){var C=Vf.x;Vf.x=v.x+v.height-Vf.y-Vf.height-T,Vf.y=C+v.y-b,Vf.y<0&&(Vf.height=Vf.height+T)}else Vf.x+=v.x-b,Vf.y+=v.y+T;var S=u.positionX+Yf[u.lineIndex];this.appendQuad(Uf,e,Vf,g,S-r,p-a,ig)}}else console.warn("Can't find letter in this bitmap-font")}}return s},appendQuad:function(t,e,i,n,o,r,a){},_computeAlignmentOffset:function(){switch(Yf.length=0,lg){case jn.LEFT:for(var t=0;t<Kf;++t)Yf.push(0);break;case jn.CENTER:for(var e=0,i=Xf.length;e<i;e++)Yf.push((sg.width-Xf[e])/2);break;case jn.RIGHT:for(var n=0,o=Xf.length;n<o;n++)Yf.push(sg.width-Xf[n])}switch(hg){case Xn.TOP:Jf=sg.height;break;case Xn.CENTER:Jf=(sg.height+Qf)/2;break;case Xn.BOTTOM:Jf=Qf}},_setupBMFontOverflowMetrics:function(){var t=sg.width,e=sg.height;pg===Yn.RESIZE_HEIGHT&&(e=0),pg===Yn.NONE&&(t=0,e=0),dg=t,fg=e,Zf.width=t,Zf.height=e,gg=t}});var vg=to.Overflow,mg=p.WHITE.clone(),bg=to.HorizontalAlign,Tg=to.VerticalAlign,Cg=function t(){f(this,t),this.char="",this.valid=!0,this.x=0,this.y=0,this.line=0,this.hash=""},Sg=function t(){f(this,t),this.u=0,this.v=0,this.w=0,this.h=0,this.texture=null,this.offsetX=0,this.offsetY=0,this.valid=!1,this.xAdvance=0},xg=function(){function t(e,i){f(this,t),this.image=null,this.labelInfo=void 0,this.char=void 0,this.data=null,this.canvas=null,this.context=null,this.width=0,this.height=0,this.hash=void 0,this.char=e,this.labelInfo=i,this.hash=e.charCodeAt(0)+i.hash}return d(t,[{key:"updateRenderData",value:function(){this._updateProperties(),this._updateTexture()}},{key:"destroy",value:function(){this.image=null}},{key:"_updateProperties",value:function(){if(this.data=to._canvasPool.get(),this.canvas=this.data.canvas,this.context=this.data.context,this.context){this.context.font=this.labelInfo.fontDesc;var t=Ft(this.context,this.char);this.width=parseFloat(t.toFixed(2)),this.height=this.labelInfo.fontSize}this.canvas.width!==this.width&&(this.canvas.width=this.width),this.canvas.height!==this.height&&(this.canvas.height=this.height),this.image||(this.image=new gt),this.image.reset(this.canvas)}},{key:"_updateTexture",value:function(){if(this.context&&this.canvas){var t=this.context,e=this.labelInfo,i=this.canvas.width,n=this.canvas.height;t.textAlign="center",t.textBaseline="middle",t.clearRect(0,0,i,n),t.fillStyle="rgba(255, 255, 255, 0.005)",t.fillRect(0,0,i,n),t.font=e.fontDesc;var o=i/2,r=n/2,a=e.color;if(t.lineJoin="round",t.fillStyle="rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", ",1,")"),e.isOutlined){var s=e.out||mg;t.strokeStyle="rgba(".concat(s.r,", ").concat(s.g,", ").concat(s.b,", ").concat(s.a/255,")"),t.lineWidth=2*e.margin,t.strokeText(this.char,o,r)}t.fillText(this.char,o,r)}}}]),t}(),wg=function(t){function e(){return f(this,e),g(this,y(e).apply(this,arguments))}return _(e,t),d(e,[{key:"initWithSize",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vt.RGBA8888;this.reset({width:t,height:e,format:i}),this.loaded=!0,this.emit("load")}},{key:"drawTextureAt",value:function(t,e,i){var n=this.getGFXTexture();if(t&&n){var o=this._getGFXDevice();if(o){var r={buffStride:0,buffTexHeight:0,texOffset:{x:e,y:i,z:0},texExtent:{width:t.width,height:t.height,depth:1},texSubres:{mipLevel:0,baseArrayLayer:0,layerCount:1}};o.copyTexImagesToTexture([t.data],n,[r])}else console.warn("Unable to get device")}}}]),e}(Ut),Og=function(){function t(e,i){f(this,t),this.texture=void 0,this._x=2,this._y=2,this._nextY=2,this._width=0,this._height=0,this._letterDefinitions=new Map,this._dirty=!1,this.texture=new wg,this.texture.initWithSize(e,i),this._width=e,this._height=i,Qt.on(te.EVENT_BEFORE_SCENE_LAUNCH,this.beforeSceneLoad,this)}return d(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),d(t,[{key:"insertLetterTexture",value:function(t){var e=t.image,i=Qt.root.device;if(!e||!this.texture||!i)return null;var n=e.width,o=e.height;if(this._x+n+2>this._width&&(this._x=2,this._y=this._nextY),this._y+o>this._nextY&&(this._nextY=this._y+o+2),this._nextY>this._height)return null;this.texture.drawTextureAt(e,this._x,this._y),this._dirty=!0;var r=new Sg;return r.u=this._x,r.v=this._y,r.texture=this.texture,r.valid=!0,r.w=t.width,r.h=t.height,r.xAdvance=t.width,this._x+=n+2,this._letterDefinitions.set(t.hash,r),r}},{key:"update",value:function(){this._dirty&&(this._dirty=!1)}},{key:"reset",value:function(){this._x=2,this._y=2,this._nextY=2,this._letterDefinitions.clear()}},{key:"destroy",value:function(){this.reset(),this.texture&&this.texture.destroy()}},{key:"beforeSceneLoad",value:function(){this.destroy();var t=new wg;t.initWithSize(this._width,this._height),this.texture=t}},{key:"getLetter",value:function(t){return this._letterDefinitions.get(t)}},{key:"addLetterDefinitions",value:function(t,e){this._letterDefinitions[t]=e}},{key:"cloneLetterDefinition",value:function(){for(var t={},e=0,i=Object.keys(this._letterDefinitions);e<i.length;e++){var n=i[e],o=new Sg;Q(o,this._letterDefinitions[n]),t[n]=o}return t}},{key:"assignLetterDefinitions",value:function(t){var e=this;t.forEach((function(t,i){var n=e._letterDefinitions[i];Q(n,t)}))}},{key:"scaleFontLetterDefinition",value:function(t){for(var e=0,i=Object.keys(this._letterDefinitions);e<i.length;e++){var n=i[e],o=this._letterDefinitions[n];o.w*=t,o.h*=t,o.offsetX*=t,o.offsetY*=t,o.xAdvance*=t}}},{key:"getLetterDefinitionForChar",value:function(t,e){var i=t.charCodeAt(0)+e.hash,n=this._letterDefinitions.get(i);if(!n){var o=new xg(t,e);o.updateRenderData(),n=this.insertLetterTexture(o),o.destroy()}return n}}]),t}(),Eg=new b,Dg=null,Ag=null,kg=[],Lg=[],Pg=[],Rg=[],zg=new M,Ig=null,Bg=0,Hg=0,Mg=0,Ng=0,Fg=0,Vg=1,Ug="",Wg=0,Gg=0,jg=new M,Xg=0,Yg=0,Zg=0,qg=0,$g=0,Kg=!1,Qg=0,Jg=0,ty=0,ey="",iy=!1,ny={fontSize:0,lineHeight:0,hash:"",fontFamily:"",fontDesc:"Arial",hAlign:0,vAlign:0,color:mg,isOutlined:!1,out:mg,margin:0},oy={getAssemblerData:function(){return Ig||(Ig=new Og(1024,1024)),Ig.texture},updateRenderData:function(t){t.renderData&&t.renderData.vertDirty&&Dg!==t&&(Dg=t,Ag=t.node._uiProps.uiTransformComp,this._updateFontFamily(t),ny.fontFamily=ey,this._updateProperties(),ny.fontDesc=this._getFontDesc(),this._updateContent(),Dg.actualFontSize=Wg,Ag.setContentSize(jg),Dg.renderData.vertDirty=Dg.renderData.uvDirty=!1,Dg=null,this._resetProperties())},_updateFontScale:function(){Vg=Wg/Gg},_updateProperties:function(){if(Dg){Ug=Dg.string.toString(),Wg=Dg.fontSize,Gg=Wg;var t=Ag.contentSize;jg.width=t.width,jg.height=t.height,Xg=Dg.horizontalAlign,Yg=Dg.verticalAlign,Zg=Dg.spacingX,$g=Dg.overflow,qg=Dg.lineHeight,iy=Dg.isBold,Kg=$g!==vg.NONE&&($g===vg.RESIZE_HEIGHT||Dg.enableWrapText);var e=Dg.getComponent(Ll);e&&e.enabled?(ny.isOutlined=!0,ny.margin=e.width,ny.out=e.color,ny.out.a=e.color.a*Dg.color.a/255):(ny.isOutlined=!1,ny.margin=0),ny.lineHeight=qg,ny.fontSize=Wg,ny.fontFamily=ey,ny.color=Dg.color,ny.hash=this._computeHash(ny),this._setupBMFontOverflowMetrics()}},_updateFontFamily:function(t){t.useSystemFont?ey=t.fontFamily:t.font?t.font._nativeAsset?ey=t.font._nativeAsset:(ey=Ot.getRes(t.font.nativeUrl)||"")||Ot.load(t.font.nativeUrl,(function(e,i){ey=i||"Arial",t.font&&(t.font._nativeAsset=i),t.updateRenderData(!0)})):ey="Arial"},_computeHash:function(t){var e=t.color.toHEX("#rrggbb"),i="";return t.isOutlined&&(i=t.out.toHEX("#rrggbb")),""+t.fontSize+t.fontFamily+e+i},_getFontDesc:function(){var t=Wg.toString()+"px ";return t+=ey,iy&&(t="bold "+t),t},_resetProperties:function(){},_updateContent:function(){this._updateFontScale(),this._alignText()},_computeHorizontalKerningForText:function(){},_multilineTextWrap:function(t){var e=Ug.length,i=0,n=0,o=0,r=0,a=0,s=0,l=0,h=null,u=new F(0,0);this._updateFontScale();for(var c=0;c<e;){var p=Ug.charAt(c);if("\n"!==p){for(var _=t(Ug,c,e),d=s,f=l,g=a,y=n,v=!1,m=0;m<_;++m){var b=c+m;if("\r"!==(p=Ug.charAt(b)))if(h=Ig&&Ig.getLetterDefinitionForChar(p,ny)){var T=y+h.offsetX*Vg;if(Kg&&ty>0&&n>0&&T+h.w*Vg>ty&&!kt(p)){Pg.push(a),a=0,i++,n=0,o-=qg*Vg+0,v=!0;break}u.x=T,u.y=o-h.offsetY*Vg,this._recordLetterInfo(u,p,b,i),b+1<kg.length&&b<e-1&&(y+=kg[b+1]),y+=h.xAdvance*Vg+Zg,g=u.x+h.w*Vg,d<u.y&&(d=u.y),f>u.y-h.h*Vg&&(f=u.y-h.h*Vg)}else this._recordPlaceholderInfo(b,p);else this._recordPlaceholderInfo(b,p)}v||(n=y,s<d&&(s=d),l>f&&(l=f),r<(a=g)&&(r=a),c+=_)}else Pg.push(a),a=0,i++,n=0,o-=qg*Vg+0,this._recordPlaceholderInfo(c,p),c++}return Pg.push(a),Hg=(Bg=i+1)*qg*Vg,Bg>1&&(Hg+=0*(Bg-1)),jg.width=Qg,jg.height=Jg,Qg<=0&&(jg.width=parseFloat(r.toFixed(2))),Jg<=0&&(jg.height=parseFloat(Hg.toFixed(2))),Ng=jg.height,Fg=0,s>0&&(Ng=jg.height+s),l<-Hg&&(Fg=Hg+l),!0},_getFirstCharLen:function(){return 1},_getFirstWordLen:function(t,e,i){var n=t.charAt(e);if(At(n)||"\n"===n||kt(n))return 1;if(Ig){var o=1,r=Ig.getLetterDefinitionForChar(n,ny);if(!r)return o;for(var a=r.xAdvance*Vg+Zg,s=e+1;s<i&&(n=t.charAt(s),r=Ig.getLetterDefinitionForChar(n,ny));++s){if(a+r.offsetX*Vg+r.w*Vg>ty&&!kt(n)&&ty>0)return o;if(a+=r.xAdvance*Vg+Zg,"\n"===n||kt(n)||At(n))break;o++}return o}},_multilineTextWrapByWord:function(){return this._multilineTextWrap(this._getFirstWordLen)},_multilineTextWrapByChar:function(){return this._multilineTextWrap(this._getFirstCharLen)},_recordPlaceholderInfo:function(t,e){if(t>=Lg.length){var i=new Cg;Lg.push(i)}Lg[t].char=e,Lg[t].hash=e.charCodeAt(0)+ny.hash,Lg[t].valid=!1},_recordLetterInfo:function(t,e,i,n){if(i>=Lg.length){var o=new Cg;Lg.push(o)}var r=e.charCodeAt(0)+ny.hash;Lg[i].line=n,Lg[i].char=e,Lg[i].hash=r;var a=Ig&&Ig.getLetter(r);Lg[i].valid=!!a&&!!a.valid,Lg[i].x=t.x,Lg[i].y=t.y},_alignText:function(){Hg=0,Pg.length=0,this._multilineTextWrapByWord(),this._computeAlignmentOffset(),this._updateQuads()},_scaleFontSizeDown:function(t){var e=!0;t||(t=.1,e=!1),Wg=t,e&&this._updateContent()},_isVerticalClamp:function(){return Hg>jg.height},_isHorizontalClamp:function(){for(var t=!1,e=0,i=Ug.length;e<i;++e){var n=Lg[e];if(n.valid){var o=Ig.getLetter(n.hash);if(!o)continue;var r=n.x+o.w*Vg,a=n.line;if(Qg>0)if(Kg){if(Pg[a]>jg.width&&(r>jg.width||r<0)){t=!0;break}}else if(r>jg.width){t=!0;break}}}return t},_isHorizontalClamped:function(t,e){var i=Pg[e],n=t>jg.width||t<0;return Kg?i>jg.width&&n:n},_updateQuads:function(){if(Dg&&Ig){var t=Ig.texture,e=(Dg.node,Dg.renderData);e.dataLength=e.vertexCount=e.indicesCount=0;for(var i=jg,n=Ag.anchorPoint,o=n.x*i.width,r=n.y*i.height,a=!0,s=0,l=Ug.length;s<l;++s){var h=Lg[s];if(h.valid){var u=Ig.getLetter(h.hash);if(u){Eg.height=u.h,Eg.width=u.w,Eg.x=u.u,Eg.y=u.v;var c=h.y+Mg;if(Jg>0){if(c>Ng){var p=c-Ng;Eg.y+=p,Eg.height-=p,c-=p}c-u.h*Vg<Fg&&(Eg.height=c<Fg?0:c-Fg)}var _=h.line,d=h.x+u.w/2*Vg+Rg[_];if(Qg>0&&this._isHorizontalClamped(d,_))if($g===vg.CLAMP)Eg.width=0;else if($g===vg.SHRINK){if(jg.width>u.w){a=!1;break}Eg.width=0}if(Eg.height>0&&Eg.width>0){var f=h.x+Rg[h.line];this.appendQuad(Dg,t,Eg,!1,f-o,c-r,Vg)}}}}return a}},appendQuad:function(t,e,i,n,o,r,a){},_computeAlignmentOffset:function(){switch(Rg.length=0,Xg){case bg.LEFT:for(var t=0;t<Bg;++t)Rg.push(0);break;case bg.CENTER:for(var e=0,i=Pg.length;e<i;e++)Rg.push((jg.width-Pg[e])/2);break;case bg.RIGHT:for(var n=0,o=Pg.length;n<o;n++)Rg.push(jg.width-Pg[n])}switch(Yg){case Tg.TOP:Mg=jg.height;break;case Tg.CENTER:Mg=(jg.height+Hg)/2-(qg-Wg)/2;break;case Tg.BOTTOM:Mg=(jg.height+Hg)/2-(qg-Wg)}},_setupBMFontOverflowMetrics:function(){var t=jg.width,e=jg.height;$g===vg.RESIZE_HEIGHT&&(e=0),$g===vg.NONE&&(t=0,e=0),Qg=t,Jg=e,zg.width=t,zg.height=e,ty=t}},ry=new p(255,255,255,255),ay={createData:function(t){return t.requestRenderData()},fillBuffers:function(t,e){if(t.renderData){var i=t.node;ry.a=t.color.a,Ri(i,e,t.renderData,ry)}},appendQuad:yg.appendQuad};J(ay,oy);var sy=to.Overflow,ly=p.WHITE.clone(),hy=tt(Ll,T),uy=null,cy=null,py=null,_y="",dy="",fy=0,gy=0,yy=[],vy=new M,my=0,by=0,Ty=0,Cy=new p,Sy="",xy=sy.NONE,wy=!1,Oy=!1,Ey=new p,Dy=0,Ay=0,ky=!1,Ly=!1,Py=!1,Ry={getAssemblerData:function(){var t=to._canvasPool.get();return t.canvas.width=t.canvas.height=1,t},resetAssemblerData:function(t){t&&to._canvasPool.put(t)},updateRenderData:function(t){if(t.renderData&&t.renderData.vertDirty){var e=t.node._uiProps.uiTransformComp;this._updateFontFamily(t),this._updateProperties(t,e),this._calculateLabelFont(),this._calculateSplitStrings(),this._updateLabelDimensions(),this._calculateTextBaseline(),this._updateTexture(),t.actualFontSize=fy,e.setContentSize(vy),this.updateVertexData(t),t.markForUpdateRenderData(!1),uy=null,cy=null,py=null}},updateVertexData:function(t){},_updateFontFamily:function(t){t.useSystemFont?Sy=t.fontFamily:t.font?t.font._nativeAsset?Sy=t.font._nativeAsset:Ot.load(t.font.nativeUrl,(function(e,i){Sy=i||"Arial",t.font._nativeAsset=i,t.updateRenderData(!0)})):Sy="Arial"},_updateProperties:function(t,e){var i=t.assemblerData;if(i){uy=i.context,cy=i.canvas,py=t.spriteFrame,dy=t.string.toString(),fy=t.fontSize,gy=fy,xy=t.overflow,vy.width=e.width,vy.height=e.height,my=t.lineHeight,by=t.horizontalAlign,Ty=t.verticalAlign,Cy=t.color,ky=t.isBold,Ly=t.isItalic,Py=t.isUnderline,wy=xy!==sy.NONE&&(xy===sy.RESIZE_HEIGHT||t.enableWrapText);var n=hy&&t.getComponent(Ll);n&&n.enabled?(Oy=!0,Ay=Dy=n.width,Ey.set(n.color),Ey.a=Ey.a*t.color.a/255):(Oy=!1,Ay=0)}},_calculateFillTextStartPosition:function(){var t=this._getLineHeight(),e=yy.length,i=0,n=0;return i=by===jn.RIGHT?vy.width-Ay:by===jn.CENTER?vy.width/2:0+Ay,n=Ty===Xn.TOP?fy*(Dt/2):Ty===Xn.CENTER?vy.height/2-t*(e-1)/2:vy.height-t*(e-1),new F(i,n)},_updateTexture:function(){if(uy&&cy){uy.clearRect(0,0,cy.width,cy.height),uy.font=_y;var t,e,i=this._calculateFillTextStartPosition(),n=this._getLineHeight();uy.lineJoin="round",uy.fillStyle="rgba(".concat(Cy.r,", ").concat(Cy.g,", ").concat(Cy.b,", ").concat(Cy.a/255,")");for(var o=0;o<yy.length;++o){if(Oy){var r=Ey||ly;uy.strokeStyle="rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(r.a/255,")"),uy.lineWidth=2*Dy,uy.strokeText(yy[o],i.x,i.y+o*n)}uy.fillText(yy[o],i.x,i.y+o*n),Py&&(t=this._calculateUnderlineStartPosition(),uy.save(),uy.beginPath(),uy.lineWidth=fy/8,uy.strokeStyle="rgba(".concat(Cy.r,", ").concat(Cy.g,", ").concat(Cy.b,", ").concat(Cy.a/255,")"),uy.moveTo(t.x,t.y+o*n-1),uy.lineTo(t.x+cy.width,t.y+o*n-1),uy.stroke(),uy.restore())}if(py)e=py instanceof ut?py.texture:py,0!==cy.width&&0!==cy.height&&(e.reset({width:cy.width,height:cy.height,mipmapLevel:1}),e.uploadData(cy))}},_calculateUnderlineStartPosition:function(){var t=this._getLineHeight(),e=yy.length,i=0+Ay,n=0;return n=Ty===Xn.TOP?fy:Ty===Xn.CENTER?vy.height/2-t*(e-1)/2+fy/2:vy.height-t*(e-1),new F(i,n)},_updateLabelDimensions:function(){if(uy){var t=dy.split("\n");if(xy===sy.RESIZE_HEIGHT)vy.height=(yy.length+Dt)*this._getLineHeight();else if(xy===sy.NONE){yy=t;for(var e,i=0,n=0,o=Y(t);!(e=o()).done;){var r=e.value,a=Ft(uy,r);i=i>a?i:a}n=(yy.length+Dt)*this._getLineHeight(),vy.width=parseFloat(i.toFixed(2))+2*Ay,vy.height=parseFloat(n.toFixed(2)),Ly&&(vy.width+=gy*Math.tan(.20943951))}cy&&(cy.width=vy.width,cy.height=vy.height)}},_calculateTextBaseline:function(){var t,e;t=by===jn.RIGHT?"right":by===jn.CENTER?"center":"left",e=Ty===Xn.TOP?"top":Ty===Xn.CENTER?"middle":"bottom",uy&&(uy.textAlign=t,uy.textBaseline=e)},_calculateSplitStrings:function(){if(uy){var t=dy.split("\n");if(wy){yy=[];for(var e,i=vy.width-2*Ay,n=Y(t);!(e=n()).done;){var o=e.value,r=Ft(uy,o),a=Et(o,r,i,this._measureText(uy));yy=yy.concat(a)}}else yy=t}},_getFontDesc:function(){var t=fy.toString()+"px ";return t+=Sy,ky&&(t="bold "+t),Ly&&(t="italic "+t),t},_getLineHeight:function(){var t=my;return 0|(t=0===t?fy:t*fy/gy)},_calculateParagraphLength:function(t,e){for(var i,n=[],o=Y(t);!(i=o()).done;){var r=i.value,a=Ft(e,r);n.push(a)}return n},_measureText:function(t){return function(e){return Ft(t,e)}},_calculateLabelFont:function(){if(uy&&(_y=this._getFontDesc(),uy.font=_y,xy===sy.SHRINK)){var t=dy.split("\n"),e=this._calculateParagraphLength(t,uy);yy=t;var i=0,n=0,o=0;if(wy){var r=vy.width-2*Ay,a=vy.height-2*Ay;if(r<0||a<0)return _y=this._getFontDesc(),void(uy.font=_y);n=a+1,o=r+1;for(var s=fy+1,l=[],h=!0,u=0|s;n>a||o>r;){if(h?s=u/2|0:u=s=u-1,s<=0){q(4003);break}for(fy=s,_y=this._getFontDesc(),uy.font=_y,yy=[],n=0,i=0;i<t.length;++i){var c=0,p=Ft(uy,t[i]);for(l=Et(t[i],p,r,this._measureText(uy));c<l.length;){o=Ft(uy,l[c]),n+=this._getLineHeight(),++c}yy=yy.concat(l)}h&&(n>a?u=0|s:(h=!1,n=a+1))}}else{for(n=t.length*this._getLineHeight(),i=0;i<t.length;++i)o<e[i]&&(o=e[i]);var _=(vy.width-2*Ay)/o,d=vy.height/n;fy=gy*Math.min(1,_,d)|0,_y=this._getFontDesc(),uy.font=_y}}}},zy=p.WHITE.clone(),Iy={createData:function(t){var e=t.requestRenderData();e.dataLength=4,e.vertexCount=4,e.indicesCount=6;var i=e.vData=new Float32Array(36);i[3]=i[21]=i[22]=i[31]=0,i[4]=i[12]=i[13]=i[30]=1;for(var n=5,o=0;o<4;o++)p.toArray(i,zy,n),n+=9;return e},fillBuffers:function(t,e){var i=t.renderData,n=i.data,o=t.node,r=e.currBufferBatch,a=r.byteOffset>>2,s=r.indicesOffset,l=r.vertexOffset;r.request()||(r=e.currBufferBatch,s=0,l=0);var h=r.vData,u=r.iData,c=i.vData,p=n[0],_=n[3];o.updateWorldTransform();var d=o._pos,f=o._rot,g=o._scale,y=p.x*g.x,v=_.x*g.x,m=p.y*g.y,b=_.y*g.y,T=f.x,C=f.y,S=f.z,x=f.w,w=T*C,O=S*x,E=T*T-C*C,D=x*x-S*S,A=D+E,k=2*(w-O),L=D-E,P=2*(w+O),R=d.x,z=d.y;c[0]=A*y+k*m+R,c[1]=L*m+P*y+z,c[9]=A*v+k*m+R,c[10]=L*m+P*v+z,c[18]=A*y+k*b+R,c[19]=L*b+P*y+z,c[27]=A*v+k*b+R,c[28]=L*b+P*v+z,h.set(c,a),u[s++]=l,u[s++]=l+1,u[s++]=l+2,u[s++]=l+2,u[s++]=l+1,u[s++]=l+3},updateVertexData:function(t){var e=t.renderData;if(e){var i=t.node._uiProps.uiTransformComp,n=i.width,o=i.height,r=i.anchorX*n,a=i.anchorY*o,s=e.data;s[0].x=-r,s[0].y=-a,s[3].x=n-r,s[3].y=o-a}}};J(Iy,Ry);var By=t("labelAssembler",{getAssembler:function(t){var e=Iy;return t.font instanceof ft?e=yg:t.cacheMode===to.CacheMode.CHAR&&(e=ay),e}});to.Assembler=By;var Hy=oe.sharedManager,My={createData:function(t){var e=t.requestRenderData();return e.dataLength=4,e.vertexCount=4,e.indicesCount=6,e},updateRenderData:function(t){var e=t.renderData;e&&e.vertDirty&&this.updateVertexData&&this.updateVertexData(t)},updateVertexData:function(t){var e=t.renderData;if(e){var i,n,o,r,a=t.node._uiProps.uiTransformComp,s=e.data,l=a.width,h=a.height,u=a.anchorX*l,c=a.anchorY*h;i=-u,n=-c,o=l-u,r=h-c,s[0].x=i,s[0].y=n,s[3].x=o,s[3].y=r,e.vertDirty=!1}},fillBuffers:function(t,e){Hy.pushMask(t),Hy.clear(),t.clearGraphics.updateAssembler(e),Hy.enterLevel(),t.graphics.updateAssembler(e),Hy.enableMask()}},Ny={fillBuffers:function(t,e){Hy.exitMask()}},Fy={getAssembler:function(){return My}},Vy={getAssembler:function(){return Ny}};Hs.Assembler=Fy,Hs.PostAssembler=Vy;var Uy=Zt.FillType,Wy=new x,Gy={useModel:!1,updateRenderData:function(t){var e=t.spriteFrame,i=t.renderData;if(i&&e){var n=i.uvDirty,o=i.vertDirty;if(!n&&!o)return;var r=t.fillStart,a=t.fillRange;a<0&&(r+=a,a=-a),a=(a=(a=r+a)>1?1:a)<0?0:a;var s=(r=(r=r>1?1:r)<0?0:r)+(a=(a-=r)<0?0:a);s=s>1?1:s,n&&this.updateUVs(t,r,s),o&&(this.updateVertexData&&this.updateVertexData(t,r,s),this.updateWorldVertexData(t))}},updateUVs:function(t,e,i){var n=t.spriteFrame,o=t.renderData,r=o.data,a=n.width,s=n.height,l=n.getRect(),h=0,u=0,c=0,p=0,_=0,d=0,f=0,g=0,y=0,v=0;switch(n.isRotated()?(h=l.x/a,u=(l.y+l.width)/s,c=_=h,f=y=(l.x+l.height)/a,d=v=u,p=g=l.y/s):(h=l.x/a,u=(l.y+l.height)/s,c=f=h,_=y=(l.x+l.width)/a,p=d=u,g=v=l.y/s),t.fillType){case Uy.HORIZONTAL:r[0].u=c+(_-c)*e,r[0].v=p+(d-p)*e,r[1].u=c+(_-c)*i,r[1].v=p+(d-p)*i,r[2].u=f+(y-f)*e,r[2].v=g+(v-g)*e,r[3].u=f+(y-f)*i,r[3].v=g+(v-g)*i;break;case Uy.VERTICAL:r[0].u=c+(f-c)*e,r[0].v=p+(g-p)*e,r[1].u=_+(y-_)*e,r[1].v=d+(v-d)*e,r[2].u=c+(f-c)*i,r[2].v=p+(g-p)*i,r[3].u=_+(y-_)*i,r[3].v=d+(v-d)*i;break;default:et(2626)}o.uvDirty=!1},updateVertexData:function(t,e,i){var n=t.renderData,o=n.data,r=t.node._uiProps.uiTransformComp,a=r.width,s=r.height,l=r.anchorX*a,h=r.anchorY*s,u=-l,c=-h,p=a-l,_=s-h,d=0;switch(t.fillType){case Uy.HORIZONTAL:d=u+(p-u)*i,u=u+(p-u)*e,p=d;break;case Uy.VERTICAL:d=c+(_-c)*i,c=c+(_-c)*e,_=d;break;default:et(2626)}o[4].x=u,o[4].y=c,o[5].x=p,o[5].y=c,o[6].x=u,o[6].y=_,o[7].x=p,o[7].y=_,n.vertDirty=!1},createData:function(t){var e=t.requestRenderData();e.dataLength=8,e.vertexCount=4,e.indicesCount=6;for(var i,n=e.data,o=Y(n);!(i=o()).done;){i.value.z=0}return e},updateWorldVertexData:function(t){var i=t.node,n=t.renderData.data;i.getWorldMatrix(Wy);for(var o=0;o<4;o++){var r=n[o+4],a=n[o];e.transformMat4(a,r,Wy)}},fillBuffers:function(t,e){t.node.hasChangedFlags&&this.updateWorldVertexData(t);t.node;!function(t,e,i,n){var o=i.data,r=e.currBufferBatch,a=r.byteOffset>>2,s=i.vertexCount,l=r.indicesOffset,h=r.vertexOffset;r.request(s,i.indicesCount)||(r=e.currBufferBatch,s=0,l=0,h=0);for(var u=r.vData,c=0;c<s;c++){var _=o[c];u[a++]=_.x,u[a++]=_.y,u[a++]=_.z,u[a++]=_.u,u[a++]=_.v,p.toArray(u,n,a),a+=4}var d=r.iData;d[l++]=h,d[l++]=h+1,d[l++]=h+2,d[l++]=h+1,d[l++]=h+3,d[l++]=h+2}(0,e,t.renderData,t.color)}},jy=2*Math.PI,Xy=[new F,new F,new F,new F],Yy=new Array(4),Zy=new Array(8),qy=[new F,new F,new F,new F],$y=[new F,new F,new F,new F],Ky=new F,Qy=[new F,new F,new F,new F];function Jy(t,e,i,n,o,r,a){var s=Math.sin(r);s=Math.abs(s)>1e-6?s:0;var l=Math.cos(r),h=0,u=0;if(0!==(l=Math.abs(l)>1e-6?l:0)){if(h=s/l,(t-o.x)*l>0){var c=o.y+h*(t-o.x);a[0].x=t,a[0].y=c}if((e-o.x)*l>0){var p=o.y+h*(e-o.x);a[2].x=e,a[2].y=p}}if(0!==s){if(u=l/s,(n-o.y)*s>0){var _=o.x+u*(n-o.y);a[3].x=_,a[3].y=n}if((i-o.y)*s>0){var d=o.x+u*(i-o.y);a[1].x=d,a[1].y=i}}}function tv(t,e){var i=e.x-t.x,n=e.y-t.y;if(0===i&&0===n)return 0;if(0===i)return n>0?.5*Math.PI:1.5*Math.PI;var o=Math.atan(n/i);return i<0&&(o+=Math.PI),o}function ev(t,e,i,n,o){var r=Yy,a=r[0],s=r[1],l=r[2],h=r[3];t[e].x=i.x,t[e].y=i.y,t[e+1].x=n.x,t[e+1].y=n.y,t[e+2].x=o.x,t[e+2].y=o.y;iv((i.x-a)/(l-a),(i.y-s)/(h-s),t,e),iv((n.x-a)/(l-a),(n.y-s)/(h-s),t,e+1),iv((o.x-a)/(l-a),(o.y-s)/(h-s),t,e+2)}function iv(t,e,i,n){var o=Zy,r=o[0]+(o[2]-o[0])*t,a=o[4]+(o[6]-o[4])*t,s=o[1]+(o[3]-o[1])*t,l=o[5]+(o[7]-o[5])*t,h=i[n];h.u=r+(a-r)*e,h.v=s+(l-s)*e}for(var nv={useModel:!1,createData:function(t){return t.requestRenderData()},updateRenderData:function(t){var e,i,n,o,r,a,s,l,h,u=t.spriteFrame,c=t.renderData;if(c&&u&&(c.vertDirty||c.uvDirty)){var p=c.data,_=t.fillStart,d=t.fillRange;for(d<0&&(_+=d,d=-d);_>=1;)_-=1;for(;_<0;)_+=1;var f=(_*=jy)+(d*=jy);!function(t){var e=t.node._uiProps.uiTransformComp,i=e.width,n=e.height,o=e.anchorX*i,r=e.anchorY*n,a=-o,s=-r,l=i-o,h=n-r,u=Yy;u[0]=a,u[1]=s,u[2]=l,u[3]=h;var c=t.fillCenter,p=Ky.x=Math.min(Math.max(0,c.x),1)*(l-a)+a,_=Ky.y=Math.min(Math.max(0,c.y),1)*(h-s)+s;Xy[0].x=Xy[3].x=a,Xy[1].x=Xy[2].x=l,Xy[0].y=Xy[1].y=s,Xy[2].y=Xy[3].y=h;for(var d,f=Y(Qy);!(d=f()).done;){var g=d.value;F.set(g,0,0)}p!==u[0]&&F.set(Qy[0],3,0),p!==u[2]&&F.set(Qy[2],1,2),_!==u[1]&&F.set(Qy[1],0,1),_!==u[3]&&F.set(Qy[3],2,3)}(t),i=(e=u).width,n=e.height,o=e.getRect(),r=0,a=0,s=0,l=0,h=Zy,e.isRotated()?(r=o.x/i,a=(o.x+o.height)/i,s=o.y/n,l=(o.y+o.width)/n,h[0]=h[2]=r,h[4]=h[6]=a,h[3]=h[7]=l,h[1]=h[5]=s):(r=o.x/i,a=(o.x+o.width)/i,s=o.y/n,l=(o.y+o.height)/n,h[0]=h[4]=r,h[2]=h[6]=a,h[1]=h[3]=l,h[5]=h[7]=s),Jy(Yy[0],Yy[2],Yy[1],Yy[3],Ky,_,qy),Jy(Yy[0],Yy[2],Yy[1],Yy[3],Ky,_+d,$y);for(var g=0,y=0;y<4;++y){var v=Qy[y];if(v)if(d>=jy)c.dataLength=g+3,ev(p,g,Ky,Xy[v.x],Xy[v.y]),g+=3;else{var m=tv(Ky,Xy[v.x]),b=tv(Ky,Xy[v.y]);b<m&&(b+=jy),m-=jy,b-=jy;for(var T=0;T<3;++T)m>=f||(m>=_?(c.dataLength=g+3,ev(p,g,Ky,Xy[v.x],b>=f?$y[y]:Xy[v.y]),g+=3):b<=_||(b<=f?(c.dataLength=g+3,ev(p,g,Ky,qy[y],Xy[v.y]),g+=3):(c.dataLength=g+3,ev(p,g,Ky,qy[y],$y[y]),g+=3))),m+=jy,b+=jy}}c.indicesCount=c.vertexCount=g,c.vertDirty=c.uvDirty=!1}},fillBuffers:function(t,i){!function(t,i,n,o){var r=n.data,a=i.currBufferBatch,s=a.byteOffset>>2,l=n.vertexCount,h=a.indicesOffset,u=a.vertexOffset;a.request(l,n.indicesCount)||(a=i.currBufferBatch,l=0,h=0,u=0);var c=a.vData;t.getWorldMatrix(Pi);for(var _=0;_<l;_++){var d=r[_];e.set(Li,d.x,d.y,0),e.transformMat4(Li,Li,Pi),c[s++]=Li.x,c[s++]=Li.y,c[s++]=Li.z,c[s++]=d.u,c[s++]=d.v,p.toArray(c,o,s),s+=4}for(var f=a.iData,g=0;g<n.dataLength;g++)f[h+g]=u+g}(t.node,i,t.renderData,t.color)}},ov=[],rv=0;rv<4;rv++)ov.push(new e);for(var av={createData:function(t){var e=t.requestRenderData();return e.dataLength=4,e.vertexCount=4,e.indicesCount=6,e.vData=new Float32Array(36),e},updateRenderData:function(t){var e=t.spriteFrame,i=t.renderData;i&&e&&(i.vertDirty&&this.updateVertexData(t),i.uvDirty&&this.updateUvs(t))},fillBuffers:function(t,e){if(null!==t){var i=t.renderData.data,n=t.node,o=e.currBufferBatch,r=o.byteOffset>>2,a=o.indicesOffset,s=o.vertexOffset;o.request()||(o=e.currBufferBatch,r=0,a=0,s=0);var l=o.vData,h=o.iData,u=t.renderData.vData,c=i[0],p=i[3],_=n.worldMatrix,d=_.m00,f=_.m01,g=_.m04,y=_.m05,v=_.m12,m=_.m13,b=c.x,T=p.x,C=c.y,S=p.y,x=d*b,w=d*T,O=f*b,E=f*T,D=g*C,A=g*S,k=y*C,L=y*S;u[0]=x+D+v,u[1]=O+k+m,u[9]=w+D+v,u[10]=E+k+m,u[18]=x+A+v,u[19]=O+L+m,u[27]=w+A+v,u[28]=E+L+m,l.set(u,r),h[a++]=s,h[a++]=s+1,h[a++]=s+2,h[a++]=s+2,h[a++]=s+1,h[a++]=s+3}},updateVertexData:function(t){var e=t.renderData;if(e){var i=t.node._uiProps.uiTransformComp,n=e.data,o=i.width,r=i.height,a=i.anchorX*o,s=i.anchorY*r,l=0,h=0,u=0,c=0;if(t.trim)l=-a,h=-s,u=o-a,c=r-s;else{var p=t.spriteFrame,_=p.getOriginalSize(),d=p.getRect(),f=_.width,g=_.height,y=d.width,v=d.height,m=p.getOffset(),b=o/f,T=r/g,C=m.x+(f-y)/2,S=m.x-(f-y)/2;l=C*b-a,h=(m.y+(g-v)/2)*T-s,u=o+S*b-a,c=r+(m.y-(g-v)/2)*T-s}n[0].x=l,n[0].y=h,n[0].z=0,n[3].x=u,n[3].y=c,n[3].z=0,e.vertDirty=!1}},updateUvs:function(t){var e=t.renderData,i=e.vData,n=t.spriteFrame.uv;i[3]=n[0],i[4]=n[1],i[12]=n[2],i[13]=n[3],i[21]=n[4],i[22]=n[5],i[30]=n[6],i[31]=n[7],e.uvDirty=!1},updateColor:function(t){for(var e=t.renderData.vData,i=5,n=t.color,o=n.r/255,r=n.g/255,a=n.b/255,s=n.a/255,l=0;l<4;l++)e[i]=o,e[i+1]=r,e[i+2]=a,e[i+3]=s,i+=9}},sv=new e,lv=new x,hv={useModel:!1,createData:function(t){var e=t.requestRenderData();return e.dataLength=20,e.vertexCount=16,e.indicesCount=54,e},updateRenderData:function(t){var e=t.spriteFrame,i=t.renderData;i&&e&&(i.vertDirty&&(this.updateVertexData(t),this.updateWorldVertexData(t)))},updateVertexData:function(t){var e=t.renderData,i=e.data,n=t.node._uiProps.uiTransformComp,o=n.width,r=n.height,a=n.anchorX*o,s=n.anchorY*r,l=t.spriteFrame,h=l.insetLeft,u=l.insetRight,c=l.insetTop,p=l.insetBottom,_=o-h-u,d=r-c-p,f=o/(h+u),g=r/(c+p);f=isNaN(f)||f>1?1:f,g=isNaN(g)||g>1?1:g,_=_<0?0:_,d=d<0?0:d,i[0].x=-a,i[0].y=-s,i[1].x=h*f-a,i[1].y=p*g-s,i[2].x=i[1].x+_,i[2].y=i[1].y+d,i[3].x=o-a,i[3].y=r-s,e.vertDirty=!1},fillBuffers:function(t,e){t.node.hasChangedFlags&&this.updateWorldVertexData(t);var i=e.currBufferBatch,n=t.renderData,o=n.data,r=i.byteOffset>>2,a=n.vertexCount,s=i.indicesOffset,l=i.vertexOffset,h=t.spriteFrame.uvSliced;i.request(a,n.indicesCount)||(i=e.currBufferBatch,r=0,s=0,l=0);for(var u=i.vData,c=i.iData,_=4;_<20;++_){var d=o[_],f=h[_-4];u[r++]=d.x,u[r++]=d.y,u[r++]=d.z,u[r++]=f.u,u[r++]=f.v,p.toArray(u,t.color,r),r+=4}for(var g=0;g<3;++g)for(var y=0;y<3;++y){var v=l+4*g+y;c[s++]=v,c[s++]=v+1,c[s++]=v+4,c[s++]=v+1,c[s++]=v+5,c[s++]=v+4}},updateWorldVertexData:function(t){var i=t.node,n=t.renderData.data;i.getWorldMatrix(lv);for(var o=0;o<4;++o)for(var r=n[o],a=0;a<4;++a){var s=n[a],l=n[4+4*o+a];e.set(sv,s.x,r.y,0),e.transformMat4(l,sv,lv)}}},uv=[],cv=0;cv<4;cv++)uv.push(new e);var pv,_v={useModel:!1,createData:function(t){return t.requestRenderData()},updateRenderData:function(t){var e=t.renderData,i=t.spriteFrame;if(i&&e&&(e.uvDirty||e.vertDirty)){var n=t.node._uiProps.uiTransformComp,o=Math.abs(n.width),r=Math.abs(n.height),a=n.anchorX*o,s=n.anchorY*r,l=i.getRect(),h=l.width,u=l.height,c=o/h,p=r/u,_=Math.ceil(p),d=Math.ceil(c),f=e.data;e.dataLength=Math.max(8,_+1,d+1);for(var g=0;g<=d;++g)f[g].x=Math.min(h*g,o)-a;for(var y=0;y<=_;++y)f[y].y=Math.min(u*y,r)-s;e.vertexCount=_*d*4,e.indicesCount=_*d*6,e.uvDirty=!1,e.vertDirty=!1}},fillBuffers:function(t,e){var i=t.node,n=t.node._uiProps.uiTransformComp,o=t.renderData,r=e.currBufferBatch,a=r.indicesOffset,s=r.byteOffset>>2,l=r.vertexOffset,h=o.vertexCount,u=o.indicesCount,c=r.vData,_=r.iData;r.request(h,u)||(r=e.currBufferBatch,s=0,a=0,l=0);var d=t.spriteFrame,f=d.isRotated(),g=d.uv,y=d.getRect(),v=Math.abs(n.width),m=Math.abs(n.height),b=v/y.width,T=m/y.height,C=Math.ceil(T),S=Math.ceil(b),x=i.worldMatrix;this.fillVertices(c,s,x,C,S,o.data);for(var w=0,O=0,E=0,D=C;E<D;++E){O=Math.min(1,T-E);for(var A=0,k=S;A<k;++A){w=Math.min(1,b-A);var L=s+3,P=L+1;f?(c[L]=g[0],c[P]=g[1],c[L+9]=g[0],c[P+9]=g[1]+(g[7]-g[1])*w,c[L+18]=g[0]+(g[6]-g[0])*O,c[P+18]=g[1],c[L+27]=c[L+18],c[P+27]=c[P+9]):(c[L]=g[0],c[P]=g[1],c[L+9]=g[0]+(g[6]-g[0])*w,c[P+9]=g[1],c[L+18]=g[0],c[P+18]=g[1]+(g[7]-g[1])*O,c[L+27]=c[L+9],c[P+27]=c[P+18]),p.toArray(c,t.color,P+1),p.toArray(c,t.color,P+9+1),p.toArray(c,t.color,P+18+1),p.toArray(c,t.color,P+27+1),s+=36}}for(var R=0;R<u;R+=6)_[a++]=l,_[a++]=l+1,_[a++]=l+2,_[a++]=l+1,_[a++]=l+3,_[a++]=l+2,l+=4},fillVertices:function(t,i,n,o,r,a){for(var s=0,l=0,h=0,u=0,c=0,p=o;c<p;++c){h=a[c].y,u=a[c+1].y;for(var _=0,d=r;_<d;++_){s=a[_].x,l=a[_+1].x,e.set(uv[0],s,h,0),e.set(uv[1],l,h,0),e.set(uv[2],s,u,0),e.set(uv[3],l,u,0);for(var f=0;f<4;f++){var g=uv[f];e.transformMat4(g,g,n);var y=9*f;t[i+y]=g.x,t[i+y+1]=g.y,t[i+y+2]=g.z}i+=36}}}},dv=Zt.Type,fv=Zt.FillType,gv=t("spriteAssembler",{getAssembler:function(t){var e=av,i=t;switch(i.type){case dv.SLICED:e=hv;break;case dv.TILED:e=_v;break;case dv.FILLED:e=i.fillType===fv.RADIAL?nv:Gy}return e}});Zt.Assembler=gv;var yv=t("UIReorderComponent",n("cc.UIReorderComponent")(pv=function t(){f(this,t),R(1408,"UIReorderComponent")})||pv);s.UIReorderComponent=yv,s.ButtonComponent=qn,S.setClassAlias(qn,"cc.ButtonComponent"),s.EditBoxComponent=la,S.setClassAlias(la,"cc.EditBoxComponent"),s.LayoutComponent=Ua,S.setClassAlias(Ua,"cc.LayoutComponent"),s.MaskComponent=Hs,S.setClassAlias(Hs,"cc.MaskComponent"),s.LabelComponent=to,S.setClassAlias(to,"cc.LabelComponent"),s.LabelOutlineComponent=Ll,S.setClassAlias(Ll,"cc.LabelOutlineComponent"),s.ProgressBarComponent=kl,S.setClassAlias(kl,"cc.ProgressBarComponent"),s.RichTextComponent=rh,S.setClassAlias(rh,"cc.RichTextComponent"),s.ScrollViewComponent=Mu,S.setClassAlias(Mu,"cc.ScrollViewComponent"),s.ScrollBarComponent=au,S.setClassAlias(au,"cc.ScrollBarComponent"),s.SliderComponent=ac,S.setClassAlias(ac,"cc.SliderComponent"),s.SpriteComponent=Zt,S.setClassAlias(Zt,"cc.SpriteComponent"),s.ToggleComponent=sp,S.setClassAlias(sp,"cc.ToggleComponent"),s.ToggleContainerComponent=lp,S.setClassAlias(lp,"cc.ToggleContainerComponent"),s.UIModelComponent=hp,S.setClassAlias(hp,"cc.UIModelComponent"),s.WidgetComponent=zp,S.setClassAlias(zp,"cc.WidgetComponent"),s.GraphicsComponent=hs,S.setClassAlias(hs,"cc.GraphicsComponent"),s.PageViewComponent=yd,S.setClassAlias(yd,"cc.PageViewComponent"),s.PageViewIndicatorComponent=D_,S.setClassAlias(D_,"cc.PageViewIndicatorComponent"),S.setClassAlias(vd,"cc.UIStaticBatchComponent"),S.setClassAlias(md,"cc.UIOpacityComponent"),s.SafeAreaComponent=bd,S.setClassAlias(bd,"cc.SafeAreaComponent"),S.setClassAlias(Td,"cc.UICoordinateTrackerComponent"),s.BlockInputEventsComponent=xd,S.setClassAlias(xd,"cc.BlockInputEventsComponent"),s.UI={MeshBuffer:ee,UIVertexFormat:re,spriteAssembler:gv,graphicsAssembler:Hf,labelAssembler:By}}}}));
