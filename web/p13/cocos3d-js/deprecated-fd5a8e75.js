System.register([],(function(t){"use strict";return{execute:function(){function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t("aZ",(function(t){return typeof t})):t("aZ",(function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})))(n)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function m(e){return(m=t("f",Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)}))(e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?u(t):e}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function c(e,n,i){return(c="undefined"!=typeof Reflect&&Reflect.get?t("aO",Reflect.get):t("aO",(function(t,e,n){var i=l(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})))(e,n,i||e)}function y(t,e,n,i){return(y="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,i){var r,s=l(t,e);if(s){if((r=Object.getOwnPropertyDescriptor(s,e)).set)return r.set.call(i,n),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(i,e)){if(!r.writable)return!1;r.value=n,Object.defineProperty(i,e,r)}else a(i,e,n);return!0})(t,e,n,i)}function f(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _(t){var e=0;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=v(t)))return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t[Symbol.iterator]()).next.bind(e)}function p(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function g(t,e,n,i,r){var a={};return Object.keys(i).forEach((function(t){a[t]=i[t]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,i){return i(t,e,n)||n}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}t({D:_,E:function(t){"__enums__"in t||ct(t,"__enums__",null,!0)},I:xr,J:kr,L:Er,N:Dr,R:Br,U:Ur,X:Fr,Z:Hr,_:g,a$:St,a0:function(t,e){return Math.abs(t-e)<=Vn*Math.max(1,Math.abs(t),Math.abs(e))},a1:function(t,e,n){return n=n||Vn,Math.abs(t-e)<=n},a2:function(t){return t<0?0:t>1?1:t},a3:function(t,e,n){return t+(e-t)*n},a4:function(t){return t*Ln},a5:Un,a7:Fn,a8:function(t,e){return Math.floor(Fn(t,e))},a9:Yn,aA:An,aG:$,aH:tt,aJ:function(t){return function(e){return function(n){rn(n,t,e)}}},aK:function(t,e){return nn((function(n,i){rn(n,t,void 0!==e?e:i)}))},aL:on,aM:cr,aN:a,aO:c,aQ:function(t,e){},aR:f,aS:ae,aT:vr,aU:yr,aY:At,aZ:e,a_:J,aa:Hn,ab:function(t,e,n){return Math.floor(Hn(t,e,n))},ac:function(t){return--t,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},ad:Xn,ae:function(t,e){return t=Xn(t,2*e),t=e-Math.abs(t-e)},af:function(t,e,n){return(n-t)/(e-t)},ag:function(t){return Math.abs(t.x)>Math.abs(t.y)?Math.abs(t.x)>Math.abs(t.z)?t.x:t.z:Math.abs(t.y)>Math.abs(t.z)?t.y:t.z},ah:function(t,e){return Math.abs(t)>Math.abs(e)?t:e},ai:re,aj:se,an:function(t){t>0&&($r=t)},ao:void 0,ap:void 0,aq:void 0,ar:Qe,at:gn,b:s,b1:Bt,b5:function(t){return on(hn({formerlySerializedAs:t}))},bE:function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var s,m=t[Symbol.iterator]();!(i=(s=m.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==m.return||m.return()}finally{if(r)throw a}}return n}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},bF:function(t,e,n,i,r){if(!y(t,e,n,i||t)&&r)throw new Error("failed to set property");return n},bH:it,bI:rt,bK:lr,bQ:Jt,bR:Et,bg:Lt,bi:It,bj:fe,bl:dt,bo:Vt,bp:_t,bq:pt,bs:Zt,bt:te,bu:function(t,e){if(0===Wi.length)return new Error(J(4927));var n;if(Ui.WEB_AUDIO){var i=t._owner instanceof Li;n=i?t._owner.loadMode===ji.WEB_AUDIO?Yi:Fi:t.urlParam&&t.urlParam.useDom?Fi:Yi}else n=Fi;n(t,e)},bw:B,d:n,e:h,f:m,g:p,i:u,j:r,k:Gn,o:D,p:j,q:L,t:yn,u:V,v:W,w:q,x:Y,y:X,z:Z});const x=t("b0",!1),b=t("bk",!1),w=t("bJ",!1),M=t("bv",!1),k=t("bC",!1),z=t("bD",!1),E=t("bB",!1);var A="undefined"==typeof window?global:window,O=t("l",{_global:A});O.internal={},A.CC_BUILD=!0,A.CC_TEST=b,A.CC_EDITOR=x,A.CC_PREVIEW=!1,A.CC_DEV=!1,A.CC_DEBUG=M,A.CC_JSB=E,A.CC_BYTEDANCE=!1,A.CC_WECHAT=w,A.CC_ALIPAY=!1,A.CC_XIAOMI=!1,A.CC_BAIDU=!1,A.CC_COCOSPLAY=!1,A.CC_HUAWEI=!1,A.CC_OPPO=!1,A.CC_VIVO=!1,A.CC_MINIGAME=z,A.CC_RUNTIME_BASED=k,A.CC_SUPPORT_JIT=!0;A.CocosEngine=O.ENGINE_VERSION="1.2.0",A.cc=O;var N="https://github.com/cocos-creator/engine/blob/3d/EngineErrorMap.md",S=null,I=console.log,T=console.log,R=console.log,P=function(t,e){if(!t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];console.log("ASSERT: "+C.apply(void 0,[e].concat(i)))}};function C(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return O.js.formatStr.apply(null,[t].concat(n))}function D(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return I.apply(void 0,[t].concat(n))}function q(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return T.apply(void 0,[t].concat(n))}function j(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return R.apply(void 0,[t].concat(n))}function L(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return P.apply(void 0,[t,e].concat(i))}function B(t){if(I=T=R=P=function(){},t!==Q.NONE){if(t>Q.ERROR){var e=function(t){if(O.game.canvas){if(!S){var e=document.createElement("Div");e.setAttribute("id","logInfoDiv"),e.setAttribute("width","200"),e.setAttribute("height",O.game.canvas.height);var n=e.style;n.zIndex="99999",n.position="absolute",n.top=n.left="0",(S=document.createElement("textarea")).setAttribute("rows","20"),S.setAttribute("cols","30"),S.setAttribute("disabled","true");var i=S.style;i.backgroundColor="transparent",i.borderBottom="1px solid #cccccc",i.borderTopWidth=i.borderLeftWidth=i.borderRightWidth="0px",i.borderTopStyle=i.borderLeftStyle=i.borderRightStyle="none",i.padding="0px",i.margin="0px",e.appendChild(S),O.game.canvas.parentNode.appendChild(e)}S.value=S.value+t+"\r\n",S.scrollTop=S.scrollHeight}};R=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e("ERROR :  "+C.apply(void 0,[t].concat(i)))},P=function(t,n){if(!t){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];e("ASSERT: "+C.apply(void 0,[n].concat(r)))}},t!==Q.ERROR_FOR_WEB_PAGE&&(T=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e("WARN :  "+C.apply(void 0,[t].concat(i)))}),t===Q.INFO_FOR_WEB_PAGE&&(I=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e(C.apply(void 0,[t].concat(i)))})}else console&&console.log.apply&&(console.error||(console.error=console.log),console.warn||(console.warn=console.log),R=console.error.bind?console.error.bind(console):function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return console.error.apply(console,[t].concat(n))},P=function(t,e){if(!t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=C.apply(void 0,[e].concat(i));throw new Error(a)}});t!==Q.ERROR&&(T=console.warn.bind?console.warn.bind(console):function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return console.warn.apply(console,[t].concat(n))}),t===Q.INFO&&(I=console.log.bind?console.log.bind(console):function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return console.log.apply(console,[t].concat(n))})}}function V(t){var e=t.stack;j(e||t)}function G(t){return function(e){for(var n="".concat(t," ").concat(e,", please go to ").concat(N,"#").concat(e," to see details."),i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return 0===r.length?n:n+" Arguments: "+r.join(", ")}}var U=G("Log");function W(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];D(U.apply(void 0,[t].concat(n)))}var F=G("Warning");function Y(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];q(F.apply(void 0,[t].concat(n)))}var H=G("Error");function X(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];j(H.apply(void 0,[t].concat(n)))}var Q,K=G("Assert");function Z(t,e){if(!t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];L(!1,K.apply(void 0,[e].concat(i)))}}function J(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return H.apply(void 0,[t].concat(n))}function $(){return!!O.profiler&&O.profiler.isShowingStats()}function tt(t){O.profiler&&(t?O.profiler.showStats():O.profiler.hideStats(),O.game.config.showFPS=!!t)}!function(t){t[t.NONE=0]="NONE",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t[t.INFO_FOR_WEB_PAGE=4]="INFO_FOR_WEB_PAGE",t[t.WARN_FOR_WEB_PAGE=5]="WARN_FOR_WEB_PAGE",t[t.ERROR_FOR_WEB_PAGE=6]="ERROR_FOR_WEB_PAGE"}(Q||(Q={})),t("B",Object.freeze({__proto__:null,log:D,warn:q,error:j,assert:L,_resetDebugSetting:B,_throw:V,logID:W,warnID:Y,errorID:X,assertID:Z,get DebugMode(){return Q},getError:J,isDisplayStats:$,setDisplayStats:tt}));var et=t("bA",function(){function t(e){n(this,t),this.i=0,this.array=e}return r(t,[{key:"remove",value:function(t){var e=this.array.indexOf(t);e>=0&&this.removeAt(e)}},{key:"removeAt",value:function(t){this.array.splice(t,1),t<=this.i&&--this.i}},{key:"fastRemove",value:function(t){var e=this.array.indexOf(t);e>=0&&this.fastRemoveAt(e)}},{key:"fastRemoveAt",value:function(t){var e=this.array;e[t]=e[e.length-1],--e.length,t<=this.i&&--this.i}},{key:"push",value:function(t){this.array.push(t)}},{key:"length",get:function(){return this.array.length},set:function(t){this.array.length=t,this.i>=t&&(this.i=t-1)}}]),t}());function nt(t,e){t.splice(e,1)}function it(t,e){var n=t.indexOf(e);return n>=0&&(nt(t,n),!0)}function rt(t,e){return t.indexOf(e)>=0}var at=Object.freeze({__proto__:null,removeAt:nt,fastRemoveAt:function(t,e){var n=t.length;e<0||e>=n||(t[e]=t[n-1],t.length=n-1)},remove:it,fastRemove:function(t,e){var n=t.indexOf(e);n>=0&&(t[n]=t[t.length-1],--t.length)},removeIf:function(t,e){var n=t.findIndex(e);if(n>=0){var i=t[n];return nt(t,n),i}},verifyType:function(t,e){if(t&&t.length>0)for(var n,i=_(t);!(n=i()).done;){if(!(n.value instanceof e))return W(1300),!1}return!0},removeArray:function(t,e){for(var n=0,i=e.length;n<i;n++)it(t,e[n])},appendObjectsAt:function(t,e,n){return t.splice.apply(t,[n,0].concat(f(e))),t},contains:rt,copy:function(t){for(var e=t.length,n=new Array(e),i=0;i<e;i+=1)n[i]=t[i];return n},MutableForwardIterator:et}),st=t("aP",function(){function t(e){n(this,t),this.id=void 0,this.prefix=void 0,this.id=0|998*Math.random(),this.prefix=e?e+".":""}return r(t,[{key:"getNewId",value:function(){return this.prefix+ ++this.id}}]),t}());st.global=new st("global");var mt=new st("TmpCId."),ot="undefined"==typeof Symbol?"__aliases__":Symbol("[[Aliases]]");function ut(t){return"number"==typeof t||t instanceof Number}function ht(t){return"string"==typeof t||t instanceof String}var lt,ct=t("bn",(lt={value:void 0,enumerable:!1,writable:!1,configurable:!0},function(t,e,n,i,r){lt.value=n,lt.writable=i,lt.enumerable=r,Object.defineProperty(t,e,lt),lt.value=void 0})),yt=function(){var t={get:void 0,set:void 0,enumerable:!1};return function(e,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];"boolean"==typeof r&&(a=r,r=void 0),t.get=i,t.set=r,t.enumerable=a,t.configurable=s,Object.defineProperty(e,n,t),t.get=void 0,t.set=void 0}}(),ft=function(){var t={get:void 0,enumerable:!1,configurable:!1};return function(e,n,i,r,a){t.get=i,t.enumerable=r,t.configurable=a,Object.defineProperty(e,n,t),t.get=void 0}}(),vt=function(){var t={set:void 0,enumerable:!1,configurable:!1};return function(e,n,i,r,a){t.set=i,t.enumerable=r,t.configurable=a,Object.defineProperty(e,n,t),t.set=void 0}}();function dt(t){var e=Object.create(null);if(t){e["."]=!0,e["/"]=!0,delete e["."],delete e["/"]}return e}function _t(t){if("function"==typeof t){var e=t.prototype;if(e&&e.hasOwnProperty("__classname__")&&e.__classname__)return e.__classname__;var n="";if(t.name&&(n=t.name),t.toString){var i,r=t.toString();(i="["===r.charAt(0)?r.match(/\[\w+\s*(\w+)\]/):r.match(/function\s*(\w+)/))&&2===i.length&&(n=i[1])}return"Object"!==n?n:""}return t&&t.constructor?_t(t.constructor):""}function pt(t,e,n,i){var r=/([^.]+)$/,a=r.exec(e)[0],s=r.exec(n)[0];function m(){return this[s]}i?yt(t,a,m,(function(t){this[s]=t})):ft(t,a,m)}function gt(t,e,n,i){for(var r in n){pt(t,e+"."+r,n[r],i)}}var xt=/(%d)|(%s)/,bt=/%s/;function wt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(0===arguments.length)return"";if(0===n.length)return""+t;var r="string"==typeof t&&xt.test(t);if(r)for(var a,s=_(n);!(a=s()).done;){var m=a.value,o="number"==typeof m?xt:bt;o.test(t)?t=t.replace(o,m):t+=" "+m}else for(var u,h=_(n);!(u=h()).done;){var l=u.value;t+=" "+l}return t}function Mt(){for(var t=arguments.length-1,e=new Array(t),n=0;n<t;++n)e[n]=arguments[n+1];return e}function kt(t,e){for(;t;){var n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Object.getPrototypeOf(t)}return null}function zt(t,e,n){var i=kt(e,t);i&&Object.defineProperty(n,t,i)}function Et(t){t=t||{};for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0,s=i;a<s.length;a++){var m=s[a];if(m){if("object"!==e(m)){X(5402,m);continue}for(var o in m)o in t||zt(o,m,t)}}return t}function At(t){t=t||{};for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0,s=i;a<s.length;a++){var m=s[a];if(m){if("object"!==e(m)){X(5403,m);continue}for(var o in m)zt(o,m,t)}}return t}function Ot(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),t}function Nt(t){var e=t.prototype,n=e&&Object.getPrototypeOf(e);return n&&n.constructor}function St(t,e){if(t&&e){if("function"!=typeof t)return!1;if("function"!=typeof e)return!1;if(t===e)return!0;for(;;){if(!(t=Nt(t)))return!1;if(t===e)return!0}}return!1}function It(t){for(var e=0,n=Object.keys(t);e<n.length;e++){delete t[n[e]]}}function Tt(t){return"string"!=typeof t||t.startsWith(mt.prefix)}var Rt={},Pt={};function Ct(t,e){var n=Rt;if(e.prototype.hasOwnProperty("__cid__")&&delete n[e.prototype.__cid__],ct(e.prototype,"__cid__",t),t){var i=n[t];if(i&&i!==e)j('A Class already exists with the same __cid__ : "'+t+'".');else n[t]=e}}function Dt(t,e){if(function(t,e){var n=Pt;if(e.prototype.hasOwnProperty("__classname__")&&delete n[e.prototype.__classname__],ct(e.prototype,"__classname__",t),t){var i=n[t];if(i&&i!==e)j('A Class already exists with the same __classname__ : "'+t+'".');else n[t]=e}}(t,e),!e.prototype.hasOwnProperty("__cid__")){var n=t||mt.getNewId();n&&Ct(n,e)}}function qt(t,e){var n=Pt[e],i=Rt[e],r=!0;if(n&&n!==t&&(j('"'.concat(e,'" has already been set as name or alias of another class.')),r=!1),i&&i!==t&&(j('"'.concat(e,'" has already been set as id or alias of another class.')),r=!1),r){var a=t[ot];a||(a=[],t[ot]=a),a.push(e),Pt[e]=t,Rt[e]=t}}function jt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0,r=e;i<r.length;i++){var a=r[i],s=a.prototype,m=s.__cid__;m&&delete Rt[m];var o=s.__classname__;o&&delete Pt[o];var u=s[ot];if(u)for(var h=0;h<u.length;++h){var l=u[h];delete Pt[l],delete Rt[l]}}}function Lt(t){return Rt[t]}function Bt(t){return Pt[t]}function Vt(t,e){var n;if(e=void 0===e||e,"function"==typeof t&&t.prototype.hasOwnProperty("__cid__"))return n=t.prototype.__cid__,!e&&x&&Tt(n)?"":n;if(t&&t.constructor){var i=t.constructor.prototype;if(i&&i.hasOwnProperty("__cid__"))return n=t.__cid__,!e&&x&&Tt(n)?"":n}return""}var Gt=t("bh",function(){function t(e,i){n(this,t),this.count=void 0,this._pool=void 0,this._cleanup=void 0;var r=void 0===i?e:i,a=void 0===i?null:e;this.count=0,this._pool=new Array(r),this._cleanup=a}return r(t,[{key:"get",value:function(){return this._get()}}]),r(t,[{key:"_get",value:function(){if(this.count>0){--this.count;var t=this._pool[this.count];return this._pool[this.count]=null,t}return null}},{key:"put",value:function(t){var e=this._pool;if(this.count<e.length){if(this._cleanup&&!1===this._cleanup(t))return;e[this.count]=t,++this.count}}},{key:"resize",value:function(t){t>=0&&(this._pool.length=t,this.count>t&&(this.count=t))}}]),t}()),Ut=t("bz",at),Wt=t("n",{IDGenerator:st,Pool:Gt,array:at,isNumber:ut,isString:ht,getPropertyDescriptor:kt,addon:Et,mixin:At,extend:Ot,getSuper:Nt,isChildClassOf:St,clear:It,value:ct,getset:yt,get:ft,set:vt,unregisterClass:jt,getClassName:_t,setClassName:Dt,setClassAlias:qt,getClassByName:Bt,_getClassId:Vt,_setClassId:Ct,_getClassById:Lt,obsolete:pt,obsoletes:gt,formatStr:wt,shiftArguments:Mt,createMap:dt});O.js=Wt,t("al",Object.freeze({__proto__:null,array:Ut,js:Wt,IDGenerator:st,Pool:Gt,isNumber:ut,isString:ht,value:ct,getset:yt,get:ft,set:vt,createMap:dt,getClassName:_t,obsolete:pt,obsoletes:gt,formatStr:wt,shiftArguments:Mt,getPropertyDescriptor:kt,addon:Et,mixin:At,extend:Ot,getSuper:Nt,isChildClassOf:St,clear:It,_idToClass:Rt,_nameToClass:Pt,_setClassId:Ct,setClassName:Dt,setClassAlias:qt,unregisterClass:jt,_getClassById:Lt,getClassByName:Bt,_getClassId:Vt}));for(var Ft=t("bf",/^(?:cc|dragonBones|sp|ccsg)\..+/),Yt=new Array(123),Ht=0;Ht<123;++Ht)Yt[Ht]=64;for(var Xt=0;Xt<64;++Xt)Yt["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(Xt)]=Xt;var Qt=t("br",Yt);function Kt(t,e,n){function i(t,e,n,i){var r=Object.getOwnPropertyDescriptor(t,e);if(r)r.get&&(t[n]=r.get),r.set&&i&&(t[i]=r.set);else{var a=t[n];yt(t,e,a,t[i])}}for(var r,a=t.prototype,s=0;s<e.length;s++){var m=(r=e[s])[0].toUpperCase()+r.slice(1);i(a,r,"get"+m,"set"+m)}for(r in n){var o=n[r];i(a,r,o[0],o[1])}}function Zt(t,e,n,i){var r=t[e];r?Array.isArray(r)?i?(r.push(r[0]),r[0]=n):r.push(n):t[e]=i?[n,r]:[r,n]:t[e]=n}function Jt(t,e){if("function"==typeof t.contains)return t.contains(e);if("function"==typeof t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));var n=e.parentNode;if(n)do{if(n===t)return!0;n=n.parentNode}while(null!==n);return!1}function $t(t){return"object"===("undefined"==typeof window?"undefined":e(window))&&"function"==typeof Node?t instanceof Node:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function te(t,e,n){t&&setTimeout((function(){t(e,n)}),0)}function ee(t){return Function("target","try {\n  target."+t+"();\n}\ncatch (e) {\n  cc._throw(e);\n}")}function ne(t){if(!t||t.constructor!==Object)return!1;for(var e in t)return!1;return!0}function ie(t){return t&&"function"==typeof t.clone&&(t.constructor&&t.constructor.prototype.hasOwnProperty("clone")||t.hasOwnProperty("clone"))}function re(t){if("__bitmask__"in t)return t;ct(t,"__bitmask__",null,!0);for(var e=-1,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],a=t[r];if(-1===a)a=++e,t[r]=a;else if("number"==typeof a)e=a;else if("string"==typeof a&&Number.isInteger(parseFloat(r)))continue;var s=""+a;r!==s&&ct(t,s,r)}return t}function ae(t,e){}function se(t){return"__enums__"in t?t:(ct(t,"__enums__",null,!0),se.update(t))}function me(t){t.hasOwnProperty("__enums__")}function oe(t){me(t);var e=t.__enums__||[];for(var n in e.length=0,t){var i=t[n];Number.isInteger(i)&&e.push({name:n,value:i})}return e.sort((function(t,e){return t.value-e.value})),t.__enums__=e,e}O.misc={BUILTIN_CLASSID_RE:Ft,BASE64_VALUES:Qt,propertyDefine:Kt,pushToMap:Zt,contains:Jt,isDomNode:$t,callInNextTick:te,tryCatchFunctor_EDITOR:ee,isPlainEmptyObj_DEV:ne,cloneable_DEV:ie},t("am",Object.freeze({__proto__:null,BUILTIN_CLASSID_RE:Ft,BASE64_VALUES:Qt,propertyDefine:Kt,pushToMap:Zt,contains:Jt,isDomNode:$t,callInNextTick:te,tryCatchFunctor_EDITOR:ee,isPlainEmptyObj_DEV:ne,cloneable_DEV:ie})),re.isBitMask=function(t){return t&&t.hasOwnProperty("__bitmask__")},re.getList=function(t){if(t.__bitmask__)return t.__bitmask__;var e=t.__bitmask__=[];for(var n in t){var i=t[n];Number.isInteger(i)&&e.push({name:n,value:i})}return e.sort((function(t,e){return t.value-e.value})),e},O.BitMask=re,se.update=function(t){for(var e=-1,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],a=t[r];if(-1===a)a=++e,t[r]=a;else if("number"==typeof a)e=a;else if("string"==typeof a&&Number.isInteger(parseFloat(r)))continue;var s=""+a;r!==s&&ct(t,s,r)}return Array.isArray(t.__enums__)&&oe(t),t},se||(se=t("aj",{})),se.isEnum=function(t){return t&&t.hasOwnProperty("__enums__")},se.getList=function(t){return me(t),t.__enums__?t.__enums__:oe(t)},O.Enum=se;var ue=t("ak",function(){function t(){n(this,t)}return r(t,[{key:"clone",value:function(){return X(100,_t(this)+".clone"),this}},{key:"equals",value:function(t){return!1}},{key:"set",value:function(t){X(100,_t(this)+".set")}},{key:"toString",value:function(){return""+{}}}]),t}());Dt("cc.ValueType",ue),O.ValueType=ue;var he=t("bm","$_$");function le(t,e,n){var i;i=function(){},n&&Ot(i,n.constructor);var r=new i;return ct(t,"__attrs__",r),r}function ce(t){for(var e,n=O.Class.getInheritanceChain(t),i=n.length-1;i>=0;i--){var r=n[i];r.hasOwnProperty("__attrs__")&&r.__attrs__||le(r,0,(e=n[i+1])&&e.__attrs__)}return le(t,0,(e=n[0])&&e.__attrs__),t.__attrs__}function ye(t,n,i){var r,a;if("function"==typeof t)a=(r=fe(t)).constructor.prototype;else{var s=t;if(!(r=s.__attrs__))r=le(s,0,fe(t=s.constructor));a=r}if(void 0===i){var m=n+he,o={};for(var u in r)u.startsWith(m)&&(o[u.slice(m.length)]=r[u]);return o}if("object"===e(i))for(var h in i)95!==h.charCodeAt(0)&&(a[n+he+h]=i[h])}function fe(t){return t.hasOwnProperty("__attrs__")&&t.__attrs__||ce(t)}function ve(t){return fe(t).constructor.prototype}function de(t,e,n,i){ve(t)[e+he+n]=i}var _e=function(){function t(e,i){n(this,t),this.name=void 0,this.default=void 0,this.name=e,this.default=i}return r(t,[{key:"toString",value:function(){return this.name}}]),t}(),pe=t("au",new _e("Integer",0));O.Integer=pe,O.CCInteger=pe;var ge=t("av",new _e("Float",0));O.Float=ge,O.CCFloat=ge;var xe=t("aw",new _e("Boolean",!1));O.Boolean=xe,O.CCBoolean=xe;var be=t("ax",new _e("String",""));function we(t,n){return function(i,r){var a='"'+_t(i)+"."+r+'"',s=ye(i,r);if(!s.saveUrlAsAsset){var m=s.type;if(m===pe||m===ge?m="Number":m!==be&&m!==xe||(m=m.toString()),m!==t)return void Y(3604,a)}if(s.hasOwnProperty("default")){var o=s.default;if(void 0!==o)if(!(Array.isArray(o)||ne(o))){var u=e(o),h=t.toLowerCase();if(u===h){if(!s.saveUrlAsAsset)if("object"===h){if(!o||o instanceof s.ctor)return;Y(3605,a,_t(s.ctor))}else"Number"!==t&&Y(3606,n,a,t)}else{if("function"===u)return;t===be.default&&null==o?St(s.ctor,O.RawAsset)||Y(3607,a):Y(3611,n,a,u)}delete s.type}}}}O.String=be,O.CCString=be;var Me=Object.freeze({__proto__:null,DELIMETER:he,createAttrsSingle:le,createAttrs:ce,attr:ye,getClassAttrs:fe,getClassAttrsProto:ve,setClassAttr:de,PrimitiveType:_e,CCInteger:pe,CCFloat:ge,CCBoolean:xe,CCString:be,getTypeChecker:we,getObjTypeChecker:function(t){return function(e,n){we("Object","type")(e,n);var i=fe(e)[n+he+"default"],r=O.Class.getDefault(i);if(!Array.isArray(r)&&St(t,O.ValueType)){var a=_t(t),s=wt('No need to specify the "type" of "%s.%s" because %s is a child class of ValueType.',_t(e),n,a);i?D(s):Y(3612,s,a,_t(e),n,a)}}}}),ke={url:{canUsedInGet:!0},default:{},serializable:{},editorOnly:{},formerlySerializedAs:{}};function ze(t,e,n,i){if(!t.get&&!t.set&&t.hasOwnProperty("default")){var r="_N$"+e;t.get=function(){return this[r]},t.set=function(t){var e=this[r];this[r]=t,n.call(this,e)};var a={};for(var s in i[r]=a,ke){var m=ke[s];t.hasOwnProperty(s)&&(a[s]=t[s],m.canUsedInGet||delete t[s])}}}function Ee(t,e,n,i){Array.isArray(i)&&i.length>0&&(i=i[0]),t.type=i}function Ae(t,e,n,i){if(Array.isArray(e)){if(!(e.length>0))return X(5508,n,i);if(O.RawAsset.isRawAssetType(e[0]))return t.url=e[0],void delete t.type;t.type=e=e[0]}}function Oe(t,e,n){if(!(t&&t.constructor===Object)){if(Array.isArray(t)&&t.length>0){t[0];return{default:[],type:t,_short:!0}}if("function"==typeof t){var i=t;return O.RawAsset.isRawAssetType(i)?{default:"",url:i,_short:!0}:{default:St(i,O.ValueType)?new i:null,type:i,_short:!0}}return t instanceof _e?{default:t.default,_short:!0}:{default:t,_short:!0}}return null}function Ne(t,e,n,i,r){return"function"==typeof t||null===t}var Se=[];function Ie(){return Se[Se.length-1]}O._RF={push:function(t,e,n,i){void 0===n&&(n=e,e=""),Se.push({uuid:e,script:n,module:t,exports:t.exports,beh:null,importMeta:i})},pop:function(){var t=Se.pop(),e=t.module,n=e.exports;if(n===t.exports){for(var i in n)return;e.exports=n=t.cls}},peek:Ie};var Te=he,Re=["name","extends","mixins","ctor","__ctor__","properties","statics","editor","__ES6__"];function Pe(t,e){t.indexOf(e)<0&&t.push(e)}var Ce={datas:null,push:function(t){if(this.datas)this.datas.push(t);else{this.datas=[t];var e=this;setTimeout((function(){e.init()}),0)}},init:function(){var t=this.datas;if(t){for(var e=0;e<t.length;++e){var n=t[e],i=n.cls,r=n.props;"function"==typeof r&&(r=r());var a=_t(i);r?Xe(i,a,r,i.$super,n.mixins):X(3633,a)}this.datas=null}}};var De=[];function qe(t,e,n,i,r){de(t,n,"default",i.default),function(t,e){Pe(t.__props__,e)}(t,n);var a=Je(t,i,e,n);if(a){for(var s=De,m=0;m<a.length;m++){var o=a[m];ye(t,n,o),!1===o.serializable&&Pe(t.__values__,n),o._onAfterProp&&s.push(o._onAfterProp)}for(var u=0;u<s.length;u++)s[u](t,n);De.length=0,a.length=0}}function je(t,e,n,i,r){var a=i.get,s=i.set,m=t.prototype,o=!Object.getOwnPropertyDescriptor(m,n);if(a){for(var u=Je(t,i,e,n),h=0;h<u.length;h++)ye(t,n,u[h]);u.length=0,de(t,n,"serializable",!1),r||ft(m,n,a,o,o)}s&&(r||vt(m,n,s,o,o))}function Le(t){return"function"==typeof t?t():t}function Be(t,e,n){for(var i in e)t.hasOwnProperty(i)||n&&!n(i)||Object.defineProperty(t,i,kt(e,i))}function Ve(t,e,n,i){var r,a,s=i.__ctor__,m=i.ctor,o=i.__ES6__;o?(r=[m],a=m):(r=s?[s]:function(t,e,n){for(var i=[],r=[t].concat(e),a=0;a<r.length;a++){var s=r[a];if(s)for(var m=(u=s,Qe._isCCClass(u)?u.__ctors__||[]:[u]),o=0;o<m.length;o++)Pe(i,m[o])}var u;var h=n.ctor;h&&i.push(h);return i}(e,n,i),a=Ye(r,e,t,i),ct(a,"extend",(function(t){return t.extends=this,Qe(t)}),!0)),ct(a,"__ctors__",r.length>0?r:null,!0);var u=a.prototype;if(e&&(o||(Ot(a,e),u=a.prototype),a.$super=e),n){for(var h=function(t){var e=n[t];Be(u,e.prototype),Be(a,e,(function(t){return e.hasOwnProperty(t)&&!0})),Qe._isCCClass(e)&&Be(fe(a).constructor.prototype,fe(e).constructor.prototype)},l=n.length-1;l>=0;l--)h(l);u.constructor=a}return o||(u.__initProps__=Fe),Dt(t,a),a}function Ge(t){for(var e=_t(t),n=t.constructor,i="new "+e+"(",r=0;r<n.__props__.length;r++){i+=t[n.__props__[r]],r<n.__props__.length-1&&(i+=",")}return i+")"}function Ue(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}var We=/^[A-Za-z_$][0-9A-Za-z_$]*$/;function Fe(t){var n=fe(t),i=t.__props__;null===i&&(Ce.init(),i=t.__props__);var r=function(t,n){for(var i=[],r="",a=0;a<n.length;a++){var s=n[a],m=s+Te+"default";if(m in t){var o=void 0;o=We.test(s)?"this."+s+"=":"this["+Ue(s)+"]=";var u=void 0,h=t[m];if("object"===e(h)&&h)u=h instanceof O.ValueType?Ge(h):Array.isArray(h)?"[]":"{}";else if("function"==typeof h){var l=i.length;i.push(h),u="F["+l+"]()"}else u="string"==typeof h?Ue(h):h;r+=o=o+u+";\n"}}return 0===i.length?Function(r):Function("F","return (function(){\n"+r+"})")(i)}(n,i);t.prototype.__initProps__=r,r.call(this)}var Ye=function(t,e,n,i){var r="return function CCClass(){\n";e&&function(t,e,n){var i=!1;for(var r in e)if(!(Re.indexOf(r)>=0)){var a=e[r];if("function"==typeof a){var s=kt(t.prototype,r);if(s){var m=s.value;if("function"==typeof m){He.test(a)&&(i=!0,e[r]=function(t,e){return function(){var n=this._super;this._super=t;var i=e.apply(this,arguments);return this._super=n,i}}(m,a));continue}}}}return i}(e,i)&&(r+="this._super=null;\n"),r+="this.__initProps__(CCClass);\n";var a=t.length;if(a>0){0;var s="].apply(this,arguments);\n";if(1===a)r+="CCClass.__ctors__[0"+s;else{r+="var cs=CCClass.__ctors__;\n";for(var m=0;m<a;m++)r+="cs["+m+s}0}return r+="}",Function(r)()};var He=/xyz/.test(function(){}.toString())?/\b\._super\b/:/.*/;function Xe(t,e,n,i,r,a){if(t.__props__=[],i&&i.__props__&&(t.__props__=i.__props__.slice()),r)for(var s=0;s<r.length;++s){var m=r[s];m.__props__&&(t.__props__=t.__props__.concat(m.__props__.filter((function(e){return t.__props__.indexOf(e)<0}))))}if(n)for(var o in function(t,e,n,i){for(var r in t){var a=t[r],s=Oe(a);if(s&&(a=t[r]=s),a){var m=a.notify;m&&ze(a,r,m,t),"type"in a&&Ae(a,a.type,e,r),"url"in a&&Ee(a,0,0,a.url),"type"in a&&a.type}}}(n,e),n){var u=n[o];"default"in u?qe(t,e,o,u):je(t,e,o,u,a)}var h=fe(t);t.__values__=t.__props__.filter((function(t){return!1!==h[t+Te+"serializable"]}))}function Qe(t){var e=(t=t||{}).name,n=t.extends,i=t.mixins,r=function(t,e,n,i){var r=O.Component,a=Ie();if(a&&St(e,r)){if(St(a.cls,r))return X(3615),null;t=t||a.script}var s=Ve(t,e,n,i),m=St(e,O.RenderPipeline),o=St(e,O.RenderFlow),u=St(e,O.RenderStage);if(m||o||u||!1){var h="";m?h="render_pipeline":o?h="render_flow":u&&(h="render_stage"),h&&Ct(t,s)}if(a)if(St(e,r)){var l=a.uuid;l&&Ct(l,s),a.cls=s}else St(a.cls,r)||(a.cls=s);return s}(e,n,i,t);e||(e=O.js.getClassName(r)),r._sealed=!0,n&&(n._sealed=!1);var a=t.properties;"function"==typeof a||n&&null===n.__props__||i&&i.some((function(t){return null===t.__props__}))?(Ce.push({cls:r,props:a,mixins:i}),r.__props__=r.__values__=null):Xe(r,e,a,n,t.mixins,t.__ES6__);var s,m=t.statics;if(m)for(s in m)r[s]=m[s];for(var o in t)if(!(Re.indexOf(o)>=0)){var u=t[o];Ne(u)&&ct(r.prototype,o,u,!0,!0)}var h=t.editor;return h&&St(n,O.Component)&&O.Component._registerEditorProps(r,h),r}Qe._isCCClass=function(t){return t&&t.hasOwnProperty&&t.hasOwnProperty("__ctors__")},Qe.fastDefine=function(t,e,n){Dt(t,e);for(var i=e.__props__=e.__values__=Object.keys(n),r=ve(e),a=0;a<i.length;a++){var s=i[a];r[s+Te+"visible"]=!1,r[s+Te+"default"]=n[s]}},Qe.Attr=Me,Qe.attr=ye,Qe.getInheritanceChain=function(t){for(var e=[];t=Nt(t);)t!==Object&&e.push(t);return e};var Ke={Integer:"Number",Float:"Number",Boolean:"Boolean",String:"String"},Ze=[];function Je(t,n,i,r,a){var s=null,m="";function o(){return m=r+Te,s=ve(t)}Ze.length=0;var u=Ze;"type"in n&&void 0===n.type&&Y(3660,r,i);var h=n.type;if(h)if(Ke[h])u.push({type:h,_onAfterProp:void 0});else if("Object"===h);else if("object"===e(h))se.isEnum(h)?u.push({type:"Enum",enumList:se.getList(h)}):re.isBitMask(h)&&u.push({type:"BitMask",bitmaskList:re.getList(h)});else if("function"==typeof h){u.push({type:"Object",ctor:h,_onAfterProp:void 0})}var l,c=function(t,i){if(t in n){var r=n[t];e(r)===i&&((s||o())[m+t]=r)}};(n.editorOnly&&((s||o())[m+"editorOnly"]=!0),n.url&&((s||o())[m+"saveUrlAsAsset"]=!0),n.__noImplicit)?(s||o())[m+"serializable"]=null!==(l=n.serializable)&&void 0!==l&&l:!1===n.serializable&&((s||o())[m+"serializable"]=!1);c("formerlySerializedAs","string");var y=n.range;return y&&Array.isArray(y)&&y.length>=2&&((s||o())[m+"min"]=y[0],(s||o())[m+"max"]=y[1],y.length>2&&((s||o())[m+"step"]=y[2])),c("min","number"),c("max","number"),c("step","number"),u}Qe.isArray=function(t){return t=Le(t),Array.isArray(t)},Qe.getDefault=Le,Qe.escapeForJS=Ue,Qe.IDENTIFIER_RE=We,Qe.getNewValueTypeCode=Ge,O.Class=Qe;var $e=function(){},tn=function(){return $e},en=nn((function(){}));function nn(t){return function(e){return"function"==typeof e?t(e):function(n){return t(n,e)}}}function rn(t,e,n){var i=an(t);if(i){var r=sn(i,"proto");sn(r,"editor")[e]=n}}function an(t,e){return sn(t,"__ccclassCache__")}function sn(t,e){return t[e]||(t[e]={})}var mn=t("c",nn((function(t,e){var n=Wt.getSuper(t);n===Object&&(n=null);var i={name:e,extends:n,ctor:t,__ES6__:!0},r=t.__ccclassCache__;if(r){var a=r.proto;a&&Wt.mixin(i,a),t.__ccclassCache__=void 0}return Qe(i)})));function on(t,n,i){var r=null;function a(t,n,i){var a=an(t.constructor);if(a){var s=sn(a,"proto"),m=sn(s,"properties");!function(t,n,i,r,a,s){var m;r&&(m=(m=Oe(r))||r);var o=n[i],u=Wt.mixin(o||{},m||{});if(a&&(a.get||a.set))a.get&&(u.get=a.get),a.set&&(u.set=a.set);else{var h;if(a)a.initializer&&(h=function(t){var n;try{n=t()}catch(e){return t}return"object"!==e(n)||null===n?n:t}(a.initializer));else{var l=s.default||(s.default=function(t){var e;try{e=new t}catch(t){return{}}return e}(t));l.hasOwnProperty(i)&&(h=l[i])}u.default=h}n[i]=u}(t.constructor,m,n,r,i,a)}}return void 0===t?on({type:void 0}):void 0===n?(r=t,a):void a(t,n,i)}var un=t("s",(function(t,e,n){return on(hn({}))(t,e,n)}));t("be",(function(t,e,n){return on({editorOnly:!0})(t,e,n)}));function hn(t){return t.__noImplicit=!0,"serializable"in t||(t.serializable=!0),t}t("b2",en),t("m",tn),t("b7",en),t("b8",tn),t("b9",tn),t("h",tn),t("F",$e),t("b6",tn),t("bN",$e);var ln=t("b4",tn),cn=t("a",tn);t("r",tn),t("aV",tn),t("aW",tn),t("by",tn),t("bx",$e),t("b3",tn),t("bG",tn),t("bL",$e),t("bP",$e),t("bO",$e),t("ba",yn(pe)),t("bb",yn(ge)),t("bc",yn(xe)),t("bd",yn(be));function yn(t){return on({type:t})}var fn=t("ay",function(){function t(e,i){n(this,t),this.type=void 0,this.bubbles=void 0,this.target=null,this.currentTarget=null,this.eventPhase=0,this.propagationStopped=!1,this.propagationImmediateStopped=!1,this.type=e,this.bubbles=!!i}return r(t,[{key:"unuse",value:function(){this.type=t.NO_TYPE,this.target=null,this.currentTarget=null,this.eventPhase=t.NONE,this.propagationStopped=!1,this.propagationImmediateStopped=!1}},{key:"reuse",value:function(t,e){this.type=t,this.bubbles=e||!1}},{key:"isStopped",value:function(){return this.propagationStopped||this.propagationImmediateStopped}},{key:"getCurrentTarget",value:function(){return this.currentTarget}},{key:"getType",value:function(){return this.type}}]),t}());fn.NO_TYPE="no_type",fn.TOUCH="touch",fn.MOUSE="mouse",fn.KEYBOARD="keyboard",fn.ACCELERATION="acceleration",fn.NONE=0,fn.CAPTURING_PHASE=1,fn.AT_TARGET=2,fn.BUBBLING_PHASE=3,O.Event=fn;var vn=t("P",function(){function t(e,i){n(this,t),this._ctor=void 0,this._elementsPerBatch=void 0,this._nextAvail=void 0,this._freepool=[],this._ctor=e,this._elementsPerBatch=Math.max(i,1),this._nextAvail=this._elementsPerBatch-1;for(var r=0;r<this._elementsPerBatch;++r)this._freepool.push(e())}return r(t,[{key:"alloc",value:function(){if(this._nextAvail<0){for(var t=this._elementsPerBatch,e=0;e<t;e++)this._freepool.push(this._ctor());this._nextAvail=t-1}var n=this._freepool[this._nextAvail--];return this._freepool.length--,n}},{key:"free",value:function(t){this._freepool.push(t),this._nextAvail++}},{key:"freeArray",value:function(t){Array.prototype.push.apply(this._freepool,t),this._nextAvail+=t.length}},{key:"destroy",value:function(t){if(t)for(var e=0;e<=this._nextAvail;e++)t(this._freepool[e]);this._freepool.length=0,this._nextAvail=-1}}]),t}()),dn=[];var _n=t("as",function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n(this,t),this._objFlags=void 0,this._name=void 0,this._name=e,this._objFlags=0}return r(t,null,[{key:"_deferredDestroy",value:function(){for(var t=dn.length,e=0;e<t;++e){var n=dn[e];1&n._objFlags||n._destroyImmediate()}t===dn.length?dn.length=0:dn.splice(0,t)}}]),r(t,[{key:"destroy",value:function(){return 1&this._objFlags?(Y(5e3),!1):!(4&this._objFlags)&&(this._objFlags|=4,dn.push(this),!0)}},{key:"_destruct",value:function(){var t=this.constructor,n=t.__destruct__;n||(n=function(t,n){var i,r=t instanceof O._BaseNode||t instanceof O.Component,a=r?"_id":null,s={};for(i in t)if(t.hasOwnProperty(i)){if(i===a)continue;switch(e(t[i])){case"string":s[i]="";break;case"object":case"function":s[i]=null}}if(Qe._isCCClass(n))for(var m=O.Class.Attr.getClassAttrs(n),o=n.__props__,u=0;u<o.length;u++){var h=(i=o[u])+O.Class.Attr.DELIMETER+"default";if(h in m){if(r&&"_id"===i)continue;switch(e(m[h])){case"string":s[i]="";break;case"object":case"function":s[i]=null;break;case"undefined":s[i]=void 0}}}var l="";for(i in s){var c=void 0;c=Qe.IDENTIFIER_RE.test(i)?"o."+i+"=":"o["+Qe.escapeForJS(i)+"]=";var y=s[i];""===y&&(y='""'),l+=c+y+";\n"}return Function("o",l)}(this,t),ct(t,"__destruct__",n,!0)),n(this)}},{key:"_destroyImmediate",value:function(){1&this._objFlags?X(5e3):(this._onPreDestroy&&this._onPreDestroy(),this._destruct(),this._objFlags|=1)}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"isValid",get:function(){return!(1&this._objFlags)}}]),t}()),pn=_n.prototype;function gn(t,n){return"object"===e(t)?!(!t||t._objFlags&(n?5:1)):void 0!==t}pn._deserialize=null,pn._onPreDestroy=null,Qe.fastDefine("cc.Object",_n,{_name:"",_objFlags:0}),ct(_n,"Flags",{Destroyed:1,DontSave:8,EditorOnly:16,Dirty:32,DontDestroy:64,PersistentMask:-4192741,Destroying:128,Deactivating:256,LockedInEditor:512,HideInHierarchy:1024,IsPreloadStarted:8192,IsOnLoadStarted:32768,IsOnLoadCalled:16384,IsOnEnableCalled:2048,IsStartCalled:65536,IsEditorOnEnableCalled:4096,IsPositionLocked:1<<21,IsRotationLocked:1<<17,IsScaleLocked:1<<18,IsAnchorLocked:1<<19,IsSizeLocked:1<<20}),O.isValid=gn,O.Object=_n;var xn=Ut.fastRemoveAt;function bn(){}var wn=function(){function t(){n(this,t),this.callback=bn,this.target=void 0,this.once=!1}return r(t,[{key:"set",value:function(t,e,n){this.callback=t||bn,this.target=e,this.once=!!n}},{key:"reset",value:function(){this.target=void 0,this.callback=bn,this.once=!1}},{key:"check",value:function(){return!(this.target instanceof _n&&!gn(this.target,!0))}}]),t}(),Mn=new vn((function(){return new wn}),32),kn=function(){function t(){n(this,t),this.callbackInfos=[],this.isInvoking=!1,this.containCanceled=!1}return r(t,[{key:"removeByCallback",value:function(t){for(var e=0;e<this.callbackInfos.length;++e){var n=this.callbackInfos[e];n&&n.callback===t&&(n.reset(),Mn.free(n),xn(this.callbackInfos,e),--e)}}},{key:"removeByTarget",value:function(t){for(var e=0;e<this.callbackInfos.length;++e){var n=this.callbackInfos[e];n&&n.target===t&&(n.reset(),Mn.free(n),xn(this.callbackInfos,e),--e)}}},{key:"cancel",value:function(t){var e=this.callbackInfos[t];e&&(e.reset(),this.isInvoking?this.callbackInfos[t]=null:xn(this.callbackInfos,t),Mn.free(e)),this.containCanceled=!0}},{key:"cancelAll",value:function(){for(var t=0;t<this.callbackInfos.length;t++){var e=this.callbackInfos[t];e&&(e.reset(),Mn.free(e),this.callbackInfos[t]=null)}this.containCanceled=!0}},{key:"purgeCanceled",value:function(){for(var t=this.callbackInfos.length-1;t>=0;--t){this.callbackInfos[t]||xn(this.callbackInfos,t)}this.containCanceled=!1}},{key:"clear",value:function(){this.cancelAll(),this.callbackInfos.length=0,this.isInvoking=!1,this.containCanceled=!1}}]),t}(),zn=new vn((function(){return new kn}),16),En=t("aX",function(){function t(){n(this,t),this._callbackTable=dt(!0)}return r(t,[{key:"on",value:function(t,e,n,i){if(!this.hasEventListener(t,e,n)){var r=this._callbackTable[t];r||(r=this._callbackTable[t]=zn.alloc());var a=Mn.alloc();a.set(e,n,i),r.callbackInfos.push(a)}return e}},{key:"hasEventListener",value:function(t,e,n){var i=this._callbackTable[t];if(!i)return!1;var r=i.callbackInfos;if(!e){if(i.isInvoking){for(var a=0;a<r.length;++a)if(r[a])return!0;return!1}return r.length>0}for(var s=0;s<r.length;++s){var m=r[s];if(m&&m.check()&&m.callback===e&&m.target===n)return!0}return!1}},{key:"removeAll",value:function(t){if("string"==typeof t){var e=this._callbackTable[t];e&&(e.isInvoking?e.cancelAll():(e.clear(),zn.free(e),delete this._callbackTable[t]))}else if(t)for(var n in this._callbackTable){var i=this._callbackTable[n];if(i.isInvoking)for(var r=i.callbackInfos,a=0;a<r.length;++a){var s=r[a];s&&s.target===t&&i.cancel(a)}else i.removeByTarget(t)}}},{key:"off",value:function(t,e,n){var i=this._callbackTable[t];if(i){var r=i.callbackInfos;if(e)for(var a=0;a<r.length;++a){var s=r[a];if(s&&s.callback===e&&s.target===n){i.cancel(a);break}}else this.removeAll(t)}}},{key:"emit",value:function(t,e,n,i,r,a){var s=this._callbackTable[t];if(s){var m=!s.isInvoking;s.isInvoking=!0;for(var o=s.callbackInfos,u=0,h=o.length;u<h;++u){var l=o[u];if(l){var c=l.callback,y=l.target;l.once&&this.off(t,c,y),l.check()?y?c.call(y,e,n,i,r,a):c(e,n,i,r,a):this.off(t,c,y)}}m&&(s.isInvoking=!1,s.containCanceled&&s.purgeCanceled())}}},{key:"clear",value:function(){for(var t in this._callbackTable){var e=this._callbackTable[t];e&&(e.clear(),zn.free(e),delete this._callbackTable[t])}}}]),t}());function An(t){for(var e=function(t){function e(){var t,i;n(this,e);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(i=h(this,(t=m(e)).call.apply(t,[this].concat(a))))._callbackTable=dt(!0),i}return s(e,t),r(e,[{key:"once",value:function(t,e,n){return this.on(t,e,n,!0)}},{key:"targetOff",value:function(t){this.removeAll(t)}}]),e}(t),i=En.prototype,a=Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i)),o=0;o<a.length;++o){var u=a[o];if(!(u in e.prototype)){var l=Object.getOwnPropertyDescriptor(i,u);l&&Object.defineProperty(e.prototype,u,l)}}return e}var On,Nn=t("az",An((function t(){n(this,t)})));O.EventTarget=Nn;var Sn,In,Tn,Rn,Pn,Cn=t("aB",mn("cc.RawAsset")(On=function(t){function e(){var t,i;n(this,e);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(i=h(this,(t=m(e)).call.apply(t,[this].concat(a))))._uuid=void 0,Object.defineProperty(u(i),"_uuid",{value:"",writable:!0}),i}return s(e,t),r(e,null,[{key:"isRawAssetType",value:function(t){return St(t,O.RawAsset)&&!St(t,O.Asset)}}]),e}(_n))||On);O.RawAsset=Cn;var Dn=t("aC",mn("cc.Asset")((Pn=Rn=function(t){function e(){var t,i;n(this,e);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(i=h(this,(t=m(e)).call.apply(t,[this].concat(a)))).loaded=!0,p(i,"_native",Tn,u(i)),i._file=null,i}return s(e,t),r(e,[{key:"toString",value:function(){return this.nativeUrl}},{key:"serialize",value:function(){}},{key:"_setRawAsset",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._native=!1!==e?t||"":"/"+t}},{key:"nativeUrl",get:function(){if(this._native){var t=this._native;if(47===t.charCodeAt(0))return t.slice(1);if(O.AssetLibrary){var e=O.AssetLibrary.getLibUrlNoExt(this._uuid,!0);return 46===t.charCodeAt(0)?e+t:e+"/"+t}X(6400)}return""}},{key:"_nativeAsset",get:function(){return this._file},set:function(t){this._file=t}}],[{key:"deserialize",value:function(t){return O.deserialize(t)}}]),e}(An(Cn)),Rn.preventDeferredLoadDependents=!1,Rn.preventPreloadNativeObject=!1,Tn=g((In=Pn).prototype,"_native",[un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g(In.prototype,"_nativeAsset",[on],Object.getOwnPropertyDescriptor(In.prototype,"_nativeAsset"),In.prototype),Sn=In))||Sn);Dn.prototype.createNode=null,O.Asset=Dn;var qn={INITIALIZING:0,PLAYING:1,STOPPED:2},jn=function(){function t(e){var i=this;n(this,t),this._state=qn.STOPPED,this._duration=0,this._eventTarget=void 0,this._onHide=void 0,this._onShow=void 0,this._interrupted=!1,this._blocking=!1,this._duration=e.duration,this._eventTarget=e.eventTarget,this._onHide=function(){i._blocking=!0,i._state===qn.PLAYING&&(i.pause(),i._interrupted=!0)},this._onShow=function(){i._blocking=!1,i._interrupted&&(i.play(),i._interrupted=!1)},O.game.on(O.Game.EVENT_HIDE,this._onHide),O.game.on(O.Game.EVENT_SHOW,this._onShow)}return r(t,[{key:"getState",value:function(){return this._state}},{key:"getDuration",value:function(){return this._duration}},{key:"destroy",value:function(){O.game.off(O.Game.EVENT_HIDE,this._onHide),O.game.off(O.Game.EVENT_SHOW,this._onShow)}}]),t}();O.internal.AudioPlayer=jn;var Ln=Math.PI/180,Bn=180/Math.PI,Vn=t("$",1e-6);function Gn(t,e,n){if(e>n){var i=e;e=n,n=i}return t<e?e:t>n?n:t}function Un(t){return t*Bn}var Wn=t("a6",Math.random);function Fn(t,e){return Math.random()*(e-t)+t}function Yn(t){return(t=(9301*t+49297)%233280)/233280}function Hn(t,e,n){return Yn(t)*(n-e)+e}function Xn(t,e){return t-Math.floor(t/e)*e}var Qn,Kn=function(t){function e(t){var i;return n(this,e),(i=h(this,m(e).call(this,t)))._volume=1,i._loop=!1,i._oneShotOngoing=!1,i._audio=void 0,i._cbRegistered=!1,i._remove_cb=void 0,i._post_play=void 0,i._on_gesture=void 0,i._post_gesture=void 0,i._audio=t.clip,i._remove_cb=function(){i._cbRegistered&&(O.game.canvas.removeEventListener("touchend",i._on_gesture),O.game.canvas.removeEventListener("mouseup",i._on_gesture),i._cbRegistered=!1)},i._post_play=function(){i._state=qn.PLAYING,i._eventTarget.emit("started"),i._remove_cb()},i._post_gesture=function(){i._interrupted?(i._post_play(),i._interrupted=!1):(i._audio.pause(),i._audio.currentTime=0)},i._on_gesture=function(){if(i._audio){var t=i._audio.play();if(!t)return i._state=qn.PLAYING,void O.director.once(O.Director.EVENT_AFTER_UPDATE,i._post_gesture);t.then(i._post_gesture),i._remove_cb()}},i._audio.volume=i._volume,i._audio.loop=i._loop,i._audio.addEventListener("ended",(function(){i._oneShotOngoing||(i._state=qn.STOPPED,i._audio.currentTime=0,i._eventTarget.emit("ended"))})),O.game.canvas.addEventListener("touchend",i._on_gesture),O.game.canvas.addEventListener("mouseup",i._on_gesture),i._cbRegistered=!0,i}return s(e,t),r(e,[{key:"play",value:function(){var t=this;if(this._audio&&this._state!==qn.PLAYING)if(this._blocking)this._interrupted=!0;else{var e=this._audio.play();if(!e)return this._state=qn.PLAYING,void O.director.once(O.Director.EVENT_AFTER_UPDATE,this._post_play);e.then(this._post_play).catch((function(){t._interrupted=!0}))}}},{key:"pause",value:function(){this._audio&&this._state===qn.PLAYING&&(this._audio.pause(),this._state=qn.STOPPED,this._oneShotOngoing=!1)}},{key:"stop",value:function(){this._audio&&(this._audio.currentTime=0,this._state===qn.PLAYING&&(this._audio.pause(),this._state=qn.STOPPED,this._oneShotOngoing=!1))}},{key:"playOneShot",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=this._audio;n&&(n.currentTime=0,n.volume=e,this._oneShotOngoing||(n.loop=!1,this._oneShotOngoing=!0,n.play().then((function(){n.addEventListener("ended",(function(){n.currentTime=0,n.volume=t._volume,n.loop=t._loop,t._oneShotOngoing=!1}),{once:!0})})).catch((function(){t._oneShotOngoing=!1}))))}},{key:"setCurrentTime",value:function(t){this._audio&&(this._audio.currentTime=Gn(t,0,this._duration))}},{key:"getCurrentTime",value:function(){return this._audio?this._audio.currentTime:0}},{key:"setVolume",value:function(t,e){this._volume=t,this._audio&&(this._audio.volume=t)}},{key:"getVolume",value:function(){return this._audio?this._audio.volume:this._volume}},{key:"setLoop",value:function(t){this._loop=t,this._audio&&(this._audio.loop=t)}},{key:"getLoop",value:function(){return this._loop}},{key:"destroy",value:function(){this._audio&&(this._audio.src=""),c(m(e.prototype),"destroy",this).call(this)}}]),e}(jn),Zn="undefined"==typeof window?global:window;!function(t){t[t.NONE=0]="NONE",t[t.LAN=1]="LAN",t[t.WWAN=2]="WWAN"}(Qn||(Qn={}));var Jn,$n,ti,ei,ni=t("aI",{NetworkType:Qn,LANGUAGE_ENGLISH:"en",LANGUAGE_CHINESE:"zh",LANGUAGE_FRENCH:"fr",LANGUAGE_ITALIAN:"it",LANGUAGE_GERMAN:"de",LANGUAGE_SPANISH:"es",LANGUAGE_DUTCH:"du",LANGUAGE_RUSSIAN:"ru",LANGUAGE_KOREAN:"ko",LANGUAGE_JAPANESE:"ja",LANGUAGE_HUNGARIAN:"hu",LANGUAGE_PORTUGUESE:"pt",LANGUAGE_ARABIC:"ar",LANGUAGE_NORWEGIAN:"no",LANGUAGE_POLISH:"pl",LANGUAGE_TURKISH:"tr",LANGUAGE_UKRAINIAN:"uk",LANGUAGE_ROMANIAN:"ro",LANGUAGE_BULGARIAN:"bg",LANGUAGE_UNKNOWN:"unknown",OS_IOS:"iOS",OS_ANDROID:"Android",OS_WINDOWS:"Windows",OS_LINUX:"Linux",OS_OSX:"OS X",OS_UNKNOWN:"Unknown",UNKNOWN:-1,WIN32:0,LINUX:1,MACOS:2,ANDROID:3,IPHONE:4,IPAD:5,BLACKBERRY:6,NACL:7,EMSCRIPTEN:8,TIZEN:9,WINRT:10,WP8:11,MOBILE_BROWSER:100,DESKTOP_BROWSER:101,EDITOR_PAGE:102,EDITOR_CORE:103,WECHAT_GAME:104,QQ_PLAY:105,BROWSER_TYPE_WECHAT:"wechat",BROWSER_TYPE_COCOSPLAY:"cocosplay",BROWSER_TYPE_HUAWEI_GAME:"huaweiquickgame",BROWSER_TYPE_OPPO_GAME:"oppogame",BROWSER_TYPE_VIVO_GAME:"vivogame",BROWSER_TYPE_ANDROID:"androidbrowser",BROWSER_TYPE_IE:"ie",BROWSER_TYPE_EDGE:"edge",BROWSER_TYPE_QQ:"qqbrowser",BROWSER_TYPE_MOBILE_QQ:"mqqbrowser",BROWSER_TYPE_UC:"ucbrowser",BROWSER_TYPE_UCBS:"ucbs",BROWSER_TYPE_360:"360browser",BROWSER_TYPE_BAIDU_APP:"baiduboxapp",BROWSER_TYPE_BAIDU:"baidubrowser",BROWSER_TYPE_MAXTHON:"maxthon",BROWSER_TYPE_OPERA:"opera",BROWSER_TYPE_OUPENG:"oupeng",BROWSER_TYPE_MIUI:"miuibrowser",BROWSER_TYPE_FIREFOX:"firefox",BROWSER_TYPE_SAFARI:"safari",BROWSER_TYPE_CHROME:"chrome",BROWSER_TYPE_LIEBAO:"liebao",BROWSER_TYPE_QZONE:"qzone",BROWSER_TYPE_SOUGOU:"sogou",BROWSER_TYPE_UNKNOWN:"unknown",isNative:E,isBrowser:"object"===("undefined"==typeof window?"undefined":e(window))&&"object"===("undefined"==typeof document?"undefined":e(document))&&!z&&!E&&!k,isMobile:!1,isLittleEndian:(Jn=new ArrayBuffer(2),new DataView(Jn).setInt16(0,256,!0),256===new Int16Array(Jn)[0]),platform:-1,language:"unknown",os:"Unknown",osVersion:"",osMainVersion:0,browserType:"unknown",browserVersion:"",windowPixelResolution:null,capabilities:null,localStorage:null,__audioSupport:null,getNetworkType:function(){return Qn.LAN},getBatteryLevel:function(){return 1},garbageCollect:function(){},isObjectValid:function(t){return null!=t},dump:function(){var t="";t+="isMobile : "+this.isMobile+"\r\n",t+="language : "+this.language+"\r\n",t+="browserType : "+this.browserType+"\r\n",t+="browserVersion : "+this.browserVersion+"\r\n",t+="capabilities : "+JSON.stringify(this.capabilities)+"\r\n",t+="os : "+this.os+"\r\n",t+="osVersion : "+this.osVersion+"\r\n",t+="platform : "+this.platform+"\r\n",D(t+="Using "+(O.game.renderType===O.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS")+" renderer.\r\n")},openURL:function(t){window.open(t)},now:function(){return Date.now?Date.now():+new Date},dumpRoot:function(){},restartVM:function(){},cleanScript:function(t){},getSafeAreaRect:function(){var t=O.view.getVisibleSize();return O.rect(0,0,t.width,t.height)}});if(Zn.__globalAdapter&&Zn.__globalAdapter.adaptSys)Zn.__globalAdapter.adaptSys(ni);else{var ii=window,ri=ii.navigator,ai=document,si=ai.documentElement,mi=ri.userAgent.toLowerCase();ni.isMobile=/mobile|android|iphone|ipad/.test(mi),ni.platform=ni.isMobile?ni.MOBILE_BROWSER:ni.DESKTOP_BROWSER;var oi=ri.language;oi=(oi=oi||ri.browserLanguage)?oi.split("-")[0]:ni.LANGUAGE_ENGLISH,ni.language=oi;var ui=!1,hi=!1,li="",ci=0,yi=/android\s*(\d+(?:\.\d+)*)/i.exec(mi)||/android\s*(\d+(?:\.\d+)*)/i.exec(ri.platform);yi&&(ui=!0,li=yi[1]||"",ci=parseInt(li)||0),(yi=/(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(mi))?(hi=!0,li=yi[2]||"",ci=parseInt(li)||0):(/(iPhone|iPad|iPod)/.exec(ri.platform)||"MacIntel"===ri.platform&&ri.maxTouchPoints&&ri.maxTouchPoints>1)&&(hi=!0,li="",ci=0);var fi=ni.OS_UNKNOWN;-1!==ri.appVersion.indexOf("Win")?fi=ni.OS_WINDOWS:hi?fi=ni.OS_IOS:-1!==ri.appVersion.indexOf("Mac")?fi=ni.OS_OSX:-1!==ri.appVersion.indexOf("X11")&&-1===ri.appVersion.indexOf("Linux")?fi=ni.OS_UNIX:ui?fi=ni.OS_ANDROID:-1===ri.appVersion.indexOf("Linux")&&-1===mi.indexOf("ubuntu")||(fi=ni.OS_LINUX),ni.os=fi,ni.osVersion=li,ni.osMainVersion=ci,ni.browserType=ni.BROWSER_TYPE_UNKNOWN,function(){var t=/mqqbrowser|micromessenger|qq|sogou|qzone|liebao|maxthon|ucbs|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|mxbrowser|miuibrowser/i.exec(mi);t||(t=/qqbrowser|ucbrowser|edge/i.exec(mi)),t||(t=/chrome|safari|firefox|trident|opera|opr\/|oupeng/i.exec(mi));var e=t?t[0].toLowerCase():ni.BROWSER_TYPE_UNKNOWN;"micromessenger"===e?e=ni.BROWSER_TYPE_WECHAT:"safari"===e&&ui||"qq"===e&&mi.match(/android.*applewebkit/i)?e=ni.BROWSER_TYPE_ANDROID:"trident"===e?e=ni.BROWSER_TYPE_IE:"edge"===e||("360 aphone"===e?e=ni.BROWSER_TYPE_360:"mxbrowser"===e?e=ni.BROWSER_TYPE_MAXTHON:"opr/"===e&&(e=ni.BROWSER_TYPE_OPERA)),ni.browserType=e}(),ni.browserVersion="",(ei=mi.match(/(mqqbrowser|micromessenger|qq|sogou|qzone|liebao|maxthon|uc|ucbs|360 aphone|360|baiduboxapp|baidu|maxthon|mxbrowser|miui)(mobile)?(browser)?\/?([\d.]+)/i))||(ei=mi.match(/(qqbrowser|chrome|safari|firefox|trident|opera|opr\/|oupeng)(mobile)?(browser)?\/?([\d.]+)/i)),ni.browserVersion=ei?ei[4]:"";var vi=window.innerWidth||document.documentElement.clientWidth,di=window.innerHeight||document.documentElement.clientHeight,_i=window.devicePixelRatio||1;ni.windowPixelResolution={width:_i*vi,height:_i*di};var pi=document.createElement("canvas");try{var gi=ni.localStorage=ii.localStorage;gi.setItem("storage",""),gi.removeItem("storage"),gi=null}catch(t){var xi=function(){Y(5200)};ni.localStorage={getItem:xi,setItem:xi,removeItem:xi,clear:xi}}var bi=pi.toDataURL("image/webp").startsWith("data:image/webp"),wi=!!pi.getContext("2d"),Mi=!1;if(ii.WebGLRenderingContext&&(function t(e,n,i){if(!i)return t(e,n,"webgl")||t(e,n,"experimental-webgl")||t(e,n,"webkit-3d")||t(e,n,"moz-webgl")||null;try{return e.getContext(i,n)}catch(t){return null}}(document.createElement("CANVAS"))&&(Mi=!0),Mi&&ni.os===ni.OS_ANDROID)){var ki=parseFloat(ni.browserVersion);switch(ni.browserType){case ni.BROWSER_TYPE_MOBILE_QQ:case ni.BROWSER_TYPE_BAIDU:case ni.BROWSER_TYPE_BAIDU_APP:Mi=ki>=6.2;break;case ni.BROWSER_TYPE_ANDROID:ni.osMainVersion&&ni.osMainVersion>=5&&(Mi=!0);break;case ni.BROWSER_TYPE_CHROME:Mi=ki>=30;break;case ni.BROWSER_TYPE_UC:Mi=ki>11;break;case ni.BROWSER_TYPE_360:Mi=!1}}var zi,Ei=ni.capabilities={canvas:wi,opengl:Mi,webp:bi};(void 0!==si.ontouchstart||void 0!==ai.ontouchstart||ri.msPointerEnabled)&&(Ei.touches=!0),void 0!==si.onmouseup&&(Ei.mouse=!0),void 0!==si.onkeyup&&(Ei.keyboard=!0),(ii.DeviceMotionEvent||ii.DeviceOrientationEvent)&&(Ei.accelerometer=!0),ti=!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),zi={ONLY_ONE:!1,WEB_AUDIO:ti,DELAY_CREATE_CTX:!1},ni.os===ni.OS_IOS&&(zi.USE_LOADER_EVENT="loadedmetadata"),ni.browserType===ni.BROWSER_TYPE_FIREFOX&&(zi.DELAY_CREATE_CTX=!0,zi.USE_LOADER_EVENT="canplay"),ni.os===ni.OS_ANDROID&&ni.browserType===ni.BROWSER_TYPE_UC&&(zi.ONE_SOURCE=!0);try{zi.WEB_AUDIO&&(zi._context=null,Object.defineProperty(zi,"context",{get:function(){return this._context?this._context:this._context=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext)}}))}catch(j){zi.WEB_AUDIO=!1,W(5201)}var Ai=[];($n=document.createElement("audio")).canPlayType&&($n.canPlayType('audio/ogg; codecs="vorbis"')&&Ai.push(".ogg"),$n.canPlayType("audio/mpeg")&&Ai.push(".mp3"),$n.canPlayType('audio/wav; codecs="1"')&&Ai.push(".wav"),$n.canPlayType("audio/mp4")&&Ai.push(".mp4"),$n.canPlayType("audio/x-m4a")&&Ai.push(".m4a")),zi.format=Ai,ni.__audioSupport=zi}O.sys=ni;var Oi,Ni,Si,Ii,Ti,Ri,Pi,Ci,Di=ni.__audioSupport,qi=function(t){function e(t){var i;return n(this,e),(i=h(this,m(e).call(this,t)))._startTime=0,i._offset=0,i._volume=1,i._loop=!1,i._currentTimer=0,i._audio=void 0,i._context=void 0,i._sourceNode=void 0,i._gainNode=void 0,i._startInvoked=!1,i._onEndedCB=void 0,i._onGestureCB=void 0,i._onGestureProceedCB=void 0,i._audio=t.clip,i._context=Di.context,i._sourceNode=i._context.createBufferSource(),i._gainNode=i._context.createGain(),i._gainNode.connect(i._context.destination),i._onEndedCB=i._onEnded.bind(u(i)),i._onGestureCB=i._onGesture.bind(u(i)),i._onGestureProceedCB=i._onGestureProceed.bind(u(i)),"running"!==i._context.state&&i._context.resume&&(O.game.canvas.addEventListener("touchend",i._onGestureCB),O.game.canvas.addEventListener("mouseup",i._onGestureCB)),i}return s(e,t),r(e,[{key:"play",value:function(){if(this._audio&&this._state!==qn.PLAYING)return this._blocking||"running"!==this._context.state?(this._interrupted=!0,void("interrupted"===this._context.state&&this._context.resume&&this._onGesture())):void this._doPlay()}},{key:"pause",value:function(){this._state===qn.PLAYING&&(this._doStop(),this._offset+=this._context.currentTime-this._startTime,this._state=qn.STOPPED,clearInterval(this._currentTimer))}},{key:"stop",value:function(){this._offset=0,this._state===qn.PLAYING&&(this._doStop(),this._state=qn.STOPPED,clearInterval(this._currentTimer))}},{key:"playOneShot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this._audio){var e=this._context.createGain();e.connect(this._context.destination),e.gain.value=t;var n=this._context.createBufferSource();n.buffer=this._audio,n.loop=!1,n.connect(e),n.start()}}},{key:"setCurrentTime",value:function(t){this._offset=Gn(t,0,this._audio&&this._audio.duration||this._duration),this._state===qn.PLAYING&&(this._doStop(),this._doPlay())}},{key:"getCurrentTime",value:function(){return this._state!==qn.PLAYING?this._offset:this._context.currentTime-this._startTime+this._offset}},{key:"setVolume",value:function(t,e){this._volume=t,!e&&this._gainNode.gain.setTargetAtTime?this._gainNode.gain.setTargetAtTime(t,this._context.currentTime,.01):this._gainNode.gain.value=t}},{key:"getVolume",value:function(){return this._volume}},{key:"setLoop",value:function(t){this._loop=t,this._sourceNode.loop=t}},{key:"getLoop",value:function(){return this._loop}},{key:"destroy",value:function(){c(m(e.prototype),"destroy",this).call(this)}},{key:"_doPlay",value:function(){var t=this;this._state=qn.PLAYING,this._sourceNode=this._context.createBufferSource(),this._sourceNode.buffer=this._audio,this._sourceNode.loop=this._loop,this._sourceNode.connect(this._gainNode),this._startTime=this._context.currentTime,this._startInvoked=!1,O.director.once(O.Director.EVENT_AFTER_UPDATE,this._playAndEmit,this),clearInterval(this._currentTimer),this._currentTimer=window.setInterval((function(){t._onEnded(),clearInterval(t._currentTimer),t._sourceNode.loop&&(t._currentTimer=window.setInterval(t._onEndedCB,1e3*t._audio.duration))}),1e3*(this._audio.duration-this._offset))}},{key:"_doStop",value:function(){this._startInvoked?this._sourceNode.stop():O.director.off(O.Director.EVENT_AFTER_UPDATE,this._playAndEmit,this)}},{key:"_playAndEmit",value:function(){this._sourceNode.start(0,this._offset),this._eventTarget.emit("started"),this._startInvoked=!0}},{key:"_onEnded",value:function(){this._offset=0,this._startTime=this._context.currentTime,this._sourceNode.loop||(this._eventTarget.emit("ended"),this._state=qn.STOPPED)}},{key:"_onGestureProceed",value:function(){this._interrupted&&(this._doPlay(),this._interrupted=!1),O.game.canvas.removeEventListener("touchend",this._onGestureCB),O.game.canvas.removeEventListener("mouseup",this._onGestureCB)}},{key:"_onGesture",value:function(){"running"!==this._context.state?this._context.resume().then(this._onGestureProceedCB):this._onGestureProceed()}}]),e}(jn),ji=se({WEB_AUDIO:0,DOM_AUDIO:1,JSB_AUDIO:2,UNKNOWN_AUDIO:3}),Li=t("A",(Oi=mn("cc.AudioClip"),Ni=yn(ji),Oi((Ci=Pi=function(t){function e(){var t;return n(this,e),p(t=h(this,m(e).call(this)),"_duration",Ti,u(t)),p(t,"_loadMode",Ri,u(t)),t._audio=null,t._player=null,t.loaded=!1,t}return s(e,t),r(e,[{key:"destroy",value:function(){return this._player&&this._player.destroy(),c(m(e.prototype),"destroy",this).call(this)}},{key:"play",value:function(){this._player&&this._player.play()}},{key:"pause",value:function(){this._player&&this._player.pause()}},{key:"stop",value:function(){this._player&&this._player.stop()}},{key:"playOneShot",value:function(t){this._player&&this._player.playOneShot(t)}},{key:"setCurrentTime",value:function(t){this._player&&this._player.setCurrentTime(t)}},{key:"getCurrentTime",value:function(){return this._player?this._player.getCurrentTime():0}},{key:"getDuration",value:function(){return this._player?this._player.getDuration():this._duration}},{key:"setVolume",value:function(t,e){this._player&&this._player.setVolume(t,e||!1)}},{key:"getVolume",value:function(){return this._player?this._player.getVolume():1}},{key:"setLoop",value:function(t){this._player&&this._player.setLoop(t)}},{key:"getLoop",value:function(){return!!this._player&&this._player.getLoop()}},{key:"_getPlayer",value:function(t){var e;return"undefined"!=typeof AudioBuffer&&t instanceof AudioBuffer?(e=qi,this._loadMode=ji.WEB_AUDIO):(e=Kn,this._loadMode=ji.DOM_AUDIO),e}},{key:"_nativeAsset",set:function(t){if(this._audio=t,t){var e=this._getPlayer(t);this._player=new e({clip:t,duration:this._duration,eventTarget:this}),this.loaded=!0,this.emit("load")}else this._player=null,this._loadMode=ji.UNKNOWN_AUDIO,this._duration=0,this.loaded=!1},get:function(){return this._audio}},{key:"loadMode",get:function(){return this._loadMode}},{key:"state",get:function(){return this._player?this._player.getState():qn.INITIALIZING}}]),e}(Dn),Pi.PlayingState=qn,Pi.AudioType=ji,Pi.preventDeferredLoadDependents=!0,Ti=g((Ii=Ci).prototype,"_duration",[un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ri=g(Ii.prototype,"_loadMode",[Ni],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ji.UNKNOWN_AUDIO}}),Si=Ii))||Si));O.AudioClip=Li;var Bi,Vi,Gi,Ui=ni.__audioSupport,Wi=Ui.format;function Fi(t,e){var n=document.createElement("audio");n.src=t.url;var i=function(){clearTimeout(r),n.removeEventListener("canplaythrough",a,!1),n.removeEventListener("error",s,!1),Ui.USE_LOADER_EVENT&&n.removeEventListener(Ui.USE_LOADER_EVENT,a,!1)},r=setTimeout((function(){0===n.readyState?s():a()}),8e3),a=function(){i(),e(null,n)},s=function(){i();var n="load audio failure - "+t.url;D(n),e(n)};n.addEventListener("canplaythrough",a,!1),n.addEventListener("error",s,!1),Ui.USE_LOADER_EVENT&&n.addEventListener(Ui.USE_LOADER_EVENT,a,!1)}function Yi(t,e){var n=Ui.context;n||e(new Error(J(4926)));var i=O.loader.getXMLHttpRequest();i.open("GET",t.url,!0),i.responseType="arraybuffer",i.onload=function(){n.decodeAudioData(i.response,(function(t){e(null,t)}),(function(){e("decode error - "+t.id,null)}))},i.onerror=function(){e("request error - "+t.id,null)},i.send()}var Hi=t("aD",mn("cc.Script")(Bi=function(t){function e(){return n(this,e),h(this,m(e).apply(this,arguments))}return s(e,t),e}(Dn))||Bi);O._Script=Hi;var Xi=t("aE",mn("cc.JavaScript")(Vi=function(t){function e(){return n(this,e),h(this,m(e).apply(this,arguments))}return s(e,t),e}(Hi))||Vi);O._JavaScript=Xi;var Qi,Ki,Zi,Ji,$i,tr,er,nr,ir,rr,ar=t("aF",mn("cc.TypeScript")(Gi=function(t){function e(){return n(this,e),h(this,m(e).apply(this,arguments))}return s(e,t),e}(Hi))||Gi);O._TypeScript=ar;var sr=new st("Comp"),mr=(_n.Flags.IsOnEnableCalled,_n.Flags.IsOnLoadCalled),or=t("C",(Qi=mn("cc.Component"),Ki=ln(),Zi=yn(Hi),Ji=cn(),Qi((rr=ir=function(t){function e(){var t,i;n(this,e);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return p(i=h(this,(t=m(e)).call.apply(t,[this].concat(a))),"node",er,u(i)),p(i,"_enabled",nr,u(i)),i._sceneGetter=null,i._id=sr.getNewId(),i}return s(e,t),r(e,[{key:"_getRenderScene",value:function(){return this._sceneGetter?this._sceneGetter():this.node.scene._renderScene}},{key:"addComponent",value:function(t){return this.node.addComponent(t)}},{key:"getComponent",value:function(t){return this.node.getComponent(t)}},{key:"getComponents",value:function(t){return this.node.getComponents(t)}},{key:"getComponentInChildren",value:function(t){return this.node.getComponentInChildren(t)}},{key:"getComponentsInChildren",value:function(t){return this.node.getComponentsInChildren(t)}},{key:"destroy",value:function(){return!!c(m(e.prototype),"destroy",this).call(this)&&(this._enabled&&this.node.activeInHierarchy&&O.director._compScheduler.disableComp(this),!0)}},{key:"_onPreDestroy",value:function(){this.unscheduleAllCallbacks(),O.director._nodeActivator.destroyComp(this),this.node._removeComponent(this)}},{key:"_instantiate",value:function(t){return t||(t=O.instantiate._clone(this,this)),t.node=null,t}},{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O.macro.REPEAT_FOREVER,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Z(t,1619),Z(e>=0,1620),e=e||0,n=isNaN(n)?O.macro.REPEAT_FOREVER:n,i=i||0;var r=O.director.getScheduler(),a=r.isTargetPaused(this);r.schedule(t,this,e,n,i,a)}},{key:"scheduleOnce",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.schedule(t,0,0,e)}},{key:"unschedule",value:function(t){t&&O.director.getScheduler().unschedule(t,this)}},{key:"unscheduleAllCallbacks",value:function(){O.director.getScheduler().unscheduleAllForTarget(this)}},{key:"name",get:function(){if(this._name)return this._name;var t=_t(this),e=t.lastIndexOf(".");return e>=0&&(t=t.slice(e+1)),this.node.name+"<"+t+">"},set:function(t){this._name=t}},{key:"uuid",get:function(){return this._id}},{key:"__scriptAsset",get:function(){return null}},{key:"enabled",get:function(){return this._enabled},set:function(t){if(this._enabled!==t&&(this._enabled=t,this.node.activeInHierarchy)){var e=O.director._compScheduler;t?e.enableComp(this):e.disableComp(this)}}},{key:"enabledInHierarchy",get:function(){return this._enabled&&this.node&&this.node.activeInHierarchy}},{key:"_isOnLoadCalled",get:function(){return this._objFlags&mr}}]),e}(_n),ir.system=null,g((tr=rr).prototype,"__scriptAsset",[Ki,Zi,Ji],Object.getOwnPropertyDescriptor(tr.prototype,"__scriptAsset"),tr.prototype),er=g(tr.prototype,"node",[un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nr=g(tr.prototype,"_enabled",[un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$i=tr))||$i)),ur=or.prototype;ur.update=null,ur.lateUpdate=null,ur.__preload=null,ur.onLoad=null,ur.start=null,ur.onEnable=null,ur.onDisable=null,ur.onDestroy=null,ur.onFocusInEditor=null,ur.onLostFocusInEditor=null,ur.resetInEditor=null,ur._getLocalBounds=null,ur.onRestore=null,or._requireComponent=null,or._executionOrder=0,ct(or,"_registerEditorProps",(function(t,e){var n=e.requireComponent;n&&(t._requireComponent=n);var i=e.executionOrder;i&&"number"==typeof i&&(t._executionOrder=i)})),O.Component=or;var hr=t("bM",2147483647);function lr(t){return(t>0)-(t<0)}function cr(t){var e=t>>31;return(t^e)-e}function yr(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function fr(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}function vr(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}var dr=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,i=e,r=7;for(n>>>=1;n;n>>>=1)i<<=1,i|=1&n,--r;t[e]=i<<r&255}}(dr),t("G",Object.freeze({__proto__:null,INT_BITS:32,INT_MAX:hr,INT_MIN:-1<<31,sign:lr,abs:cr,min:function(t,e){return e^(t^e)&-(t<e)},max:function(t,e){return t^(t^e)&-(t<e)},isPow2:function(t){return!(t&t-1||!t)},log2:yr,log10:function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},popCount:function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},countTrailingZeros:fr,nextPow2:vr,prevPow2:function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},parity:function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1},reverse:function(t){return dr[255&t]<<24|dr[t>>>8&255]<<16|dr[t>>>16&255]<<8|dr[t>>>24&255]},interleave2:function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},deinterleave2:function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},interleave3:function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},deinterleave3:function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},nextCombination:function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>fr(t)+1}}));var _r=t("H",function(t){function i(t,r){var a;return n(this,i),a=h(this,m(i).call(this)),t&&"object"===e(t)?(a.x=t.x,a.y=t.y):(a.x=t||0,a.y=r||0),a}return s(i,t),r(i,null,[{key:"clone",value:function(t){return new i(t.x,t.y)}},{key:"copy",value:function(t,e){return t.x=e.x,t.y=e.y,t}},{key:"set",value:function(t,e,n){return t.x=e,t.y=n,t}},{key:"add",value:function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t}},{key:"subtract",value:function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t}},{key:"multiply",value:function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t}},{key:"divide",value:function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t}},{key:"ceil",value:function(t,e){return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t}},{key:"floor",value:function(t,e){return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t}},{key:"min",value:function(t,e,n){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t}},{key:"max",value:function(t,e,n){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t}},{key:"round",value:function(t,e){return t.x=Math.round(e.x),t.y=Math.round(e.y),t}},{key:"multiplyScalar",value:function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t}},{key:"scaleAndAdd",value:function(t,e,n,i){return t.x=e.x+n.x*i,t.y=e.y+n.y*i,t}},{key:"distance",value:function(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}},{key:"squaredDistance",value:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}},{key:"len",value:function(t){var e=t.x,n=t.y;return Math.sqrt(e*e+n*n)}},{key:"lengthSqr",value:function(t){var e=t.x,n=t.y;return e*e+n*n}},{key:"negate",value:function(t,e){return t.x=-e.x,t.y=-e.y,t}},{key:"inverse",value:function(t,e){return t.x=1/e.x,t.y=1/e.y,t}},{key:"inverseSafe",value:function(t,e){var n=e.x,i=e.y;return Math.abs(n)<Vn?t.x=0:t.x=1/n,Math.abs(i)<Vn?t.y=0:t.y=1/i,t}},{key:"normalize",value:function(t,e){var n=e.x,i=e.y,r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r),t.x=n*r,t.y=i*r),t}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"cross",value:function(t,e,n){return t.x=t.y=0,t.z=e.x*n.y-e.y*n.x,t}},{key:"lerp",value:function(t,e,n,i){var r=e.x,a=e.y;return t.x=r+i*(n.x-r),t.y=a+i*(n.y-a),t}},{key:"random",value:function(t,e){e=e||1;var n=2*Wn()*Math.PI;return t.x=Math.cos(n)*e,t.y=Math.sin(n)*e,t}},{key:"transformMat3",value:function(t,e,n){var i=e.x,r=e.y;return t.x=n.m00*i+n.m03*r+n.m06,t.y=n.m01*i+n.m04*r+n.m07,t}},{key:"transformMat4",value:function(t,e,n){var i=e.x,r=e.y;return t.x=n.m00*i+n.m04*r+n.m12,t.y=n.m01*i+n.m05*r+n.m13,t}},{key:"str",value:function(t){return"Vec2(".concat(t.x,", ").concat(t.y,")")}},{key:"toArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[n+0]=e.x,t[n+1]=e.y,t}},{key:"fromArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.x=e[n+0],t.y=e[n+1],t}},{key:"strictEquals",value:function(t,e){return t.x===e.x&&t.y===e.y}},{key:"equals",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vn;return Math.abs(t.x-e.x)<=n*Math.max(1,Math.abs(t.x),Math.abs(e.x))&&Math.abs(t.y-e.y)<=n*Math.max(1,Math.abs(t.y),Math.abs(e.y))}},{key:"angle",value:function(t,e){i.normalize(pr,t),i.normalize(gr,e);var n=i.dot(pr,gr);return n>1?0:n<-1?Math.PI:Math.acos(n)}}]),r(i,[{key:"clone",value:function(){return new i(this.x,this.y)}},{key:"set",value:function(t,n){return t&&"object"===e(t)?(this.x=t.x,this.y=t.y):(this.x=t||0,this.y=n||0),this}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vn;return Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))}},{key:"equals2f",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vn;return Math.abs(this.x-t)<=n*Math.max(1,Math.abs(this.x),Math.abs(t))&&Math.abs(this.y-e)<=n*Math.max(1,Math.abs(this.y),Math.abs(e))}},{key:"strictEquals",value:function(t){return t&&this.x===t.x&&this.y===t.y}},{key:"strictEquals2f",value:function(t,e){return this.x===t&&this.y===e}},{key:"toString",value:function(){return"(".concat(this.x.toFixed(2),", ").concat(this.y.toFixed(2),")")}},{key:"lerp",value:function(t,e){var n=this.x,i=this.y;return this.x=n+e*(t.x-n),this.y=i+e*(t.y-i),this}},{key:"clampf",value:function(t,e){return this.x=Gn(this.x,t.x,e.x),this.y=Gn(this.y,t.y,e.y),this}},{key:"add",value:function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this}},{key:"add2f",value:function(t,e){return this.x=this.x+t,this.y=this.y+e,this}},{key:"subtract",value:function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this}},{key:"subtract2f",value:function(t,e){return this.x=this.x-t,this.y=this.y-e,this}},{key:"multiplyScalar",value:function(t){return"object"===e(t)&&console.warn("should use Vec2.multiply for vector * vector operation"),this.x=this.x*t,this.y=this.y*t,this}},{key:"multiply",value:function(t){return"object"!==e(t)&&console.warn("should use Vec2.scale for vector * scalar operation"),this.x=this.x*t.x,this.y=this.y*t.y,this}},{key:"multiply2f",value:function(t,e){return this.x=this.x*t,this.y=this.y*e,this}},{key:"divide",value:function(t){return this.x=this.x/t.x,this.y=this.y/t.y,this}},{key:"divide2f",value:function(t,e){return this.x=this.x/t,this.y=this.y/e,this}},{key:"negative",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"lengthSqr",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){var t=this.x,e=this.y,n=t*t+e*e;return n>0&&(n=1/Math.sqrt(n),this.x=this.x*n,this.y=this.y*n),this}},{key:"angle",value:function(t){var e=this.lengthSqr(),n=t.lengthSqr();if(0===e||0===n)return console.warn("Can't get angle between zero vector"),0;var i=this.dot(t)/Math.sqrt(e*n);return i=Gn(i,-1,1),Math.acos(i)}},{key:"signAngle",value:function(t){var e=this.angle(t);return this.cross(t)<0?-e:e}},{key:"rotate",value:function(t){var e=this.x,n=this.y,i=Math.sin(t),r=Math.cos(t);return this.x=r*e-i*n,this.y=i*e+r*n,this}},{key:"project",value:function(t){var e=this.dot(t)/t.dot(t);return this.x=t.x*e,this.y=t.y*e,this}},{key:"transformMat4",value:function(t){var e=this.x,n=this.y;return this.x=t.m00*e+t.m04*n+t.m12,this.y=t.m01*e+t.m05*n+t.m13,this}}]),i}(ue));_r.ZERO=Object.freeze(new _r(0,0)),_r.ONE=Object.freeze(new _r(1,1)),_r.NEG_ONE=Object.freeze(new _r(-1,-1)),_r.UNIT_X=Object.freeze(new _r(1,0)),_r.UNIT_Y=Object.freeze(new _r(0,1));var pr=new _r,gr=new _r;function xr(t,e){return new _r(t,e)}Qe.fastDefine("cc.Vec2",_r,{x:0,y:0}),O.Vec2=_r,O.v2=xr;var br=t("V",function(t){function i(t,r,a){var s;return n(this,i),s=h(this,m(i).call(this)),t&&"object"===e(t)?(s.x=t.x,s.y=t.y,s.z=t.z):(s.x=t||0,s.y=r||0,s.z=a||0),s}return s(i,t),r(i,null,[{key:"zero",value:function(t){return t.x=0,t.y=0,t.z=0,t}},{key:"clone",value:function(t){return new i(t.x,t.y,t.z)}},{key:"copy",value:function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t}},{key:"set",value:function(t,e,n,i){return t.x=e,t.y=n,t.z=i,t}},{key:"add",value:function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t}},{key:"subtract",value:function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t}},{key:"multiply",value:function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t}},{key:"divide",value:function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t}},{key:"ceil",value:function(t,e){return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t.z=Math.ceil(e.z),t}},{key:"floor",value:function(t,e){return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t.z=Math.floor(e.z),t}},{key:"min",value:function(t,e,n){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t.z=Math.min(e.z,n.z),t}},{key:"max",value:function(t,e,n){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t.z=Math.max(e.z,n.z),t}},{key:"round",value:function(t,e){return t.x=Math.round(e.x),t.y=Math.round(e.y),t.z=Math.round(e.z),t}},{key:"multiplyScalar",value:function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t}},{key:"scaleAndAdd",value:function(t,e,n,i){return t.x=e.x+n.x*i,t.y=e.y+n.y*i,t.z=e.z+n.z*i,t}},{key:"distance",value:function(t,e){var n=e.x-t.x,i=e.y-t.y,r=e.z-t.z;return Math.sqrt(n*n+i*i+r*r)}},{key:"squaredDistance",value:function(t,e){var n=e.x-t.x,i=e.y-t.y,r=e.z-t.z;return n*n+i*i+r*r}},{key:"len",value:function(t){var e=t.x,n=t.y,i=t.z;return Math.sqrt(e*e+n*n+i*i)}},{key:"lengthSqr",value:function(t){var e=t.x,n=t.y,i=t.z;return e*e+n*n+i*i}},{key:"negate",value:function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t}},{key:"invert",value:function(t,e){return t.x=1/e.x,t.y=1/e.y,t.z=1/e.z,t}},{key:"invertSafe",value:function(t,e){var n=e.x,i=e.y,r=e.z;return Math.abs(n)<Vn?t.x=0:t.x=1/n,Math.abs(i)<Vn?t.y=0:t.y=1/i,Math.abs(r)<Vn?t.z=0:t.z=1/r,t}},{key:"normalize",value:function(t,e){var n=e.x,i=e.y,r=e.z,a=n*n+i*i+r*r;return a>0&&(a=1/Math.sqrt(a),t.x=n*a,t.y=i*a,t.z=r*a),t}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}},{key:"cross",value:function(t,e,n){var i=e.x,r=e.y,a=e.z,s=n.x,m=n.y,o=n.z;return t.x=r*o-a*m,t.y=a*s-i*o,t.z=i*m-r*s,t}},{key:"lerp",value:function(t,e,n,i){return t.x=e.x+i*(n.x-e.x),t.y=e.y+i*(n.y-e.y),t.z=e.z+i*(n.z-e.z),t}},{key:"random",value:function(t,e){e=e||1;var n=2*Wn()*Math.PI,i=2*Wn()-1,r=Math.sqrt(1-i*i);return t.x=r*Math.cos(n)*e,t.y=r*Math.sin(n)*e,t.z=i*e,t}},{key:"transformMat4",value:function(t,e,n){var i=e.x,r=e.y,a=e.z,s=n.m03*i+n.m07*r+n.m11*a+n.m15;return s=s?Math.abs(1/s):1,t.x=(n.m00*i+n.m04*r+n.m08*a+n.m12)*s,t.y=(n.m01*i+n.m05*r+n.m09*a+n.m13)*s,t.z=(n.m02*i+n.m06*r+n.m10*a+n.m14)*s,t}},{key:"transformMat4Normal",value:function(t,e,n){var i=e.x,r=e.y,a=e.z,s=n.m03*i+n.m07*r+n.m11*a;return s=s?Math.abs(1/s):1,t.x=(n.m00*i+n.m04*r+n.m08*a)*s,t.y=(n.m01*i+n.m05*r+n.m09*a)*s,t.z=(n.m02*i+n.m06*r+n.m10*a)*s,t}},{key:"transformMat3",value:function(t,e,n){var i=e.x,r=e.y,a=e.z;return t.x=i*n.m00+r*n.m03+a*n.m06,t.y=i*n.m01+r*n.m04+a*n.m07,t.z=i*n.m02+r*n.m05+a*n.m08,t}},{key:"transformAffine",value:function(t,e,n){var i=e.x,r=e.y,a=e.z;return t.x=n.m00*i+n.m04*r+n.m08*a+n.m12,t.y=n.m01*i+n.m05*r+n.m09*a+n.m13,t.x=n.m02*i+n.m06*r+n.m10*a+n.m14,t}},{key:"transformQuat",value:function(t,e,n){var i=n.w*e.x+n.y*e.z-n.z*e.y,r=n.w*e.y+n.z*e.x-n.x*e.z,a=n.w*e.z+n.x*e.y-n.y*e.x,s=-n.x*e.x-n.y*e.y-n.z*e.z;return t.x=i*n.w+s*-n.x+r*-n.z-a*-n.y,t.y=r*n.w+s*-n.y+a*-n.x-i*-n.z,t.z=a*n.w+s*-n.z+i*-n.y-r*-n.x,t}},{key:"transformRTS",value:function(t,e,n,i,r){var a=e.x*r.x,s=e.y*r.y,m=e.z*r.z,o=n.w*a+n.y*m-n.z*s,u=n.w*s+n.z*a-n.x*m,h=n.w*m+n.x*s-n.y*a,l=-n.x*a-n.y*s-n.z*m;return t.x=o*n.w+l*-n.x+u*-n.z-h*-n.y+i.x,t.y=u*n.w+l*-n.y+h*-n.x-o*-n.z+i.y,t.z=h*n.w+l*-n.z+o*-n.y-u*-n.x+i.z,t}},{key:"transformInverseRTS",value:function(t,e,n,i,r){var a=e.x-i.x,s=e.y-i.y,m=e.z-i.z,o=n.w*a-n.y*m+n.z*s,u=n.w*s-n.z*a+n.x*m,h=n.w*m-n.x*s+n.y*a,l=n.x*a+n.y*s+n.z*m;return t.x=(o*n.w+l*n.x+u*n.z-h*n.y)/r.x,t.y=(u*n.w+l*n.y+h*n.x-o*n.z)/r.y,t.z=(h*n.w+l*n.z+o*n.y-u*n.x)/r.z,t}},{key:"rotateX",value:function(t,e,n,i){var r=e.x-n.x,a=e.y-n.y,s=e.z-n.z,m=Math.cos(i),o=Math.sin(i),u=r,h=a*m-s*o,l=a*o+s*m;return t.x=u+n.x,t.y=h+n.y,t.z=l+n.z,t}},{key:"rotateY",value:function(t,e,n,i){var r=e.x-n.x,a=e.y-n.y,s=e.z-n.z,m=Math.cos(i),o=Math.sin(i),u=s*o+r*m,h=a,l=s*m-r*o;return t.x=u+n.x,t.y=h+n.y,t.z=l+n.z,t}},{key:"rotateZ",value:function(t,e,n,i){var r=e.x-n.x,a=e.y-n.y,s=e.z-n.z,m=Math.cos(i),o=Math.sin(i),u=r*m-a*o,h=r*o+a*m,l=s;return t.x=u+n.x,t.y=h+n.y,t.z=l+n.z,t}},{key:"toArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t}},{key:"fromArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t}},{key:"strictEquals",value:function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}},{key:"equals",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vn,i=t.x,r=t.y,a=t.z,s=e.x,m=e.y,o=e.z;return Math.abs(i-s)<=n*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-m)<=n*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(a-o)<=n*Math.max(1,Math.abs(a),Math.abs(o))}},{key:"angle",value:function(t,e){i.normalize(wr,t),i.normalize(Mr,e);var n=i.dot(wr,Mr);return n>1?0:n<-1?Math.PI:Math.acos(n)}},{key:"projectOnPlane",value:function(t,e,n){return i.subtract(t,e,i.project(t,e,n))}},{key:"project",value:function(t,e,n){var r=i.lengthSqr(n);return r<1e-6?i.set(t,0,0,0):i.multiplyScalar(t,n,i.dot(e,n)/r)}}]),r(i,[{key:"clone",value:function(){return new i(this.x,this.y,this.z)}},{key:"set",value:function(t,n,i){return t&&"object"===e(t)?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t||0,this.y=n||0,this.z=i||0),this}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vn;return Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))&&Math.abs(this.z-t.z)<=e*Math.max(1,Math.abs(this.z),Math.abs(t.z))}},{key:"equals3f",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Vn;return Math.abs(this.x-t)<=i*Math.max(1,Math.abs(this.x),Math.abs(t))&&Math.abs(this.y-e)<=i*Math.max(1,Math.abs(this.y),Math.abs(e))&&Math.abs(this.z-n)<=i*Math.max(1,Math.abs(this.z),Math.abs(n))}},{key:"strictEquals",value:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}},{key:"strictEquals3f",value:function(t,e,n){return this.x===t&&this.y===e&&this.z===n}},{key:"toString",value:function(){return"(".concat(this.x.toFixed(2),", ").concat(this.y.toFixed(2),", ").concat(this.z.toFixed(2),")")}},{key:"lerp",value:function(t,e){return this.x=this.x+e*(t.x-this.x),this.y=this.y+e*(t.y-this.y),this.z=this.z+e*(t.z-this.z),this}},{key:"add",value:function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this}},{key:"add3f",value:function(t,e,n){return this.x=this.x+t,this.y=this.y+e,this.z=this.z+n,this}},{key:"subtract",value:function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this}},{key:"subtract3f",value:function(t,e,n){return this.x=this.x-t,this.y=this.y-e,this.z=this.z-n,this}},{key:"multiplyScalar",value:function(t){return"object"===e(t)&&console.warn("should use Vec3.multiply for vector * vector operation"),this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this}},{key:"multiply",value:function(t){return"object"!==e(t)&&console.warn("should use Vec3.scale for vector * scalar operation"),this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this}},{key:"multiply3f",value:function(t,e,n){return this.x=this.x*t,this.y=this.y*e,this.z=this.z*n,this}},{key:"divide",value:function(t){return this.x=this.x/t.x,this.y=this.y/t.y,this.z=this.z/t.z,this}},{key:"divide3f",value:function(t,e,n){return this.x=this.x/t,this.y=this.y/e,this.z=this.z/n,this}},{key:"negative",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"clampf",value:function(t,e){return this.x=Gn(this.x,t.x,e.x),this.y=Gn(this.y,t.y,e.y),this.z=Gn(this.z,t.z,e.z),this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"cross",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*r-e*s,this.z=e*a-n*r,this}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"lengthSqr",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"normalize",value:function(){var t=this.x,e=this.y,n=this.z,i=t*t+e*e+n*n;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i,this.z=n*i),this}},{key:"transformMat4",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.m03*e+t.m07*n+t.m11*i+t.m15;return r=r?1/r:1,this.x=(t.m00*e+t.m04*n+t.m08*i+t.m12)*r,this.y=(t.m01*e+t.m05*n+t.m09*i+t.m13)*r,this.z=(t.m02*e+t.m06*n+t.m10*i+t.m14)*r,this}}]),i}(ue));br.UNIT_X=Object.freeze(new br(1,0,0)),br.UNIT_Y=Object.freeze(new br(0,1,0)),br.UNIT_Z=Object.freeze(new br(0,0,1)),br.RIGHT=Object.freeze(new br(1,0,0)),br.UP=Object.freeze(new br(0,1,0)),br.FORWARD=Object.freeze(new br(0,0,-1)),br.ZERO=Object.freeze(new br(0,0,0)),br.ONE=Object.freeze(new br(1,1,1)),br.NEG_ONE=Object.freeze(new br(-1,-1,-1));var wr=new br,Mr=new br;function kr(t,e,n){return new br(t,e,n)}Qe.fastDefine("cc.Vec3",br,{x:0,y:0,z:0}),O.Vec3=br,O.v3=kr;var zr=t("K",function(t){function i(t,r,a,s){var o;return n(this,i),o=h(this,m(i).call(this)),t&&"object"===e(t)?(o.x=t.x,o.y=t.y,o.z=t.z,o.w=t.w):(o.x=t||0,o.y=r||0,o.z=a||0,o.w=s||0),o}return s(i,t),r(i,null,[{key:"clone",value:function(t){return new i(t.x,t.y,t.z,t.w)}},{key:"copy",value:function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}},{key:"set",value:function(t,e,n,i,r){return t.x=e,t.y=n,t.z=i,t.w=r,t}},{key:"add",value:function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t.w=e.w+n.w,t}},{key:"subtract",value:function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t.w=e.w-n.w,t}},{key:"multiply",value:function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t.w=e.w*n.w,t}},{key:"divide",value:function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t.w=e.w/n.w,t}},{key:"ceil",value:function(t,e){return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t.z=Math.ceil(e.z),t.w=Math.ceil(e.w),t}},{key:"floor",value:function(t,e){return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t.z=Math.floor(e.z),t.w=Math.floor(e.w),t}},{key:"min",value:function(t,e,n){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t.z=Math.min(e.z,n.z),t.w=Math.min(e.w,n.w),t}},{key:"max",value:function(t,e,n){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t.z=Math.max(e.z,n.z),t.w=Math.max(e.w,n.w),t}},{key:"round",value:function(t,e){return t.x=Math.round(e.x),t.y=Math.round(e.y),t.z=Math.round(e.z),t.w=Math.round(e.w),t}},{key:"multiplyScalar",value:function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t}},{key:"scaleAndAdd",value:function(t,e,n,i){return t.x=e.x+n.x*i,t.y=e.y+n.y*i,t.z=e.z+n.z*i,t.w=e.w+n.w*i,t}},{key:"distance",value:function(t,e){var n=e.x-t.x,i=e.y-t.y,r=e.z-t.z,a=e.w-t.w;return Math.sqrt(n*n+i*i+r*r+a*a)}},{key:"squaredDistance",value:function(t,e){var n=e.x-t.x,i=e.y-t.y,r=e.z-t.z,a=e.w-t.w;return n*n+i*i+r*r+a*a}},{key:"len",value:function(t){var e=t.x,n=t.y,i=t.z,r=t.w;return Math.sqrt(e*e+n*n+i*i+r*r)}},{key:"lengthSqr",value:function(t){var e=t.x,n=t.y,i=t.z,r=t.w;return e*e+n*n+i*i+r*r}},{key:"negate",value:function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t}},{key:"inverse",value:function(t,e){return t.x=1/e.x,t.y=1/e.y,t.z=1/e.z,t.w=1/e.w,t}},{key:"inverseSafe",value:function(t,e){var n=e.x,i=e.y,r=e.z,a=e.w;return Math.abs(n)<Vn?t.x=0:t.x=1/n,Math.abs(i)<Vn?t.y=0:t.y=1/i,Math.abs(r)<Vn?t.z=0:t.z=1/r,Math.abs(a)<Vn?t.w=0:t.w=1/a,t}},{key:"normalize",value:function(t,e){var n=e.x,i=e.y,r=e.z,a=e.w,s=n*n+i*i+r*r+a*a;return s>0&&(s=1/Math.sqrt(s),t.x=n*s,t.y=i*s,t.z=r*s,t.w=a*s),t}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w}},{key:"lerp",value:function(t,e,n,i){return t.x=e.x+i*(n.x-e.x),t.y=e.y+i*(n.y-e.y),t.z=e.z+i*(n.z-e.z),t.w=e.w+i*(n.w-e.w),t}},{key:"random",value:function(t,e){e=e||1;var n=2*Wn()*Math.PI,i=2*Wn()-1,r=Math.sqrt(1-i*i);return t.x=r*Math.cos(n)*e,t.y=r*Math.sin(n)*e,t.z=i*e,t.w=0,t}},{key:"transformMat4",value:function(t,e,n){var i=e.x,r=e.y,a=e.z,s=e.w;return t.x=n.m00*i+n.m04*r+n.m08*a+n.m12*s,t.y=n.m01*i+n.m05*r+n.m09*a+n.m13*s,t.z=n.m02*i+n.m06*r+n.m10*a+n.m14*s,t.w=n.m03*i+n.m07*r+n.m11*a+n.m15*s,t}},{key:"transformAffine",value:function(t,e,n){var i=e.x,r=e.y,a=e.z,s=e.w;return t.x=n.m00*i+n.m01*r+n.m02*a+n.m03*s,t.y=n.m04*i+n.m05*r+n.m06*a+n.m07*s,t.x=n.m08*i+n.m09*r+n.m10*a+n.m11*s,t.w=e.w,t}},{key:"transformQuat",value:function(t,e,n){var i=e.x,r=e.y,a=e.z,s=n.x,m=n.y,o=n.z,u=n.w,h=u*i+m*a-o*r,l=u*r+o*i-s*a,c=u*a+s*r-m*i,y=-s*i-m*r-o*a;return t.x=h*u+y*-s+l*-o-c*-m,t.y=l*u+y*-m+c*-s-h*-o,t.z=c*u+y*-o+h*-m-l*-s,t.w=e.w,t}},{key:"toArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t[n+3]=e.w,t}},{key:"fromArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t.w=e[n+3],t}},{key:"strictEquals",value:function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}},{key:"equals",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vn;return Math.abs(t.x-e.x)<=n*Math.max(1,Math.abs(t.x),Math.abs(e.x))&&Math.abs(t.y-e.y)<=n*Math.max(1,Math.abs(t.y),Math.abs(e.y))&&Math.abs(t.z-e.z)<=n*Math.max(1,Math.abs(t.z),Math.abs(e.z))&&Math.abs(t.w-e.w)<=n*Math.max(1,Math.abs(t.w),Math.abs(e.w))}}]),r(i,[{key:"clone",value:function(){return new i(this.x,this.y,this.z,this.w)}},{key:"set",value:function(t,n,i,r){return t&&"object"===e(t)?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=n||0,this.z=i||0,this.w=r||0),this}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vn;return Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))&&Math.abs(this.z-t.z)<=e*Math.max(1,Math.abs(this.z),Math.abs(t.z))&&Math.abs(this.w-t.w)<=e*Math.max(1,Math.abs(this.w),Math.abs(t.w))}},{key:"equals4f",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vn;return Math.abs(this.x-t)<=r*Math.max(1,Math.abs(this.x),Math.abs(t))&&Math.abs(this.y-e)<=r*Math.max(1,Math.abs(this.y),Math.abs(e))&&Math.abs(this.z-n)<=r*Math.max(1,Math.abs(this.z),Math.abs(n))&&Math.abs(this.w-i)<=r*Math.max(1,Math.abs(this.w),Math.abs(i))}},{key:"strictEquals",value:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}},{key:"strictEquals4f",value:function(t,e,n,i){return this.x===t&&this.y===e&&this.z===n&&this.w===i}},{key:"lerp",value:function(t,e){var n=this.x,i=this.y,r=this.z,a=this.w;return this.x=n+e*(t.x-n),this.y=i+e*(t.y-i),this.z=r+e*(t.z-r),this.w=a+e*(t.w-a),this}},{key:"toString",value:function(){return"(".concat(this.x.toFixed(2),", ").concat(this.y.toFixed(2),", ").concat(this.z.toFixed(2),", ").concat(this.w.toFixed(2),")")}},{key:"clampf",value:function(t,e){return this.x=Gn(this.x,t.x,e.x),this.y=Gn(this.y,t.y,e.y),this.z=Gn(this.z,t.z,e.z),this.w=Gn(this.w,t.w,e.w),this}},{key:"add",value:function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this.z=this.z+t.z,this.w=this.w+t.w,this}},{key:"add4f",value:function(t,e,n,i){return this.x=this.x+t,this.y=this.y+e,this.z=this.z+n,this.w=this.w+i,this}},{key:"subtract",value:function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this.z=this.z-t.z,this.w=this.w-t.w,this}},{key:"subtract4f",value:function(t,e,n,i){return this.x=this.x-t,this.y=this.y-e,this.z=this.z-n,this.w=this.w-i,this}},{key:"multiplyScalar",value:function(t){return"object"===e(t)&&console.warn("should use Vec4.multiply for vector * vector operation"),this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t,this}},{key:"multiply",value:function(t){return"object"!==e(t)&&console.warn("should use Vec4.scale for vector * scalar operation"),this.x=this.x*t.x,this.y=this.y*t.y,this.z=this.z*t.z,this.w=this.w*t.w,this}},{key:"multiply4f",value:function(t,e,n,i){return this.x=this.x*t,this.y=this.y*e,this.z=this.z*n,this.w=this.w*i,this}},{key:"divide",value:function(t){return this.x=this.x/t.x,this.y=this.y/t.y,this.z=this.z/t.z,this.w=this.w/t.w,this}},{key:"divide4f",value:function(t,e,n,i){return this.x=this.x/t,this.y=this.y/e,this.z=this.z/n,this.w=this.w/i,this}},{key:"negative",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:"cross",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*r-e*s,this.z=e*a-n*r,this}},{key:"length",value:function(){var t=this.x,e=this.y,n=this.z,i=this.w;return Math.sqrt(t*t+e*e+n*n+i*i)}},{key:"lengthSqr",value:function(){var t=this.x,e=this.y,n=this.z,i=this.w;return t*t+e*e+n*n+i*i}},{key:"normalize",value:function(){var t=this.x,e=this.y,n=this.z,i=this.w,r=t*t+e*e+n*n+i*i;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=n*r,this.w=i*r),this}},{key:"transformMat4",value:function(t){var e=this.x,n=this.y,i=this.z,r=this.w;return this.x=t.m00*e+t.m04*n+t.m08*i+t.m12*r,this.y=t.m01*e+t.m05*n+t.m09*i+t.m13*r,this.z=t.m02*e+t.m06*n+t.m10*i+t.m14*r,this.w=t.m03*e+t.m07*n+t.m11*i+t.m15*r,this}}]),i}(ue));function Er(t,e,n,i){return new zr(t,e,n,i)}zr.ZERO=Object.freeze(new zr(0,0,0,0)),zr.ONE=Object.freeze(new zr(1,1,1,1)),zr.NEG_ONE=Object.freeze(new zr(-1,-1,-1,-1)),Qe.fastDefine("cc.Vec4",zr,{x:0,y:0,z:0,w:0}),O.Vec4=zr,O.v4=Er;var Ar=t("O",function(t){function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return n(this,i),t=h(this,m(i).call(this)),"object"===e(r)?(t.m00=r.m00,t.m01=r.m01,t.m02=r.m02,t.m03=r.m03,t.m04=r.m04,t.m05=r.m05,t.m06=r.m06,t.m07=r.m07,t.m08=r.m08):(t.m00=r,t.m01=a,t.m02=s,t.m03=o,t.m04=u,t.m05=l,t.m06=c,t.m07=y,t.m08=f),t}return s(i,t),r(i,null,[{key:"clone",value:function(t){return new i(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08)}},{key:"copy",value:function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t}},{key:"set",value:function(t,e,n,i,r,a,s,m,o,u){return t.m00=e,t.m01=n,t.m02=i,t.m03=r,t.m04=a,t.m05=s,t.m06=m,t.m07=o,t.m08=u,t}},{key:"identity",value:function(t){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=1,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t}},{key:"transpose",value:function(t,e){if(t===e){var n=e.m01,i=e.m02,r=e.m05;t.m01=e.m03,t.m02=e.m06,t.m03=n,t.m05=e.m07,t.m06=i,t.m07=r}else t.m00=e.m00,t.m01=e.m03,t.m02=e.m06,t.m03=e.m01,t.m04=e.m04,t.m05=e.m07,t.m06=e.m02,t.m07=e.m05,t.m08=e.m08;return t}},{key:"invert",value:function(t,e){var n=e.m00,i=e.m01,r=e.m02,a=e.m03,s=e.m04,m=e.m05,o=e.m06,u=e.m07,h=e.m08,l=h*s-m*u,c=-h*a+m*o,y=u*a-s*o,f=n*l+i*c+r*y;return 0===f?(t.m00=0,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=0,t.m06=0,t.m07=0,t.m08=0,t):(f=1/f,t.m00=l*f,t.m01=(-h*i+r*u)*f,t.m02=(m*i-r*s)*f,t.m03=c*f,t.m04=(h*n-r*o)*f,t.m05=(-m*n+r*a)*f,t.m06=y*f,t.m07=(-u*n+i*o)*f,t.m08=(s*n-i*a)*f,t)}},{key:"determinant",value:function(t){var e=t.m00,n=t.m01,i=t.m02,r=t.m03,a=t.m04,s=t.m05,m=t.m06,o=t.m07,u=t.m08;return e*(u*a-s*o)+n*(-u*r+s*m)+i*(o*r-a*m)}},{key:"multiply",value:function(t,e,n){var i=e.m00,r=e.m01,a=e.m02,s=e.m03,m=e.m04,o=e.m05,u=e.m06,h=e.m07,l=e.m08,c=n.m00,y=n.m01,f=n.m02,v=n.m03,d=n.m04,_=n.m05,p=n.m06,g=n.m07,x=n.m08;return t.m00=c*i+y*s+f*u,t.m01=c*r+y*m+f*h,t.m02=c*a+y*o+f*l,t.m03=v*i+d*s+_*u,t.m04=v*r+d*m+_*h,t.m05=v*a+d*o+_*l,t.m06=p*i+g*s+x*u,t.m07=p*r+g*m+x*h,t.m08=p*a+g*o+x*l,t}},{key:"multiplyMat4",value:function(t,e,n){var i=e.m00,r=e.m01,a=e.m02,s=e.m03,m=e.m04,o=e.m05,u=e.m06,h=e.m07,l=e.m08,c=n.m00,y=n.m01,f=n.m02,v=n.m04,d=n.m05,_=n.m06,p=n.m08,g=n.m09,x=n.m10;return t.m00=c*i+y*s+f*u,t.m01=c*r+y*m+f*h,t.m02=c*a+y*o+f*l,t.m03=v*i+d*s+_*u,t.m04=v*r+d*m+_*h,t.m05=v*a+d*o+_*l,t.m06=p*i+g*s+x*u,t.m07=p*r+g*m+x*h,t.m08=p*a+g*o+x*l,t}},{key:"transfrom",value:function(t,e,n){i.transform(t,e,n)}},{key:"transform",value:function(t,e,n){var i=e.m00,r=e.m01,a=e.m02,s=e.m03,m=e.m04,o=e.m05,u=e.m06,h=e.m07,l=e.m08,c=n.x,y=n.y;return t.m00=i,t.m01=r,t.m02=a,t.m03=s,t.m04=m,t.m05=o,t.m06=c*i+y*s+u,t.m07=c*r+y*m+h,t.m08=c*a+y*o+l,t}},{key:"scale",value:function(t,e,n){var i=n.x,r=n.y;return t.m00=i*e.m00,t.m01=i*e.m01,t.m02=i*e.m02,t.m03=r*e.m03,t.m04=r*e.m04,t.m05=r*e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t}},{key:"rotate",value:function(t,e,n){var i=e.m00,r=e.m01,a=e.m02,s=e.m03,m=e.m04,o=e.m05,u=e.m06,h=e.m07,l=e.m08,c=Math.sin(n),y=Math.cos(n);return t.m00=y*i+c*s,t.m01=y*r+c*m,t.m02=y*a+c*o,t.m03=y*s-c*i,t.m04=y*m-c*r,t.m05=y*o-c*a,t.m06=u,t.m07=h,t.m08=l,t}},{key:"fromMat4",value:function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m04,t.m04=e.m05,t.m05=e.m06,t.m06=e.m08,t.m07=e.m09,t.m08=e.m10,t}},{key:"fromViewUp",value:function(t,e,n){return br.lengthSqr(e)<Vn*Vn?(i.identity(t),t):(n=n||br.UNIT_Y,br.normalize(Or,br.cross(Or,n,e)),br.lengthSqr(Or)<Vn*Vn?(i.identity(t),t):(br.cross(Nr,e,Or),i.set(t,Or.x,Or.y,Or.z,Nr.x,Nr.y,Nr.z,e.x,e.y,e.z),t))}},{key:"fromTranslation",value:function(t,e){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=1,t.m05=0,t.m06=e.x,t.m07=e.y,t.m08=1,t}},{key:"fromScaling",value:function(t,e){return t.m00=e.x,t.m01=0,t.m02=0,t.m03=0,t.m04=e.y,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t}},{key:"fromRotation",value:function(t,e){var n=Math.sin(e),i=Math.cos(e);return t.m00=i,t.m01=n,t.m02=0,t.m03=-n,t.m04=i,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t}},{key:"fromQuat",value:function(t,e){var n=e.x,i=e.y,r=e.z,a=e.w,s=n+n,m=i+i,o=r+r,u=n*s,h=i*s,l=i*m,c=r*s,y=r*m,f=r*o,v=a*s,d=a*m,_=a*o;return t.m00=1-l-f,t.m03=h-_,t.m06=c+d,t.m01=h+_,t.m04=1-u-f,t.m07=y-v,t.m02=c-d,t.m05=y+v,t.m08=1-u-l,t}},{key:"inverseTransposeMat4",value:function(t,e){var n=e.m00,i=e.m01,r=e.m02,a=e.m03,s=e.m04,m=e.m05,o=e.m06,u=e.m07,h=e.m08,l=e.m09,c=e.m10,y=e.m11,f=e.m12,v=e.m13,d=e.m14,_=e.m15,p=n*m-i*s,g=n*o-r*s,x=n*u-a*s,b=i*o-r*m,w=i*u-a*m,M=r*u-a*o,k=h*v-l*f,z=h*d-c*f,E=h*_-y*f,A=l*d-c*v,O=l*_-y*v,N=c*_-y*d,S=p*N-g*O+x*A+b*E-w*z+M*k;return S?(S=1/S,t.m00=(m*N-o*O+u*A)*S,t.m01=(o*E-s*N-u*z)*S,t.m02=(s*O-m*E+u*k)*S,t.m03=(r*O-i*N-a*A)*S,t.m04=(n*N-r*E+a*z)*S,t.m05=(i*E-n*O-a*k)*S,t.m06=(v*M-d*w+_*b)*S,t.m07=(d*x-f*M-_*g)*S,t.m08=(f*w-v*x+_*p)*S,t):null}},{key:"toArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[n+0]=e.m00,t[n+1]=e.m01,t[n+2]=e.m02,t[n+3]=e.m03,t[n+4]=e.m04,t[n+5]=e.m05,t[n+6]=e.m06,t[n+7]=e.m07,t[n+8]=e.m08,t}},{key:"fromArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.m00=e[n+0],t.m01=e[n+1],t.m02=e[n+2],t.m03=e[n+3],t.m04=e[n+4],t.m05=e[n+5],t.m06=e[n+6],t.m07=e[n+7],t.m08=e[n+8],t}},{key:"add",value:function(t,e,n){return t.m00=e.m00+n.m00,t.m01=e.m01+n.m01,t.m02=e.m02+n.m02,t.m03=e.m03+n.m03,t.m04=e.m04+n.m04,t.m05=e.m05+n.m05,t.m06=e.m06+n.m06,t.m07=e.m07+n.m07,t.m08=e.m08+n.m08,t}},{key:"subtract",value:function(t,e,n){return t.m00=e.m00-n.m00,t.m01=e.m01-n.m01,t.m02=e.m02-n.m02,t.m03=e.m03-n.m03,t.m04=e.m04-n.m04,t.m05=e.m05-n.m05,t.m06=e.m06-n.m06,t.m07=e.m07-n.m07,t.m08=e.m08-n.m08,t}},{key:"multiplyScalar",value:function(t,e,n){return t.m00=e.m00*n,t.m01=e.m01*n,t.m02=e.m02*n,t.m03=e.m03*n,t.m04=e.m04*n,t.m05=e.m05*n,t.m06=e.m06*n,t.m07=e.m07*n,t.m08=e.m08*n,t}},{key:"multiplyScalarAndAdd",value:function(t,e,n,i){return t.m00=n.m00*i+e.m00,t.m01=n.m01*i+e.m01,t.m02=n.m02*i+e.m02,t.m03=n.m03*i+e.m03,t.m04=n.m04*i+e.m04,t.m05=n.m05*i+e.m05,t.m06=n.m06*i+e.m06,t.m07=n.m07*i+e.m07,t.m08=n.m08*i+e.m08,t}},{key:"strictEquals",value:function(t,e){return t.m00===e.m00&&t.m01===e.m01&&t.m02===e.m02&&t.m03===e.m03&&t.m04===e.m04&&t.m05===e.m05&&t.m06===e.m06&&t.m07===e.m07&&t.m08===e.m08}},{key:"equals",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vn;return Math.abs(t.m00-e.m00)<=n*Math.max(1,Math.abs(t.m00),Math.abs(e.m00))&&Math.abs(t.m01-e.m01)<=n*Math.max(1,Math.abs(t.m01),Math.abs(e.m01))&&Math.abs(t.m02-e.m02)<=n*Math.max(1,Math.abs(t.m02),Math.abs(e.m02))&&Math.abs(t.m03-e.m03)<=n*Math.max(1,Math.abs(t.m03),Math.abs(e.m03))&&Math.abs(t.m04-e.m04)<=n*Math.max(1,Math.abs(t.m04),Math.abs(e.m04))&&Math.abs(t.m05-e.m05)<=n*Math.max(1,Math.abs(t.m05),Math.abs(e.m05))&&Math.abs(t.m06-e.m06)<=n*Math.max(1,Math.abs(t.m06),Math.abs(e.m06))&&Math.abs(t.m07-e.m07)<=n*Math.max(1,Math.abs(t.m07),Math.abs(e.m07))&&Math.abs(t.m08-e.m08)<=n*Math.max(1,Math.abs(t.m08),Math.abs(e.m08))}}]),r(i,[{key:"clone",value:function(){var t=this;return new i(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08)}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return"object"===e(t)?(this.m00=t.m00,this.m01=t.m01,this.m02=t.m02,this.m03=t.m03,this.m04=t.m04,this.m05=t.m05,this.m06=t.m06,this.m07=t.m07,this.m08=t.m08):(this.m00=t,this.m01=n,this.m02=i,this.m03=r,this.m04=a,this.m05=s,this.m06=m,this.m07=o,this.m08=u),this}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vn;return Math.abs(this.m00-t.m00)<=e*Math.max(1,Math.abs(this.m00),Math.abs(t.m00))&&Math.abs(this.m01-t.m01)<=e*Math.max(1,Math.abs(this.m01),Math.abs(t.m01))&&Math.abs(this.m02-t.m02)<=e*Math.max(1,Math.abs(this.m02),Math.abs(t.m02))&&Math.abs(this.m03-t.m03)<=e*Math.max(1,Math.abs(this.m03),Math.abs(t.m03))&&Math.abs(this.m04-t.m04)<=e*Math.max(1,Math.abs(this.m04),Math.abs(t.m04))&&Math.abs(this.m05-t.m05)<=e*Math.max(1,Math.abs(this.m05),Math.abs(t.m05))&&Math.abs(this.m06-t.m06)<=e*Math.max(1,Math.abs(this.m06),Math.abs(t.m06))&&Math.abs(this.m07-t.m07)<=e*Math.max(1,Math.abs(this.m07),Math.abs(t.m07))&&Math.abs(this.m08-t.m08)<=e*Math.max(1,Math.abs(this.m08),Math.abs(t.m08))}},{key:"strictEquals",value:function(t){return this.m00===t.m00&&this.m01===t.m01&&this.m02===t.m02&&this.m03===t.m03&&this.m04===t.m04&&this.m05===t.m05&&this.m06===t.m06&&this.m07===t.m07&&this.m08===t.m08}},{key:"toString",value:function(){var t=this;return"[\n"+t.m00+", "+t.m01+", "+t.m02+",\n"+t.m03+",\n"+t.m04+", "+t.m05+",\n"+t.m06+", "+t.m07+",\n"+t.m08+"\n]"}},{key:"identity",value:function(){return this.m00=1,this.m01=0,this.m02=0,this.m03=0,this.m04=1,this.m05=0,this.m06=0,this.m07=0,this.m08=1,this}},{key:"transpose",value:function(){var t=this.m01,e=this.m02,n=this.m05;return this.m01=this.m03,this.m02=this.m06,this.m03=t,this.m05=this.m07,this.m06=e,this.m07=n,this}},{key:"invert",value:function(){var t=this.m00,e=this.m01,n=this.m02,i=this.m03,r=this.m04,a=this.m05,s=this.m06,m=this.m07,o=this.m08,u=o*r-a*m,h=-o*i+a*s,l=m*i-r*s,c=t*u+e*h+n*l;return 0===c?(this.set(0,0,0,0,0,0,0,0,0),this):(c=1/c,this.m00=u*c,this.m01=(-o*e+n*m)*c,this.m02=(a*e-n*r)*c,this.m03=h*c,this.m04=(o*t-n*s)*c,this.m05=(-a*t+n*i)*c,this.m06=l*c,this.m07=(-m*t+e*s)*c,this.m08=(r*t-e*i)*c,this)}},{key:"determinant",value:function(){var t=this.m00,e=this.m01,n=this.m02,i=this.m03,r=this.m04,a=this.m05,s=this.m06,m=this.m07,o=this.m08;return t*(o*r-a*m)+e*(-o*i+a*s)+n*(m*i-r*s)}},{key:"add",value:function(t){return this.m00=this.m00+t.m00,this.m01=this.m01+t.m01,this.m02=this.m02+t.m02,this.m03=this.m03+t.m03,this.m04=this.m04+t.m04,this.m05=this.m05+t.m05,this.m06=this.m06+t.m06,this.m07=this.m07+t.m07,this.m08=this.m08+t.m08,this}},{key:"subtract",value:function(t){return this.m00=this.m00-t.m00,this.m01=this.m01-t.m01,this.m02=this.m02-t.m02,this.m03=this.m03-t.m03,this.m04=this.m04-t.m04,this.m05=this.m05-t.m05,this.m06=this.m06-t.m06,this.m07=this.m07-t.m07,this.m08=this.m08-t.m08,this}},{key:"multiply",value:function(t){var e=this.m00,n=this.m01,i=this.m02,r=this.m03,a=this.m04,s=this.m05,m=this.m06,o=this.m07,u=this.m08,h=t.m00,l=t.m01,c=t.m02,y=t.m03,f=t.m04,v=t.m05,d=t.m06,_=t.m07,p=t.m08;return this.m00=h*e+l*r+c*m,this.m01=h*n+l*a+c*o,this.m02=h*i+l*s+c*u,this.m03=y*e+f*r+v*m,this.m04=y*n+f*a+v*o,this.m05=y*i+f*s+v*u,this.m06=d*e+_*r+p*m,this.m07=d*n+_*a+p*o,this.m08=d*i+_*s+p*u,this}},{key:"multiplyScalar",value:function(t){return this.m00=this.m00*t,this.m01=this.m01*t,this.m02=this.m02*t,this.m03=this.m03*t,this.m04=this.m04*t,this.m05=this.m05*t,this.m06=this.m06*t,this.m07=this.m07*t,this.m08=this.m08*t,this}},{key:"scale",value:function(t){var e=t.x,n=t.y;return this.m00=e*this.m00,this.m01=e*this.m01,this.m02=e*this.m02,this.m03=n*this.m03,this.m04=n*this.m04,this.m05=n*this.m05,this.m06=this.m06,this.m07=this.m07,this.m08=this.m08,this}},{key:"rotate",value:function(t){var e=this.m00,n=this.m01,i=this.m02,r=this.m03,a=this.m04,s=this.m05,m=this.m06,o=this.m07,u=this.m08,h=Math.sin(t),l=Math.cos(t);return this.m00=l*e+h*r,this.m01=l*n+h*a,this.m02=l*i+h*s,this.m03=l*r-h*e,this.m04=l*a-h*n,this.m05=l*s-h*i,this.m06=m,this.m07=o,this.m08=u,this}},{key:"fromQuat",value:function(t){var e=t.x,n=t.y,i=t.z,r=t.w,a=e+e,s=n+n,m=i+i,o=e*a,u=n*a,h=n*s,l=i*a,c=i*s,y=i*m,f=r*a,v=r*s,d=r*m;return this.m00=1-h-y,this.m03=u-d,this.m06=l+v,this.m01=u+d,this.m04=1-o-y,this.m07=c-f,this.m02=l-v,this.m05=c+f,this.m08=1-o-h,this}}]),i}(ue));Ar.IDENTITY=Object.freeze(new Ar);var Or=new br,Nr=new br;Qe.fastDefine("cc.Mat3",Ar,{m00:1,m01:0,m02:0,m03:0,m04:1,m05:0,m06:0,m07:0,m08:1}),O.Mat3=Ar;var Sr=t("Q",function(t){function i(t,r,a,s){var o;return n(this,i),o=h(this,m(i).call(this)),t&&"object"===e(t)?(o.x=t.x,o.y=t.y,o.z=t.z,o.w=t.w):(o.x=t||0,o.y=r||0,o.z=a||0,o.w=null!=s?s:1),o}return s(i,t),r(i,null,[{key:"clone",value:function(t){return new i(t.x,t.y,t.z,t.w)}},{key:"copy",value:function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}},{key:"set",value:function(t,e,n,i,r){return t.x=e,t.y=n,t.z=i,t.w=r,t}},{key:"identity",value:function(t){return t.x=0,t.y=0,t.z=0,t.w=1,t}},{key:"rotationTo",value:function(t,e,n){var r=br.dot(e,n);return r<-.999999?(br.cross(Rr,br.UNIT_X,e),Rr.length()<1e-6&&br.cross(Rr,br.UNIT_Y,e),br.normalize(Rr,Rr),i.fromAxisAngle(t,Rr,Math.PI),t):r>.999999?(t.x=0,t.y=0,t.z=0,t.w=1,t):(br.cross(Rr,e,n),t.x=Rr.x,t.y=Rr.y,t.z=Rr.z,t.w=1+r,i.normalize(t,t))}},{key:"getAxisAngle",value:function(t,e){var n=2*Math.acos(e.w),i=Math.sin(n/2);return 0!==i?(t.x=e.x/i,t.y=e.y/i,t.z=e.z/i):(t.x=1,t.y=0,t.z=0),n}},{key:"multiply",value:function(t,e,n){var i=e.x*n.w+e.w*n.x+e.y*n.z-e.z*n.y,r=e.y*n.w+e.w*n.y+e.z*n.x-e.x*n.z,a=e.z*n.w+e.w*n.z+e.x*n.y-e.y*n.x,s=e.w*n.w-e.x*n.x-e.y*n.y-e.z*n.z;return t.x=i,t.y=r,t.z=a,t.w=s,t}},{key:"multiplyScalar",value:function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t}},{key:"scaleAndAdd",value:function(t,e,n,i){return t.x=e.x+n.x*i,t.y=e.y+n.y*i,t.z=e.z+n.z*i,t.w=e.w+n.w*i,t}},{key:"rotateX",value:function(t,e,n){n*=.5;var i=Math.sin(n),r=Math.cos(n),a=e.x,s=e.y,m=e.z,o=e.w;return t.x=a*r+o*i,t.y=s*r+m*i,t.z=m*r-s*i,t.w=o*r-a*i,t}},{key:"rotateY",value:function(t,e,n){n*=.5;var i=Math.sin(n),r=Math.cos(n),a=e.x,s=e.y,m=e.z,o=e.w;return t.x=a*r-m*i,t.y=s*r+o*i,t.z=m*r+a*i,t.w=o*r-s*i,t}},{key:"rotateZ",value:function(t,e,n){n*=.5;var i=Math.sin(n),r=Math.cos(n),a=e.x,s=e.y,m=e.z,o=e.w;return t.x=a*r+s*i,t.y=s*r-a*i,t.z=m*r+o*i,t.w=o*r-m*i,t}},{key:"rotateAround",value:function(t,e,n,r){return i.invert(Ir,e),br.transformQuat(Rr,n,Ir),i.fromAxisAngle(Ir,Rr,r),i.multiply(t,e,Ir),t}},{key:"rotateAroundLocal",value:function(t,e,n,r){return i.fromAxisAngle(Ir,n,r),i.multiply(t,e,Ir),t}},{key:"calculateW",value:function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=Math.sqrt(Math.abs(1-e.x*e.x-e.y*e.y-e.z*e.z)),t}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w}},{key:"lerp",value:function(t,e,n,i){return t.x=e.x+i*(n.x-e.x),t.y=e.y+i*(n.y-e.y),t.z=e.z+i*(n.z-e.z),t.w=e.w+i*(n.w-e.w),t}},{key:"slerp",value:function(t,e,n,i){var r=0,a=0,s=n.x,m=n.y,o=n.z,u=n.w,h=e.x*n.x+e.y*n.y+e.z*n.z+e.w*n.w;if(h<0&&(h=-h,s=-s,m=-m,o=-o,u=-u),1-h>1e-6){var l=Math.acos(h),c=Math.sin(l);r=Math.sin((1-i)*l)/c,a=Math.sin(i*l)/c}else r=1-i,a=i;return t.x=r*e.x+a*s,t.y=r*e.y+a*m,t.z=r*e.z+a*o,t.w=r*e.w+a*u,t}},{key:"sqlerp",value:function(t,e,n,r,a,s){return i.slerp(Ir,e,a,s),i.slerp(Tr,n,r,s),i.slerp(t,Ir,Tr,2*s*(1-s)),t}},{key:"invert",value:function(t,e){var n=e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w,i=n?1/n:0;return t.x=-e.x*i,t.y=-e.y*i,t.z=-e.z*i,t.w=e.w*i,t}},{key:"conjugate",value:function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t}},{key:"len",value:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w)}},{key:"lengthSqr",value:function(t){return t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w}},{key:"normalize",value:function(t,e){var n=e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w;return n>0&&(n=1/Math.sqrt(n),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n),t}},{key:"fromAxes",value:function(t,e,n,r){return Ar.set(Pr,e.x,e.y,e.z,n.x,n.y,n.z,r.x,r.y,r.z),i.normalize(t,i.fromMat3(t,Pr))}},{key:"fromViewUp",value:function(t,e,n){return Ar.fromViewUp(Pr,e,n),i.normalize(t,i.fromMat3(t,Pr))}},{key:"fromAxisAngle",value:function(t,e,n){n*=.5;var i=Math.sin(n);return t.x=i*e.x,t.y=i*e.y,t.z=i*e.z,t.w=Math.cos(n),t}},{key:"fromMat3",value:function(t,e){var n=e.m00,i=e.m03,r=e.m06,a=e.m01,s=e.m04,m=e.m07,o=e.m02,u=e.m05,h=e.m08,l=n+s+h;if(l>0){var c=.5/Math.sqrt(l+1);t.w=.25/c,t.x=(u-m)*c,t.y=(r-o)*c,t.z=(a-i)*c}else if(n>s&&n>h){var y=2*Math.sqrt(1+n-s-h);t.w=(u-m)/y,t.x=.25*y,t.y=(i+a)/y,t.z=(r+o)/y}else if(s>h){var f=2*Math.sqrt(1+s-n-h);t.w=(r-o)/f,t.x=(i+a)/f,t.y=.25*f,t.z=(m+u)/f}else{var v=2*Math.sqrt(1+h-n-s);t.w=(a-i)/v,t.x=(r+o)/v,t.y=(m+u)/v,t.z=.25*v}return t}},{key:"fromEuler",value:function(t,e,n,i){e*=Cr,n*=Cr,i*=Cr;var r=Math.sin(e),a=Math.cos(e),s=Math.sin(n),m=Math.cos(n),o=Math.sin(i),u=Math.cos(i);return t.x=r*m*u+a*s*o,t.y=a*s*u+r*m*o,t.z=a*m*o-r*s*u,t.w=a*m*u-r*s*o,t}},{key:"toAxisX",value:function(t,e){var n=2*e.y,i=2*e.z;return t.x=1-n*e.y-i*e.z,t.y=n*e.x+i*e.w,t.z=i*e.x+n*e.w,t}},{key:"toAxisY",value:function(t,e){var n=2*e.x,i=2*e.y,r=2*e.z;return t.x=i*e.x-r*e.w,t.y=1-n*e.x-r*e.z,t.z=r*e.y+n*e.w,t}},{key:"toAxisZ",value:function(t,e){var n=2*e.x,i=2*e.y,r=2*e.z;return t.x=r*e.x-i*e.w,t.y=r*e.y-n*e.w,t.z=1-n*e.x-i*e.y,t}},{key:"toEuler",value:function(t,e,n){var i=e.x,r=e.y,a=e.z,s=e.w,m=0,o=0,u=0,h=i*r+a*s;if(h>.499999)m=0,o=Un(2*Math.atan2(i,s)),u=90;else if(h<-.499999)m=0,o=-Un(2*Math.atan2(i,s)),u=-90;else{var l=i*i,c=r*r,y=a*a;m=Un(Math.atan2(2*i*s-2*r*a,1-2*l-2*y)),o=Un(Math.atan2(2*r*s-2*i*a,1-2*c-2*y)),u=Un(Math.asin(2*h)),n&&(m=-180*Math.sign(m+1e-6)+m,o=-180*Math.sign(o+1e-6)+o,u=180*Math.sign(u+1e-6)-u)}return t.x=m,t.y=o,t.z=u,t}},{key:"toArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t[n+3]=e.w,t}},{key:"fromArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t.w=e[n+3],t}},{key:"strictEquals",value:function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}},{key:"equals",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vn;return Math.abs(t.x-e.x)<=n*Math.max(1,Math.abs(t.x),Math.abs(e.x))&&Math.abs(t.y-e.y)<=n*Math.max(1,Math.abs(t.y),Math.abs(e.y))&&Math.abs(t.z-e.z)<=n*Math.max(1,Math.abs(t.z),Math.abs(e.z))&&Math.abs(t.w-e.w)<=n*Math.max(1,Math.abs(t.w),Math.abs(e.w))}}]),r(i,[{key:"clone",value:function(){return new i(this.x,this.y,this.z,this.w)}},{key:"set",value:function(t,n,i,r){return t&&"object"===e(t)?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=n||0,this.z=i||0,this.w=null!=r?r:1),this}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vn;return Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))&&Math.abs(this.z-t.z)<=e*Math.max(1,Math.abs(this.z),Math.abs(t.z))&&Math.abs(this.w-t.w)<=e*Math.max(1,Math.abs(this.w),Math.abs(t.w))}},{key:"strictEquals",value:function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}},{key:"getEulerAngles",value:function(t){return i.toEuler(t,this)}},{key:"lerp",value:function(t,e){return this.x=this.x+e*(t.x-this.x),this.y=this.y+e*(t.y-this.y),this.z=this.z+e*(t.z-this.z),this.w=this.w+e*(t.w-this.w),this}},{key:"slerp",value:function(t,e){return i.slerp(this,this,t,e)}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"lengthSqr",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}}]),i}(ue));Sr.IDENTITY=Object.freeze(new Sr);var Ir=new Sr,Tr=new Sr,Rr=new br,Pr=new Ar,Cr=.5*Math.PI/180;function Dr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new Sr(t,e,n,i)}Qe.fastDefine("cc.Quat",Sr,{x:0,y:0,z:0,w:1}),O.Quat=Sr,O.quat=Dr;var qr=t("M",function(t){function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,x=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,b=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return n(this,i),(t=h(this,m(i).call(this))).m00=void 0,t.m01=void 0,t.m02=void 0,t.m03=void 0,t.m04=void 0,t.m05=void 0,t.m06=void 0,t.m07=void 0,t.m08=void 0,t.m09=void 0,t.m10=void 0,t.m11=void 0,t.m12=void 0,t.m13=void 0,t.m14=void 0,t.m15=void 0,"object"===e(r)?(t.m00=r.m00,t.m01=r.m01,t.m02=r.m02,t.m03=r.m03,t.m04=r.m04,t.m05=r.m05,t.m06=r.m06,t.m07=r.m07,t.m08=r.m08,t.m09=r.m09,t.m10=r.m10,t.m11=r.m11,t.m12=r.m12,t.m13=r.m13,t.m14=r.m14,t.m15=r.m15):(t.m00=r,t.m01=a,t.m02=s,t.m03=o,t.m04=u,t.m05=l,t.m06=c,t.m07=y,t.m08=f,t.m09=v,t.m10=d,t.m11=_,t.m12=p,t.m13=g,t.m14=x,t.m15=b),t}return s(i,t),r(i,null,[{key:"clone",value:function(t){return new i(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08,t.m09,t.m10,t.m11,t.m12,t.m13,t.m14,t.m15)}},{key:"copy",value:function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15,t}},{key:"set",value:function(t,e,n,i,r,a,s,m,o,u,h,l,c,y,f,v,d){return t.m00=e,t.m01=n,t.m02=i,t.m03=r,t.m04=a,t.m05=s,t.m06=m,t.m07=o,t.m08=u,t.m09=h,t.m10=l,t.m11=c,t.m12=y,t.m13=f,t.m14=v,t.m15=d,t}},{key:"identity",value:function(t){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t}},{key:"transpose",value:function(t,e){if(t===e){var n=e.m01,i=e.m02,r=e.m03,a=e.m06,s=e.m07,m=e.m11;t.m01=e.m04,t.m02=e.m08,t.m03=e.m12,t.m04=n,t.m06=e.m09,t.m07=e.m13,t.m08=i,t.m09=a,t.m11=e.m14,t.m12=r,t.m13=s,t.m14=m}else t.m00=e.m00,t.m01=e.m04,t.m02=e.m08,t.m03=e.m12,t.m04=e.m01,t.m05=e.m05,t.m06=e.m09,t.m07=e.m13,t.m08=e.m02,t.m09=e.m06,t.m10=e.m10,t.m11=e.m14,t.m12=e.m03,t.m13=e.m07,t.m14=e.m11,t.m15=e.m15;return t}},{key:"invert",value:function(t,e){var n=e.m00,i=e.m01,r=e.m02,a=e.m03,s=e.m04,m=e.m05,o=e.m06,u=e.m07,h=e.m08,l=e.m09,c=e.m10,y=e.m11,f=e.m12,v=e.m13,d=e.m14,_=e.m15,p=n*m-i*s,g=n*o-r*s,x=n*u-a*s,b=i*o-r*m,w=i*u-a*m,M=r*u-a*o,k=h*v-l*f,z=h*d-c*f,E=h*_-y*f,A=l*d-c*v,O=l*_-y*v,N=c*_-y*d,S=p*N-g*O+x*A+b*E-w*z+M*k;return 0===S?(t.m00=0,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=0,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=0,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=0,t):(S=1/S,t.m00=(m*N-o*O+u*A)*S,t.m01=(r*O-i*N-a*A)*S,t.m02=(v*M-d*w+_*b)*S,t.m03=(c*w-l*M-y*b)*S,t.m04=(o*E-s*N-u*z)*S,t.m05=(n*N-r*E+a*z)*S,t.m06=(d*x-f*M-_*g)*S,t.m07=(h*M-c*x+y*g)*S,t.m08=(s*O-m*E+u*k)*S,t.m09=(i*E-n*O-a*k)*S,t.m10=(f*w-v*x+_*p)*S,t.m11=(l*x-h*w-y*p)*S,t.m12=(m*z-s*A-o*k)*S,t.m13=(n*A-i*z+r*k)*S,t.m14=(v*g-f*b-d*p)*S,t.m15=(h*b-l*g+c*p)*S,t)}},{key:"determinant",value:function(t){var e=t.m00,n=t.m01,i=t.m02,r=t.m03,a=t.m04,s=t.m05,m=t.m06,o=t.m07,u=t.m08,h=t.m09,l=t.m10,c=t.m11,y=t.m12,f=t.m13,v=t.m14,d=t.m15;return(e*s-n*a)*(l*d-c*v)-(e*m-i*a)*(h*d-c*f)+(e*o-r*a)*(h*v-l*f)+(n*m-i*s)*(u*d-c*y)-(n*o-r*s)*(u*v-l*y)+(i*o-r*m)*(u*f-h*y)}},{key:"multiply",value:function(t,e,n){var i=e.m00,r=e.m01,a=e.m02,s=e.m03,m=e.m04,o=e.m05,u=e.m06,h=e.m07,l=e.m08,c=e.m09,y=e.m10,f=e.m11,v=e.m12,d=e.m13,_=e.m14,p=e.m15,g=n.m00,x=n.m01,b=n.m02,w=n.m03;return t.m00=g*i+x*m+b*l+w*v,t.m01=g*r+x*o+b*c+w*d,t.m02=g*a+x*u+b*y+w*_,t.m03=g*s+x*h+b*f+w*p,g=n.m04,x=n.m05,b=n.m06,w=n.m07,t.m04=g*i+x*m+b*l+w*v,t.m05=g*r+x*o+b*c+w*d,t.m06=g*a+x*u+b*y+w*_,t.m07=g*s+x*h+b*f+w*p,g=n.m08,x=n.m09,b=n.m10,w=n.m11,t.m08=g*i+x*m+b*l+w*v,t.m09=g*r+x*o+b*c+w*d,t.m10=g*a+x*u+b*y+w*_,t.m11=g*s+x*h+b*f+w*p,g=n.m12,x=n.m13,b=n.m14,w=n.m15,t.m12=g*i+x*m+b*l+w*v,t.m13=g*r+x*o+b*c+w*d,t.m14=g*a+x*u+b*y+w*_,t.m15=g*s+x*h+b*f+w*p,t}},{key:"transform",value:function(t,e,n){var i=n.x,r=n.y,a=n.z;if(e===t)t.m12=e.m00*i+e.m04*r+e.m08*a+e.m12,t.m13=e.m01*i+e.m05*r+e.m09*a+e.m13,t.m14=e.m02*i+e.m06*r+e.m10*a+e.m14,t.m15=e.m03*i+e.m07*r+e.m11*a+e.m15;else{var s=e.m00,m=e.m01,o=e.m02,u=e.m03,h=e.m04,l=e.m05,c=e.m06,y=e.m07,f=e.m08,v=e.m09,d=e.m10,_=e.m11;e.m12,e.m13,e.m14,e.m15;t.m00=s,t.m01=m,t.m02=o,t.m03=u,t.m04=h,t.m05=l,t.m06=c,t.m07=y,t.m08=f,t.m09=v,t.m10=d,t.m11=_,t.m12=s*i+h*r+f*a+e.m12,t.m13=m*i+l*r+v*a+e.m13,t.m14=o*i+c*r+d*a+e.m14,t.m15=u*i+y*r+_*a+e.m15}return t}},{key:"translate",value:function(t,e,n){return console.warn("function changed"),e===t?(t.m12+=n.x,t.m13+=n.y,t.m14+=n.z):(t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12+=n.x,t.m13+=n.y,t.m14+=n.z,t.m15=e.m15),t}},{key:"scale",value:function(t,e,n){var i=n.x,r=n.y,a=n.z;return t.m00=e.m00*i,t.m01=e.m01*i,t.m02=e.m02*i,t.m03=e.m03*i,t.m04=e.m04*r,t.m05=e.m05*r,t.m06=e.m06*r,t.m07=e.m07*r,t.m08=e.m08*a,t.m09=e.m09*a,t.m10=e.m10*a,t.m11=e.m11*a,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15,t}},{key:"rotate",value:function(t,e,n,i){var r=i.x,a=i.y,s=i.z,m=Math.sqrt(r*r+a*a+s*s);if(Math.abs(m)<Vn)return null;r*=m=1/m,a*=m,s*=m;var o=Math.sin(n),u=Math.cos(n),h=1-u,l=e.m00,c=e.m01,y=e.m02,f=e.m03,v=e.m04,d=e.m05,_=e.m06,p=e.m07,g=e.m08,x=e.m09,b=e.m10,w=e.m11,M=r*r*h+u,k=a*r*h+s*o,z=s*r*h-a*o,E=r*a*h-s*o,A=a*a*h+u,O=s*a*h+r*o,N=r*s*h+a*o,S=a*s*h-r*o,I=s*s*h+u;return t.m00=l*M+v*k+g*z,t.m01=c*M+d*k+x*z,t.m02=y*M+_*k+b*z,t.m03=f*M+p*k+w*z,t.m04=l*E+v*A+g*O,t.m05=c*E+d*A+x*O,t.m06=y*E+_*A+b*O,t.m07=f*E+p*A+w*O,t.m08=l*N+v*S+g*I,t.m09=c*N+d*S+x*I,t.m10=y*N+_*S+b*I,t.m11=f*N+p*S+w*I,e!==t&&(t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t}},{key:"rotateX",value:function(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e.m04,s=e.m05,m=e.m06,o=e.m07,u=e.m08,h=e.m09,l=e.m10,c=e.m11;return e!==t&&(t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m04=a*r+u*i,t.m05=s*r+h*i,t.m06=m*r+l*i,t.m07=o*r+c*i,t.m08=u*r-a*i,t.m09=h*r-s*i,t.m10=l*r-m*i,t.m11=c*r-o*i,t}},{key:"rotateY",value:function(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e.m00,s=e.m01,m=e.m02,o=e.m03,u=e.m08,h=e.m09,l=e.m10,c=e.m11;return e!==t&&(t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m00=a*r-u*i,t.m01=s*r-h*i,t.m02=m*r-l*i,t.m03=o*r-c*i,t.m08=a*i+u*r,t.m09=s*i+h*r,t.m10=m*i+l*r,t.m11=o*i+c*r,t}},{key:"rotateZ",value:function(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e.m00,s=e.m01,m=e.m02,o=e.m03,u=e.m04,h=e.m05,l=e.m06,c=e.m07;return e!==t&&(t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m00=a*r+u*i,t.m01=s*r+h*i,t.m02=m*r+l*i,t.m03=o*r+c*i,t.m04=u*r-a*i,t.m05=h*r-s*i,t.m06=l*r-m*i,t.m07=c*r-o*i,t}},{key:"fromTranslation",value:function(t,e){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=e.x,t.m13=e.y,t.m14=e.z,t.m15=1,t}},{key:"fromScaling",value:function(t,e){return t.m00=e.x,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=e.y,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=e.z,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t}},{key:"fromRotation",value:function(t,e,n){var i=n.x,r=n.y,a=n.z,s=Math.sqrt(i*i+r*r+a*a);if(Math.abs(s)<Vn)return null;i*=s=1/s,r*=s,a*=s;var m=Math.sin(e),o=Math.cos(e),u=1-o;return t.m00=i*i*u+o,t.m01=r*i*u+a*m,t.m02=a*i*u-r*m,t.m03=0,t.m04=i*r*u-a*m,t.m05=r*r*u+o,t.m06=a*r*u+i*m,t.m07=0,t.m08=i*a*u+r*m,t.m09=r*a*u-i*m,t.m10=a*a*u+o,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t}},{key:"fromXRotation",value:function(t,e){var n=Math.sin(e),i=Math.cos(e);return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=i,t.m06=n,t.m07=0,t.m08=0,t.m09=-n,t.m10=i,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t}},{key:"fromYRotation",value:function(t,e){var n=Math.sin(e),i=Math.cos(e);return t.m00=i,t.m01=0,t.m02=-n,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=n,t.m09=0,t.m10=i,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t}},{key:"fromZRotation",value:function(t,e){var n=Math.sin(e),i=Math.cos(e);return t.m00=i,t.m01=n,t.m02=0,t.m03=0,t.m04=-n,t.m05=i,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t}},{key:"fromRT",value:function(t,e,n){var i=e.x,r=e.y,a=e.z,s=e.w,m=i+i,o=r+r,u=a+a,h=i*m,l=i*o,c=i*u,y=r*o,f=r*u,v=a*u,d=s*m,_=s*o,p=s*u;return t.m00=1-(y+v),t.m01=l+p,t.m02=c-_,t.m03=0,t.m04=l-p,t.m05=1-(h+v),t.m06=f+d,t.m07=0,t.m08=c+_,t.m09=f-d,t.m10=1-(h+y),t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t}},{key:"getTranslation",value:function(t,e){return t.x=e.m12,t.y=e.m13,t.z=e.m14,t}},{key:"getScaling",value:function(t,e){var n=Lr.m00=e.m00,i=Lr.m01=e.m01,r=Lr.m02=e.m02,a=Lr.m03=e.m04,s=Lr.m04=e.m05,m=Lr.m05=e.m06,o=Lr.m06=e.m08,u=Lr.m07=e.m09,h=Lr.m08=e.m10;return t.x=Math.sqrt(n*n+i*i+r*r),t.y=Math.sqrt(a*a+s*s+m*m),t.z=Math.sqrt(o*o+u*u+h*h),Ar.determinant(Lr)<0&&(t.x*=-1),t}},{key:"getRotation",value:function(t,e){var n=e.m00+e.m05+e.m10,i=0;return n>0?(i=2*Math.sqrt(n+1),t.w=.25*i,t.x=(e.m06-e.m09)/i,t.y=(e.m08-e.m02)/i,t.z=(e.m01-e.m04)/i):e.m00>e.m05&&e.m00>e.m10?(i=2*Math.sqrt(1+e.m00-e.m05-e.m10),t.w=(e.m06-e.m09)/i,t.x=.25*i,t.y=(e.m01+e.m04)/i,t.z=(e.m08+e.m02)/i):e.m05>e.m10?(i=2*Math.sqrt(1+e.m05-e.m00-e.m10),t.w=(e.m08-e.m02)/i,t.x=(e.m01+e.m04)/i,t.y=.25*i,t.z=(e.m06+e.m09)/i):(i=2*Math.sqrt(1+e.m10-e.m00-e.m05),t.w=(e.m01-e.m04)/i,t.x=(e.m08+e.m02)/i,t.y=(e.m06+e.m09)/i,t.z=.25*i),t}},{key:"toRTS",value:function(t,e,n,i){i.x=br.set(jr,t.m00,t.m01,t.m02).length(),Lr.m00=t.m00/i.x,Lr.m01=t.m01/i.x,Lr.m02=t.m02/i.x,i.y=br.set(jr,t.m04,t.m05,t.m06).length(),Lr.m03=t.m04/i.y,Lr.m04=t.m05/i.y,Lr.m05=t.m06/i.y,i.z=br.set(jr,t.m08,t.m09,t.m10).length(),Lr.m06=t.m08/i.z,Lr.m07=t.m09/i.z,Lr.m08=t.m10/i.z,Ar.determinant(Lr)<0&&(i.x*=-1,Lr.m00*=-1,Lr.m01*=-1,Lr.m02*=-1),Sr.fromMat3(e,Lr),br.set(n,t.m12,t.m13,t.m14)}},{key:"fromRTS",value:function(t,e,n,i){var r=e.x,a=e.y,s=e.z,m=e.w,o=r+r,u=a+a,h=s+s,l=r*o,c=r*u,y=r*h,f=a*u,v=a*h,d=s*h,_=m*o,p=m*u,g=m*h,x=i.x,b=i.y,w=i.z;return t.m00=(1-(f+d))*x,t.m01=(c+g)*x,t.m02=(y-p)*x,t.m03=0,t.m04=(c-g)*b,t.m05=(1-(l+d))*b,t.m06=(v+_)*b,t.m07=0,t.m08=(y+p)*w,t.m09=(v-_)*w,t.m10=(1-(l+f))*w,t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t}},{key:"fromRTSOrigin",value:function(t,e,n,i,r){var a=e.x,s=e.y,m=e.z,o=e.w,u=a+a,h=s+s,l=m+m,c=a*u,y=a*h,f=a*l,v=s*h,d=s*l,_=m*l,p=o*u,g=o*h,x=o*l,b=i.x,w=i.y,M=i.z,k=r.x,z=r.y,E=r.z;return t.m00=(1-(v+_))*b,t.m01=(y+x)*b,t.m02=(f-g)*b,t.m03=0,t.m04=(y-x)*w,t.m05=(1-(c+_))*w,t.m06=(d+p)*w,t.m07=0,t.m08=(f+g)*M,t.m09=(d-p)*M,t.m10=(1-(c+v))*M,t.m11=0,t.m12=n.x+k-(t.m00*k+t.m04*z+t.m08*E),t.m13=n.y+z-(t.m01*k+t.m05*z+t.m09*E),t.m14=n.z+E-(t.m02*k+t.m06*z+t.m10*E),t.m15=1,t}},{key:"fromQuat",value:function(t,e){var n=e.x,i=e.y,r=e.z,a=e.w,s=n+n,m=i+i,o=r+r,u=n*s,h=i*s,l=i*m,c=r*s,y=r*m,f=r*o,v=a*s,d=a*m,_=a*o;return t.m00=1-l-f,t.m01=h+_,t.m02=c-d,t.m03=0,t.m04=h-_,t.m05=1-u-f,t.m06=y+v,t.m07=0,t.m08=c+d,t.m09=y-v,t.m10=1-u-l,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t}},{key:"frustum",value:function(t,e,n,i,r,a,s){var m=1/(n-e),o=1/(r-i),u=1/(a-s);return t.m00=2*a*m,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=2*a*o,t.m06=0,t.m07=0,t.m08=(n+e)*m,t.m09=(r+i)*o,t.m10=(s+a)*u,t.m11=-1,t.m12=0,t.m13=0,t.m14=s*a*2*u,t.m15=0,t}},{key:"perspective",value:function(t,e,n,i,r){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,o=1/Math.tan(e/2),u=1/(i-r);return t.m00=a?o/n:o,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=(a?o:o*n)*m,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=(r-s*i)*u,t.m11=-1,t.m12=0,t.m13=0,t.m14=r*i*u*(1-s),t.m15=0,t}},{key:"ortho",value:function(t,e,n,i,r,a,s){var m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-1,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,u=1/(e-n),h=1/(i-r),l=1/(a-s);return t.m00=-2*u,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=-2*h*o,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=l*(1-m),t.m11=0,t.m12=(e+n)*u,t.m13=(r+i)*h,t.m14=(a-m*s)*l,t.m15=1,t}},{key:"lookAt",value:function(t,e,n,i){var r=e.x,a=e.y,s=e.z,m=i.x,o=i.y,u=i.z,h=r-n.x,l=a-n.y,c=s-n.z,y=1/Math.sqrt(h*h+l*l+c*c),f=o*(c*=y)-u*(l*=y),v=u*(h*=y)-m*c,d=m*l-o*h,_=l*(d*=y=1/Math.sqrt(f*f+v*v+d*d))-c*(v*=y),p=c*(f*=y)-h*d,g=h*v-l*f;return t.m00=f,t.m01=_,t.m02=h,t.m03=0,t.m04=v,t.m05=p,t.m06=l,t.m07=0,t.m08=d,t.m09=g,t.m10=c,t.m11=0,t.m12=-(f*r+v*a+d*s),t.m13=-(_*r+p*a+g*s),t.m14=-(h*r+l*a+c*s),t.m15=1,t}},{key:"inverseTranspose",value:function(t,e){var n=e.m00,i=e.m01,r=e.m02,a=e.m03,s=e.m04,m=e.m05,o=e.m06,u=e.m07,h=e.m08,l=e.m09,c=e.m10,y=e.m11,f=e.m12,v=e.m13,d=e.m14,_=e.m15,p=n*m-i*s,g=n*o-r*s,x=n*u-a*s,b=i*o-r*m,w=i*u-a*m,M=r*u-a*o,k=h*v-l*f,z=h*d-c*f,E=h*_-y*f,A=l*d-c*v,O=l*_-y*v,N=c*_-y*d,S=p*N-g*O+x*A+b*E-w*z+M*k;return S?(S=1/S,t.m00=(m*N-o*O+u*A)*S,t.m01=(o*E-s*N-u*z)*S,t.m02=(s*O-m*E+u*k)*S,t.m03=0,t.m04=(r*O-i*N-a*A)*S,t.m05=(n*N-r*E+a*z)*S,t.m06=(i*E-n*O-a*k)*S,t.m07=0,t.m08=(v*M-d*w+_*b)*S,t.m09=(d*x-f*M-_*g)*S,t.m10=(f*w-v*x+_*p)*S,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t):null}},{key:"toArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[n+0]=e.m00,t[n+1]=e.m01,t[n+2]=e.m02,t[n+3]=e.m03,t[n+4]=e.m04,t[n+5]=e.m05,t[n+6]=e.m06,t[n+7]=e.m07,t[n+8]=e.m08,t[n+9]=e.m09,t[n+10]=e.m10,t[n+11]=e.m11,t[n+12]=e.m12,t[n+13]=e.m13,t[n+14]=e.m14,t[n+15]=e.m15,t}},{key:"fromArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.m00=e[n+0],t.m01=e[n+1],t.m02=e[n+2],t.m03=e[n+3],t.m04=e[n+4],t.m05=e[n+5],t.m06=e[n+6],t.m07=e[n+7],t.m08=e[n+8],t.m09=e[n+9],t.m10=e[n+10],t.m11=e[n+11],t.m12=e[n+12],t.m13=e[n+13],t.m14=e[n+14],t.m15=e[n+15],t}},{key:"add",value:function(t,e,n){return t.m00=e.m00+n.m00,t.m01=e.m01+n.m01,t.m02=e.m02+n.m02,t.m03=e.m03+n.m03,t.m04=e.m04+n.m04,t.m05=e.m05+n.m05,t.m06=e.m06+n.m06,t.m07=e.m07+n.m07,t.m08=e.m08+n.m08,t.m09=e.m09+n.m09,t.m10=e.m10+n.m10,t.m11=e.m11+n.m11,t.m12=e.m12+n.m12,t.m13=e.m13+n.m13,t.m14=e.m14+n.m14,t.m15=e.m15+n.m15,t}},{key:"subtract",value:function(t,e,n){return t.m00=e.m00-n.m00,t.m01=e.m01-n.m01,t.m02=e.m02-n.m02,t.m03=e.m03-n.m03,t.m04=e.m04-n.m04,t.m05=e.m05-n.m05,t.m06=e.m06-n.m06,t.m07=e.m07-n.m07,t.m08=e.m08-n.m08,t.m09=e.m09-n.m09,t.m10=e.m10-n.m10,t.m11=e.m11-n.m11,t.m12=e.m12-n.m12,t.m13=e.m13-n.m13,t.m14=e.m14-n.m14,t.m15=e.m15-n.m15,t}},{key:"multiplyScalar",value:function(t,e,n){return t.m00=e.m00*n,t.m01=e.m01*n,t.m02=e.m02*n,t.m03=e.m03*n,t.m04=e.m04*n,t.m05=e.m05*n,t.m06=e.m06*n,t.m07=e.m07*n,t.m08=e.m08*n,t.m09=e.m09*n,t.m10=e.m10*n,t.m11=e.m11*n,t.m12=e.m12*n,t.m13=e.m13*n,t.m14=e.m14*n,t.m15=e.m15*n,t}},{key:"multiplyScalarAndAdd",value:function(t,e,n,i){return t.m00=e.m00+n.m00*i,t.m01=e.m01+n.m01*i,t.m02=e.m02+n.m02*i,t.m03=e.m03+n.m03*i,t.m04=e.m04+n.m04*i,t.m05=e.m05+n.m05*i,t.m06=e.m06+n.m06*i,t.m07=e.m07+n.m07*i,t.m08=e.m08+n.m08*i,t.m09=e.m09+n.m09*i,t.m10=e.m10+n.m10*i,t.m11=e.m11+n.m11*i,t.m12=e.m12+n.m12*i,t.m13=e.m13+n.m13*i,t.m14=e.m14+n.m14*i,t.m15=e.m15+n.m15*i,t}},{key:"strictEquals",value:function(t,e){return t.m00===e.m00&&t.m01===e.m01&&t.m02===e.m02&&t.m03===e.m03&&t.m04===e.m04&&t.m05===e.m05&&t.m06===e.m06&&t.m07===e.m07&&t.m08===e.m08&&t.m09===e.m09&&t.m10===e.m10&&t.m11===e.m11&&t.m12===e.m12&&t.m13===e.m13&&t.m14===e.m14&&t.m15===e.m15}},{key:"equals",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vn;return Math.abs(t.m00-e.m00)<=n*Math.max(1,Math.abs(t.m00),Math.abs(e.m00))&&Math.abs(t.m01-e.m01)<=n*Math.max(1,Math.abs(t.m01),Math.abs(e.m01))&&Math.abs(t.m02-e.m02)<=n*Math.max(1,Math.abs(t.m02),Math.abs(e.m02))&&Math.abs(t.m03-e.m03)<=n*Math.max(1,Math.abs(t.m03),Math.abs(e.m03))&&Math.abs(t.m04-e.m04)<=n*Math.max(1,Math.abs(t.m04),Math.abs(e.m04))&&Math.abs(t.m05-e.m05)<=n*Math.max(1,Math.abs(t.m05),Math.abs(e.m05))&&Math.abs(t.m06-e.m06)<=n*Math.max(1,Math.abs(t.m06),Math.abs(e.m06))&&Math.abs(t.m07-e.m07)<=n*Math.max(1,Math.abs(t.m07),Math.abs(e.m07))&&Math.abs(t.m08-e.m08)<=n*Math.max(1,Math.abs(t.m08),Math.abs(e.m08))&&Math.abs(t.m09-e.m09)<=n*Math.max(1,Math.abs(t.m09),Math.abs(e.m09))&&Math.abs(t.m10-e.m10)<=n*Math.max(1,Math.abs(t.m10),Math.abs(e.m10))&&Math.abs(t.m11-e.m11)<=n*Math.max(1,Math.abs(t.m11),Math.abs(e.m11))&&Math.abs(t.m12-e.m12)<=n*Math.max(1,Math.abs(t.m12),Math.abs(e.m12))&&Math.abs(t.m13-e.m13)<=n*Math.max(1,Math.abs(t.m13),Math.abs(e.m13))&&Math.abs(t.m14-e.m14)<=n*Math.max(1,Math.abs(t.m14),Math.abs(e.m14))&&Math.abs(t.m15-e.m15)<=n*Math.max(1,Math.abs(t.m15),Math.abs(e.m15))}}]),r(i,[{key:"clone",value:function(){var t=this;return new i(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08,t.m09,t.m10,t.m11,t.m12,t.m13,t.m14,t.m15)}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,c=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,y=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,d=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return"object"===e(t)?(this.m01=t.m01,this.m02=t.m02,this.m03=t.m03,this.m04=t.m04,this.m05=t.m05,this.m06=t.m06,this.m07=t.m07,this.m08=t.m08,this.m09=t.m09,this.m10=t.m10,this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m14=t.m14,this.m15=t.m15,this.m00=t.m00):(this.m01=n,this.m02=i,this.m03=r,this.m04=a,this.m05=s,this.m06=m,this.m07=o,this.m08=u,this.m09=h,this.m10=l,this.m11=c,this.m12=y,this.m13=f,this.m14=v,this.m15=d,this.m00=t),this}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vn;return Math.abs(this.m00-t.m00)<=e*Math.max(1,Math.abs(this.m00),Math.abs(t.m00))&&Math.abs(this.m01-t.m01)<=e*Math.max(1,Math.abs(this.m01),Math.abs(t.m01))&&Math.abs(this.m02-t.m02)<=e*Math.max(1,Math.abs(this.m02),Math.abs(t.m02))&&Math.abs(this.m03-t.m03)<=e*Math.max(1,Math.abs(this.m03),Math.abs(t.m03))&&Math.abs(this.m04-t.m04)<=e*Math.max(1,Math.abs(this.m04),Math.abs(t.m04))&&Math.abs(this.m05-t.m05)<=e*Math.max(1,Math.abs(this.m05),Math.abs(t.m05))&&Math.abs(this.m06-t.m06)<=e*Math.max(1,Math.abs(this.m06),Math.abs(t.m06))&&Math.abs(this.m07-t.m07)<=e*Math.max(1,Math.abs(this.m07),Math.abs(t.m07))&&Math.abs(this.m08-t.m08)<=e*Math.max(1,Math.abs(this.m08),Math.abs(t.m08))&&Math.abs(this.m09-t.m09)<=e*Math.max(1,Math.abs(this.m09),Math.abs(t.m09))&&Math.abs(this.m10-t.m10)<=e*Math.max(1,Math.abs(this.m10),Math.abs(t.m10))&&Math.abs(this.m11-t.m11)<=e*Math.max(1,Math.abs(this.m11),Math.abs(t.m11))&&Math.abs(this.m12-t.m12)<=e*Math.max(1,Math.abs(this.m12),Math.abs(t.m12))&&Math.abs(this.m13-t.m13)<=e*Math.max(1,Math.abs(this.m13),Math.abs(t.m13))&&Math.abs(this.m14-t.m14)<=e*Math.max(1,Math.abs(this.m14),Math.abs(t.m14))&&Math.abs(this.m15-t.m15)<=e*Math.max(1,Math.abs(this.m15),Math.abs(t.m15))}},{key:"strictEquals",value:function(t){return this.m00===t.m00&&this.m01===t.m01&&this.m02===t.m02&&this.m03===t.m03&&this.m04===t.m04&&this.m05===t.m05&&this.m06===t.m06&&this.m07===t.m07&&this.m08===t.m08&&this.m09===t.m09&&this.m10===t.m10&&this.m11===t.m11&&this.m12===t.m12&&this.m13===t.m13&&this.m14===t.m14&&this.m15===t.m15}},{key:"toString",value:function(){return"[\n"+this.m00+", "+this.m01+", "+this.m02+", "+this.m03+",\n"+this.m04+", "+this.m05+", "+this.m06+", "+this.m07+",\n"+this.m08+", "+this.m09+", "+this.m10+", "+this.m11+",\n"+this.m12+", "+this.m13+", "+this.m14+", "+this.m15+"\n]"}},{key:"identity",value:function(){return this.m00=1,this.m01=0,this.m02=0,this.m03=0,this.m04=0,this.m05=1,this.m06=0,this.m07=0,this.m08=0,this.m09=0,this.m10=1,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=1,this}},{key:"transpose",value:function(){var t=this.m01,e=this.m02,n=this.m03,i=this.m06,r=this.m07,a=this.m11;return this.m01=this.m04,this.m02=this.m08,this.m03=this.m12,this.m04=t,this.m06=this.m09,this.m07=this.m13,this.m08=e,this.m09=i,this.m11=this.m14,this.m12=n,this.m13=r,this.m14=a,this}},{key:"invert",value:function(){var t=this.m00,e=this.m01,n=this.m02,i=this.m03,r=this.m04,a=this.m05,s=this.m06,m=this.m07,o=this.m08,u=this.m09,h=this.m10,l=this.m11,c=this.m12,y=this.m13,f=this.m14,v=this.m15,d=t*a-e*r,_=t*s-n*r,p=t*m-i*r,g=e*s-n*a,x=e*m-i*a,b=n*m-i*s,w=o*y-u*c,M=o*f-h*c,k=o*v-l*c,z=u*f-h*y,E=u*v-l*y,A=h*v-l*f,O=d*A-_*E+p*z+g*k-x*M+b*w;return 0===O?(this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),this):(O=1/O,this.m00=(a*A-s*E+m*z)*O,this.m01=(n*E-e*A-i*z)*O,this.m02=(y*b-f*x+v*g)*O,this.m03=(h*x-u*b-l*g)*O,this.m04=(s*k-r*A-m*M)*O,this.m05=(t*A-n*k+i*M)*O,this.m06=(f*p-c*b-v*_)*O,this.m07=(o*b-h*p+l*_)*O,this.m08=(r*E-a*k+m*w)*O,this.m09=(e*k-t*E-i*w)*O,this.m10=(c*x-y*p+v*d)*O,this.m11=(u*p-o*x-l*d)*O,this.m12=(a*M-r*z-s*w)*O,this.m13=(t*z-e*M+n*w)*O,this.m14=(y*_-c*g-f*d)*O,this.m15=(o*g-u*_+h*d)*O,this)}},{key:"determinant",value:function(){var t=this.m00,e=this.m01,n=this.m02,i=this.m03,r=this.m04,a=this.m05,s=this.m06,m=this.m07,o=this.m08,u=this.m09,h=this.m10,l=this.m11,c=this.m12,y=this.m13,f=this.m14,v=this.m15;return(t*a-e*r)*(h*v-l*f)-(t*s-n*r)*(u*v-l*y)+(t*m-i*r)*(u*f-h*y)+(e*s-n*a)*(o*v-l*c)-(e*m-i*a)*(o*f-h*c)+(n*m-i*s)*(o*y-u*c)}},{key:"add",value:function(t){return this.m00=this.m00+t.m00,this.m01=this.m01+t.m01,this.m02=this.m02+t.m02,this.m03=this.m03+t.m03,this.m04=this.m04+t.m04,this.m05=this.m05+t.m05,this.m06=this.m06+t.m06,this.m07=this.m07+t.m07,this.m08=this.m08+t.m08,this.m09=this.m09+t.m09,this.m10=this.m10+t.m10,this.m11=this.m11+t.m11,this.m12=this.m12+t.m12,this.m13=this.m13+t.m13,this.m14=this.m14+t.m14,this.m15=this.m15+t.m15,this}},{key:"subtract",value:function(t){return this.m00=this.m00-t.m00,this.m01=this.m01-t.m01,this.m02=this.m02-t.m02,this.m03=this.m03-t.m03,this.m04=this.m04-t.m04,this.m05=this.m05-t.m05,this.m06=this.m06-t.m06,this.m07=this.m07-t.m07,this.m08=this.m08-t.m08,this.m09=this.m09-t.m09,this.m10=this.m10-t.m10,this.m11=this.m11-t.m11,this.m12=this.m12-t.m12,this.m13=this.m13-t.m13,this.m14=this.m14-t.m14,this.m15=this.m15-t.m15,this}},{key:"multiply",value:function(t){var e=this.m00,n=this.m01,i=this.m02,r=this.m03,a=this.m04,s=this.m05,m=this.m06,o=this.m07,u=this.m08,h=this.m09,l=this.m10,c=this.m11,y=this.m12,f=this.m13,v=this.m14,d=this.m15,_=t.m00,p=t.m01,g=t.m02,x=t.m03;return this.m00=_*e+p*a+g*u+x*y,this.m01=_*n+p*s+g*h+x*f,this.m02=_*i+p*m+g*l+x*v,this.m03=_*r+p*o+g*c+x*d,_=t.m04,p=t.m05,g=t.m06,x=t.m07,this.m04=_*e+p*a+g*u+x*y,this.m05=_*n+p*s+g*h+x*f,this.m06=_*i+p*m+g*l+x*v,this.m07=_*r+p*o+g*c+x*d,_=t.m08,p=t.m09,g=t.m10,x=t.m11,this.m08=_*e+p*a+g*u+x*y,this.m09=_*n+p*s+g*h+x*f,this.m10=_*i+p*m+g*l+x*v,this.m11=_*r+p*o+g*c+x*d,_=t.m12,p=t.m13,g=t.m14,x=t.m15,this.m12=_*e+p*a+g*u+x*y,this.m13=_*n+p*s+g*h+x*f,this.m14=_*i+p*m+g*l+x*v,this.m15=_*r+p*o+g*c+x*d,this}},{key:"multiplyScalar",value:function(t){return this.m00=this.m00*t,this.m01=this.m01*t,this.m02=this.m02*t,this.m03=this.m03*t,this.m04=this.m04*t,this.m05=this.m05*t,this.m06=this.m06*t,this.m07=this.m07*t,this.m08=this.m08*t,this.m09=this.m09*t,this.m10=this.m10*t,this.m11=this.m11*t,this.m12=this.m12*t,this.m13=this.m13*t,this.m14=this.m14*t,this.m15=this.m15*t,this}},{key:"translate",value:function(t){return console.warn("function changed"),this.m12+=t.x,this.m13+=t.y,this.m14+=t.z,this}},{key:"scale",value:function(t){var e=t.x,n=t.y,i=t.z;return this.m00=this.m00*e,this.m01=this.m01*e,this.m02=this.m02*e,this.m03=this.m03*e,this.m04=this.m04*n,this.m05=this.m05*n,this.m06=this.m06*n,this.m07=this.m07*n,this.m08=this.m08*i,this.m09=this.m09*i,this.m10=this.m10*i,this.m11=this.m11*i,this.m12=this.m12,this.m13=this.m13,this.m14=this.m14,this.m15=this.m15,this}},{key:"rotate",value:function(t,e){var n=e.x,i=e.y,r=e.z,a=Math.sqrt(n*n+i*i+r*r);if(Math.abs(a)<Vn)return null;n*=a=1/a,i*=a,r*=a;var s=Math.sin(t),m=Math.cos(t),o=1-m,u=this.m00,h=this.m01,l=this.m02,c=this.m03,y=this.m04,f=this.m05,v=this.m06,d=this.m07,_=this.m08,p=this.m09,g=this.m10,x=this.m11,b=n*n*o+m,w=i*n*o+r*s,M=r*n*o-i*s,k=n*i*o-r*s,z=i*i*o+m,E=r*i*o+n*s,A=n*r*o+i*s,O=i*r*o-n*s,N=r*r*o+m;return this.m00=u*b+y*w+_*M,this.m01=h*b+f*w+p*M,this.m02=l*b+v*w+g*M,this.m03=c*b+d*w+x*M,this.m04=u*k+y*z+_*E,this.m05=h*k+f*z+p*E,this.m06=l*k+v*z+g*E,this.m07=c*k+d*z+x*E,this.m08=u*A+y*O+_*N,this.m09=h*A+f*O+p*N,this.m10=l*A+v*O+g*N,this.m11=c*A+d*O+x*N,this}},{key:"getTranslation",value:function(t){return t.x=this.m12,t.y=this.m13,t.z=this.m14,t}},{key:"getScale",value:function(t){var e=Lr.m00=this.m00,n=Lr.m01=this.m01,i=Lr.m02=this.m02,r=Lr.m03=this.m04,a=Lr.m04=this.m05,s=Lr.m05=this.m06,m=Lr.m06=this.m08,o=Lr.m07=this.m09,u=Lr.m08=this.m10;return t.x=Math.sqrt(e*e+n*n+i*i),t.y=Math.sqrt(r*r+a*a+s*s),t.z=Math.sqrt(m*m+o*o+u*u),Ar.determinant(Lr)<0&&(t.x*=-1),t}},{key:"getRotation",value:function(t){var e=this.m00+this.m05+this.m10,n=0;return e>0?(n=2*Math.sqrt(e+1),t.w=.25*n,t.x=(this.m06-this.m09)/n,t.y=(this.m08-this.m02)/n,t.z=(this.m01-this.m04)/n):this.m00>this.m05&&this.m00>this.m10?(n=2*Math.sqrt(1+this.m00-this.m05-this.m10),t.w=(this.m06-this.m09)/n,t.x=.25*n,t.y=(this.m01+this.m04)/n,t.z=(this.m08+this.m02)/n):this.m05>this.m10?(n=2*Math.sqrt(1+this.m05-this.m00-this.m10),t.w=(this.m08-this.m02)/n,t.x=(this.m01+this.m04)/n,t.y=.25*n,t.z=(this.m06+this.m09)/n):(n=2*Math.sqrt(1+this.m10-this.m00-this.m05),t.w=(this.m01-this.m04)/n,t.x=(this.m08+this.m02)/n,t.y=(this.m06+this.m09)/n,t.z=.25*n),t}},{key:"fromRTS",value:function(t,e,n){var i=t.x,r=t.y,a=t.z,s=t.w,m=i+i,o=r+r,u=a+a,h=i*m,l=i*o,c=i*u,y=r*o,f=r*u,v=a*u,d=s*m,_=s*o,p=s*u,g=n.x,x=n.y,b=n.z;return this.m00=(1-(y+v))*g,this.m01=(l+p)*g,this.m02=(c-_)*g,this.m03=0,this.m04=(l-p)*x,this.m05=(1-(h+v))*x,this.m06=(f+d)*x,this.m07=0,this.m08=(c+_)*b,this.m09=(f-d)*b,this.m10=(1-(h+y))*b,this.m11=0,this.m12=e.x,this.m13=e.y,this.m14=e.z,this.m15=1,this}},{key:"fromQuat",value:function(t){var e=t.x,n=t.y,i=t.z,r=t.w,a=e+e,s=n+n,m=i+i,o=e*a,u=n*a,h=n*s,l=i*a,c=i*s,y=i*m,f=r*a,v=r*s,d=r*m;return this.m00=1-h-y,this.m01=u+d,this.m02=l-v,this.m03=0,this.m04=u-d,this.m05=1-o-y,this.m06=c+f,this.m07=0,this.m08=l+v,this.m09=c-f,this.m10=1-o-h,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=1,this}}]),i}(ue));qr.IDENTITY=Object.freeze(new qr);var jr=new br,Lr=new Ar;function Br(t,e,n,i,r,a,s,m,o,u,h,l,c,y,f,v){return new qr(t,e,n,i,r,a,s,m,o,u,h,l,c,y,f,v)}Qe.fastDefine("cc.Mat4",qr,{m00:1,m01:0,m02:0,m03:0,m04:0,m05:1,m06:0,m07:0,m08:0,m09:0,m10:1,m11:0,m12:0,m13:0,m14:0,m15:1}),O.Mat4=qr,O.mat4=Br;var Vr=t("S",function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n(this,t),this.a=e,this.b=i,this.c=r,this.d=a,this.tx=s,this.ty=m}return r(t,null,[{key:"identity",value:function(){return new t}},{key:"clone",value:function(e){return new t(e.a,e.b,e.c,e.d,e.tx,e.ty)}},{key:"concat",value:function(t,e,n){var i=e.a,r=e.b,a=e.c,s=e.d,m=e.tx,o=e.ty;t.a=i*n.a+r*n.c,t.b=i*n.b+r*n.d,t.c=a*n.a+s*n.c,t.d=a*n.b+s*n.d,t.tx=m*n.a+o*n.c+n.tx,t.ty=m*n.b+o*n.d+n.ty}},{key:"invert",value:function(t,e){var n=1/(e.a*e.d-e.b*e.c);t.a=n*e.d,t.b=-n*e.b,t.c=-n*e.c,t.d=n*e.a,t.tx=n*(e.c*e.ty-e.d*e.tx),t.ty=n*(e.b*e.tx-e.a*e.ty)}},{key:"fromMat4",value:function(t,e){t.a=e.m00,t.b=e.m01,t.c=e.m04,t.d=e.m05,t.tx=e.m12,t.ty=e.m13}},{key:"transformVec2",value:function(t,e,n,i){var r,a;void 0===i?(i=n,r=e.x,a=e.y):(r=e,a=n),t.x=i.a*r+i.c*a+i.tx,t.y=i.b*r+i.d*a+i.ty}},{key:"transformSize",value:function(t,e,n){t.width=n.a*e.width+n.c*e.height,t.height=n.b*e.width+n.d*e.height}},{key:"transformRect",value:function(t,e,n){var i=e.x+e.width,r=e.y+e.height,a=n.a*e.x+n.c*e.y+n.tx,s=n.b*e.x+n.d*e.y+n.ty,m=n.a*i+n.c*e.y+n.tx,o=n.b*i+n.d*e.y+n.ty,u=n.a*e.x+n.c*r+n.tx,h=n.b*e.x+n.d*r+n.ty,l=n.a*i+n.c*r+n.tx,c=n.b*i+n.d*r+n.ty,y=Math.min(a,m,u,l),f=Math.max(a,m,u,l),v=Math.min(s,o,h,c),d=Math.max(s,o,h,c);t.x=y,t.y=v,t.width=f-y,t.height=d-v}},{key:"transformObb",value:function(t,e,n,i,r,a){var s=a.a*r.x+a.c*r.y+a.tx,m=a.b*r.x+a.d*r.y+a.ty,o=a.a*r.width,u=a.b*r.width,h=a.c*r.height,l=a.d*r.height;e.x=s,e.y=m,n.x=o+s,n.y=u+m,t.x=h+s,t.y=l+m,i.x=o+h+s,i.y=u+l+m}}]),t}());O.AffineTransform=Vr;var Gr=t("T",function(t){function i(t,r){var a;return n(this,i),a=h(this,m(i).call(this)),t&&"object"===e(t)?(a.height=t.height,a.width=t.width):(a.width=t||0,a.height=r||0),a}return s(i,t),r(i,[{key:"x",set:function(t){this.width=t},get:function(){return this.width}},{key:"y",set:function(t){this.height=t},get:function(){return this.height}}],[{key:"lerp",value:function(t,e,n,i){return t.width=e.width+(n.width-e.width)*i,t.height=e.height+(n.height-e.height)*i,t}}]),r(i,[{key:"clone",value:function(){return new i(this.width,this.height)}},{key:"set",value:function(t,n){return t&&"object"===e(t)?(this.height=t.height,this.width=t.width):(this.width=t||0,this.height=n||0),this}},{key:"equals",value:function(t){return this.width===t.width&&this.height===t.height}},{key:"lerp",value:function(t,e){return this.width=this.width+(t.width-this.width)*e,this.height=this.height+(t.height-this.height)*e,this}},{key:"toString",value:function(){return"(".concat(this.width.toFixed(2),", ").concat(this.height.toFixed(2),")")}}]),i}(ue));function Ur(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Gr(t,e)}Gr.ZERO=Object.freeze(new Gr(0,0)),Gr.ONE=Object.freeze(new Gr(1,1)),Qe.fastDefine("cc.Size",Gr,{width:0,height:0}),O.size=Ur,O.Size=Gr;var Wr=t("W",function(t){function i(t,r,a,s){var o;return n(this,i),o=h(this,m(i).call(this)),t&&"object"===e(t)?(o.y=t.y,o.width=t.width,o.height=t.height,o.x=t.x):(o.x=t||0,o.y=r||0,o.width=a||0,o.height=s||0),o}return s(i,t),r(i,[{key:"xMin",get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t}},{key:"yMin",get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t}},{key:"xMax",get:function(){return this.x+this.width},set:function(t){this.width=t-this.x}},{key:"yMax",get:function(){return this.y+this.height},set:function(t){this.height=t-this.y}},{key:"center",get:function(){return new _r(this.x+.5*this.width,this.y+.5*this.height)},set:function(t){this.x=t.x-.5*this.width,this.y=t.y-.5*this.height}},{key:"origin",get:function(){return new O.Vec2(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},{key:"size",get:function(){return new Gr(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},{key:"z",set:function(t){this.width=t},get:function(){return this.width}},{key:"w",set:function(t){this.height=t},get:function(){return this.height}}],[{key:"fromMinMax",value:function(t,e,n){var i=Math.min(e.x,n.x),r=Math.min(e.y,n.y),a=Math.max(e.x,n.x),s=Math.max(e.y,n.y);return t.x=i,t.y=r,t.width=a-i,t.height=s-r,t}},{key:"lerp",value:function(t,e,n,i){var r=e.x,a=e.y,s=e.width,m=e.height;return t.x=r+(n.x-r)*i,t.y=a+(n.y-a)*i,t.width=s+(n.width-s)*i,t.height=m+(n.height-m)*i,t}},{key:"intersection",value:function(t,e,n){var i=e.x,r=e.y,a=e.x+e.width,s=e.y+e.height,m=n.x,o=n.y,u=n.x+n.width,h=n.y+n.height;return t.x=Math.max(i,m),t.y=Math.max(r,o),t.width=Math.min(a,u)-t.x,t.height=Math.min(s,h)-t.y,t}},{key:"union",value:function(t,e,n){var i=e.x,r=e.y,a=e.width,s=e.height,m=n.x,o=n.y,u=n.width,h=n.height;return t.x=Math.min(i,m),t.y=Math.min(r,o),t.width=Math.max(i+a,m+u)-t.x,t.height=Math.max(r+s,o+h)-t.y,t}}]),r(i,[{key:"clone",value:function(){return new i(this.x,this.y,this.width,this.height)}},{key:"set",value:function(t,n,i,r){return t&&"object"===e(t)?(this.y=t.y,this.width=t.width,this.height=t.height,this.x=t.x):(this.x=t||0,this.y=n||0,this.width=i||0,this.height=r||0),this}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}},{key:"lerp",value:function(t,e){var n=this.x,i=this.y,r=this.width,a=this.height;return this.x=n+(t.x-n)*e,this.y=i+(t.y-i)*e,this.width=r+(t.width-r)*e,this.height=a+(t.height-a)*e,this}},{key:"toString",value:function(){return"(".concat(this.x.toFixed(2),", ").concat(this.y.toFixed(2),", ").concat(this.width.toFixed(2),", ").concat(this.height.toFixed(2),")")}},{key:"intersects",value:function(t){var e=this.x+this.width,n=this.y+this.height,i=t.x+t.width,r=t.y+t.height;return!(e<t.x||i<this.x||n<t.y||r<this.y)}},{key:"contains",value:function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y}},{key:"containsRect",value:function(t){return this.x<=t.x&&this.x+this.width>=t.x+t.width&&this.y<=t.y&&this.y+this.height>=t.y+t.height}},{key:"transformMat4",value:function(t){var e=this.x,n=this.y,i=e+this.width,r=n+this.height,a=t.m00*e+t.m04*n+t.m12,s=t.m01*e+t.m05*n+t.m13,m=t.m00*i+t.m04*n+t.m12,o=t.m01*i+t.m05*n+t.m13,u=t.m00*e+t.m04*r+t.m12,h=t.m01*e+t.m05*r+t.m13,l=t.m00*i+t.m04*r+t.m12,c=t.m01*i+t.m05*r+t.m13,y=Math.min(a,m,u,l),f=Math.max(a,m,u,l),v=Math.min(s,o,h,c),d=Math.max(s,o,h,c);return this.x=y,this.y=v,this.width=f-y,this.height=d-v,this}}]),i}(ue));function Fr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Wr(t,e,n,i)}Qe.fastDefine("cc.Rect",Wr,{x:0,y:0,width:0,height:0}),O.Rect=Wr,O.rect=Fr;var Yr=t("Y",function(t){function i(t,e,r,a){var s;return n(this,i),(s=h(this,m(i).call(this)))._val=0,"string"==typeof t?s.fromHEX(t):void 0!==e?s.set(t,e,r,a):s.set(t),s}return s(i,t),r(i,[{key:"r",get:function(){return 255&this._val},set:function(t){t=~~Gn(t,0,255),this._val=(4294967040&this._val|t)>>>0}},{key:"g",get:function(){return(65280&this._val)>>8},set:function(t){t=~~Gn(t,0,255),this._val=(4294902015&this._val|t<<8)>>>0}},{key:"b",get:function(){return(16711680&this._val)>>16},set:function(t){t=~~Gn(t,0,255),this._val=(4278255615&this._val|t<<16)>>>0}},{key:"a",get:function(){return(4278190080&this._val)>>>24},set:function(t){t=~~Gn(t,0,255),this._val=(16777215&this._val|t<<24>>>0)>>>0}},{key:"x",get:function(){return this.r*(1/255)},set:function(t){this.r=255*t}},{key:"y",get:function(){return this.g*(1/255)},set:function(t){this.g=255*t}},{key:"z",get:function(){return this.b*(1/255)},set:function(t){this.b=255*t}},{key:"w",get:function(){return this.a*(1/255)},set:function(t){this.a=255*t}}],[{key:"clone",value:function(t){var e=new i;return t._val?e._val=t._val:e._val=(t.a<<24>>>0)+(t.b<<16)+(t.g<<8)+t.r,e}},{key:"copy",value:function(t,e){return t.r=e.r,t.g=e.g,t.b=e.b,t.a=e.a,t}},{key:"set",value:function(t,e,n,i,r){return t.r=e,t.g=n,t.b=i,t.a=r,t}},{key:"fromHEX",value:function(t,e){return e=0===e.indexOf("#")?e.substring(1):e,t.r=parseInt(e.substr(0,2),16)||0,t.g=parseInt(e.substr(2,2),16)||0,t.b=parseInt(e.substr(4,2),16)||0,t.a=parseInt(e.substr(6,2),16)||255,t._val=(t.a<<24>>>0)+(t.b<<16)+(t.g<<8)+t.r,t}},{key:"add",value:function(t,e,n){return t.r=e.r+n.r,t.g=e.g+n.g,t.b=e.b+n.b,t.a=e.a+n.a,t}},{key:"subtract",value:function(t,e,n){return t.r=e.r-n.r,t.g=e.g-n.g,t.b=e.b-n.b,t.a=e.a-n.a,t}},{key:"multiply",value:function(t,e,n){return t.r=e.r*n.r,t.g=e.g*n.g,t.b=e.b*n.b,t.a=e.a*n.a,t}},{key:"divide",value:function(t,e,n){return t.r=e.r/n.r,t.g=e.g/n.g,t.b=e.b/n.b,t.a=e.a/n.a,t}},{key:"scale",value:function(t,e,n){return t.r=e.r*n,t.g=e.g*n,t.b=e.b*n,t.a=e.a*n,t}},{key:"lerp",value:function(t,e,n,i){var r=e.r,a=e.g,s=e.b,m=e.a;return r+=(n.r-r)*i,a+=(n.g-a)*i,s+=(n.b-s)*i,m+=(n.a-m)*i,t._val=Math.floor((m<<24>>>0)+(s<<16)+(a<<8)+r),t}},{key:"toArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e instanceof i||e.a>1?1/255:1;return t[n+0]=e.r*r,t[n+1]=e.g*r,t[n+2]=e.b*r,t[n+3]=e.a*r,t}},{key:"fromArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.r=255*t[n+0],e.g=255*t[n+1],e.b=255*t[n+2],e.a=255*t[n+3],e}},{key:"strictEquals",value:function(t,e){return t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a}},{key:"equals",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vn;return Math.abs(t.r-e.r)<=n*Math.max(1,Math.abs(t.r),Math.abs(e.r))&&Math.abs(t.g-e.g)<=n*Math.max(1,Math.abs(t.g),Math.abs(e.g))&&Math.abs(t.b-e.b)<=n*Math.max(1,Math.abs(t.b),Math.abs(e.b))&&Math.abs(t.a-e.a)<=n*Math.max(1,Math.abs(t.a),Math.abs(e.a))}},{key:"hex",value:function(t){return(255*t.r<<24|255*t.g<<16|255*t.b<<8|255*t.a)>>>0}}]),r(i,[{key:"clone",value:function(){var t=new i;return t._val=this._val,t}},{key:"equals",value:function(t){return t&&this._val===t._val}},{key:"lerp",value:function(t,e){var n=this.r,i=this.g,r=this.b,a=this.a;return n+=(t.r-n)*e,i+=(t.g-i)*e,r+=(t.b-r)*e,a+=(t.a-a)*e,this._val=Math.floor((a<<24>>>0)+(r<<16)+(i<<8)+n),this}},{key:"toString",value:function(){return"rgba("+this.r.toFixed()+", "+this.g.toFixed()+", "+this.b.toFixed()+", "+this.a.toFixed()+")"}},{key:"toCSS",value:function(t){return"rgba"===t?"rgba("+(0|this.r)+","+(0|this.g)+","+(0|this.b)+","+(this.a*(1/255)).toFixed(2)+")":"rgb"===t?"rgb("+(0|this.r)+","+(0|this.g)+","+(0|this.b)+")":"#"+this.toHEX(t)}},{key:"fromHEX",value:function(t){t=0===t.indexOf("#")?t.substring(1):t;var e=parseInt(t.substr(0,2),16)||0,n=parseInt(t.substr(2,2),16)||0,i=parseInt(t.substr(4,2),16)||0,r=parseInt(t.substr(6,2),16)||255;return this._val=(r<<24>>>0)+(i<<16)+(n<<8)+e,this}},{key:"toHEX",value:function(t){var e=[(this.r<16?"0":"")+(0|this.r).toString(16),(this.g<16?"0":"")+(0|this.g).toString(16),(this.b<16?"0":"")+(0|this.b).toString(16)],n=-1;if("#rgb"===t)for(n=0;n<e.length;++n)e[n].length>1&&(e[n]=e[n][0]);else if("#rrggbb"===t)for(n=0;n<e.length;++n)1===e[n].length&&(e[n]="0"+e[n]);else"#rrggbbaa"===t&&e.push((this.a<16?"0":"")+(0|this.a).toString(16));return e.join("")}},{key:"toRGBValue",value:function(){return 16777215&this._val}},{key:"fromHSV",value:function(t,e,n){var i=0,r=0,a=0;if(0===e)i=r=a=n;else if(0===n)i=r=a=0;else{1===t&&(t=0),t*=6,e=e,n=n;var s=Math.floor(t),m=t-s,o=n*(1-e),u=n*(1-e*m),h=n*(1-e*(1-m));switch(s){case 0:i=n,r=h,a=o;break;case 1:i=u,r=n,a=o;break;case 2:i=o,r=n,a=h;break;case 3:i=o,r=u,a=n;break;case 4:i=h,r=o,a=n;break;case 5:i=n,r=o,a=u}}return i*=255,r*=255,a*=255,this._val=(this.a<<24>>>0)+(a<<16)+(r<<8)+i,this}},{key:"toHSV",value:function(){var t=this.r*(1/255),e=this.g*(1/255),n=this.b*(1/255),i={h:0,s:0,v:0},r=Math.max(t,e,n),a=Math.min(t,e,n),s=0;return i.v=r,i.s=r?(r-a)/r:0,i.s?(s=r-a,i.h=t===r?(e-n)/s:e===r?2+(n-t)/s:4+(t-e)/s,i.h/=6,i.h<0&&(i.h+=1)):i.h=0,i}},{key:"set",value:function(t,n,i,r){return"object"===e(t)?null!=t._val?this._val=t._val:(n=t.g||0,i=t.b||0,r="number"==typeof t.a?t.a:255,t=t.r||0,this._val=(r<<24>>>0)+(i<<16)+(n<<8)+t):(t=t||0,n=n||0,i=i||0,r="number"==typeof r?r:255,this._val=(r<<24>>>0)+(i<<16)+(n<<8)+t),this}},{key:"multiply",value:function(t){var e=(255&this._val)*t.r>>8,n=(65280&this._val)*t.g>>8,i=(16711680&this._val)*t.b>>8,r=((4278190080&this._val)>>>8)*t.a;return this._val=4278190080&r|16711680&i|65280&n|255&e,this}},{key:"_set_r_unsafe",value:function(t){return this._val=(4294967040&this._val|t)>>>0,this}},{key:"_set_g_unsafe",value:function(t){return this._val=(4294902015&this._val|t<<8)>>>0,this}},{key:"_set_b_unsafe",value:function(t){return this._val=(4278255615&this._val|t<<16)>>>0,this}},{key:"_set_a_unsafe",value:function(t){return this._val=(16777215&this._val|t<<24>>>0)>>>0,this}}]),i}(ue));function Hr(t,e,n,i){return new Yr(t,e,n,i)}Yr.WHITE=Object.freeze(new Yr(255,255,255,255)),Yr.GRAY=Object.freeze(new Yr(127,127,127,255)),Yr.BLACK=Object.freeze(new Yr(0,0,0,255)),Yr.TRANSPARENT=Object.freeze(new Yr(0,0,0,0)),Yr.RED=Object.freeze(new Yr(255,0,0,255)),Yr.GREEN=Object.freeze(new Yr(0,255,0,255)),Yr.BLUE=Object.freeze(new Yr(0,0,255,255)),Yr.CYAN=Object.freeze(new Yr(0,255,255,255)),Yr.MAGENTA=Object.freeze(new Yr(255,0,255,255)),Yr.YELLOW=Object.freeze(new Yr(255,255,0,255)),Qe.fastDefine("cc.Color",Yr,{r:0,g:0,b:0,a:255}),O.Color=Yr,O.color=Hr;var Xr,Qr,Kr,Zr,Jr,$r=10;var ta=0,ea=new Map;Kr=function(t,e,n,i,r,a){var s=ea.get(a);s&&s.logTimes>s.count&&(r("'%s' is deprecated, please use '%s' instead.","".concat(t,".").concat(e),"".concat(n,".").concat(i)),s.count++)},Xr=t("ao",(function(t,e,n){null!=t&&n.forEach((function(n){var i=ta++;ea.set(i,{id:i,count:0,logTimes:void 0!==n.logTimes?n.logTimes:$r});var r=null!=n.target?n.target:t,a=null!=n.newName?n.newName:n.name,s=null!=n.targetName?n.targetName:e,m=r==t;if(null!=n.customFunction)t[n.name]=function(){var t;return Kr(e,n.name,s,a,q,i),(t=n.customFunction).call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))};else if(null!=n.customSetter||null!=n.customGetter){var o=null!=n.customSetter,u=null!=n.customGetter;o&&u?Object.defineProperty(t,n.name,{get:function(){return Kr(e,n.name,s,a,q,i),n.customGetter.call(this)},set:function(t){Kr(e,n.name,s,a,q,i),n.customSetter.call(this,t)}}):o?Object.defineProperty(t,n.name,{set:function(t){Kr(e,n.name,s,a,q,i),n.customSetter.call(this,t)}}):u&&Object.defineProperty(t,n.name,{get:function(){return Kr(e,n.name,s,a,q,i),n.customGetter.call(this)}})}else Object.defineProperty(t,n.name,{get:function(){return Kr(e,n.name,s,a,q,i),m?this[a]:r[a]},set:function(t){Kr(e,n.name,s,a,q,i),m?this[a]=t:r[a]=t}})}))})),Jr=function(t,e,n,i,r){var a=ea.get(i),s=void 0===r?"":"("+r+")";a&&a.logTimes>a.count&&(n("'%s' has been removed. "+s,"".concat(t,".").concat(e)),a.count++)},Qr=t("ap",(function(t,e,n){null!=t&&n.forEach((function(n){var i=ta++;ea.set(i,{id:i,count:0,logTimes:void 0!==n.logTimes?n.logTimes:$r}),Object.defineProperty(t,n.name,{get:function(){return Jr(e,n.name,j,i,n.suggest)},set:function(){Jr(e,n.name,j,i,n.suggest)}})}))})),Zr=function(t,e,n,i,r){var a=ea.get(i),s=void 0===r?"":"("+r+")";a&&a.logTimes>a.count&&(n("'%s' is deprecated. "+s,"".concat(t,".").concat(e)),a.count++)},t("aq",(function(t,e,n){if(null!=t){var i=function(t,e,n,i,r,a){if(t.get){var s=t.get();t.get=function(){return Zr(e,n,i,r,a),s.call(this)}}if(t.set){var m=Object.create(t.set);t.set=function(t){Zr(e,n,i,r,a),m.call(this,t)}}};n.forEach((function(n){var r=n.name,a=Object.getOwnPropertyDescriptor(t,r);if(a){var s=ta++;if(ea.set(s,{id:s,count:0,logTimes:void 0!==n.logTimes?n.logTimes:$r}),null!=a.value)if("function"==typeof a.value){var m=a.value;t[r]=function(){return Zr(e,r,q,s,n.suggest),m.call.apply(m,[this].concat(Array.prototype.slice.call(arguments)))}}else i(a,e,r,q,s,n.suggest);else i(a,e,r,q,s,n.suggest)}}))}})),Xr(_r,"Vec2",[{name:"sub",newName:"subtract",target:_r,targetName:"Vec2"},{name:"mul",newName:"multiply",target:_r,targetName:"Vec2"},{name:"div",newName:"divide",target:_r,targetName:"Vec2"},{name:"dist",newName:"distance",target:_r,targetName:"Vec2"},{name:"sqrDist",newName:"squaredDistance",target:_r,targetName:"Vec2"},{name:"mag",newName:"len",target:_r,targetName:"Vec2"},{name:"sqrMag",newName:"lengthSqr",target:_r,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:_r,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:_r,targetName:"Vec2"}]),Xr(_r.prototype,"Vec2",[{name:"mag",newName:"length",target:_r.prototype,targetName:"Vec2"},{name:"magSqr",newName:"lengthSqr",target:_r.prototype,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:_r.prototype,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:_r.prototype,targetName:"Vec2"}]),Qr(_r.prototype,"vmath",[{name:"divide"}]),Xr(br,"Vec3",[{name:"sub",newName:"subtract",target:br,targetName:"Vec3"},{name:"mul",newName:"multiply",target:br,targetName:"Vec3"},{name:"div",newName:"divide",target:br,targetName:"Vec3"},{name:"dist",newName:"distance",target:br,targetName:"Vec3"},{name:"sqrDist",newName:"squaredDistance",target:br,targetName:"Vec3"},{name:"mag",newName:"len",target:br,targetName:"Vec3"},{name:"sqrMag",newName:"lengthSqr",target:br,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:br,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:br,targetName:"Vec3"}]),Xr(br.prototype,"Vec3",[{name:"mag",newName:"length",target:br.prototype,targetName:"Vec3"},{name:"magSqr",newName:"lengthSqr",target:br.prototype,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:br.prototype,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:br.prototype,targetName:"Vec3"}]),Qr(br.prototype,"vmath",[{name:"divide"}]),Xr(zr,"Vec4",[{name:"sub",newName:"subtract",target:zr,targetName:"Vec4"},{name:"mul",newName:"multiply",target:zr,targetName:"Vec4"},{name:"div",newName:"divide",target:zr,targetName:"Vec4"},{name:"dist",newName:"distance",target:zr,targetName:"Vec4"},{name:"sqrDist",newName:"squaredDistance",target:zr,targetName:"Vec4"},{name:"mag",newName:"len",target:zr,targetName:"Vec4"},{name:"sqrMag",newName:"lengthSqr",target:zr,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:zr,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:zr,targetName:"Vec4"}]),Xr(zr.prototype,"Vec4",[{name:"mag",newName:"length",target:zr.prototype,targetName:"Vec4"},{name:"magSqr",newName:"lengthSqr",target:zr.prototype,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:zr.prototype,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:zr.prototype,targetName:"Vec4"}]),Qr(zr.prototype,"vmath",[{name:"divide"}]),Xr(Sr,"Quat",[{name:"mag",newName:"len",target:Sr,targetName:"Quat"},{name:"mul",newName:"multiply",target:Sr,targetName:"Quat"},{name:"sqrMag",newName:"lengthSqr",target:Sr,targetName:"Quat"},{name:"scale",newName:"multiplyScalar",target:Sr,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:Sr,targetName:"Quat"}]),Xr(Sr.prototype,"Quat",[{name:"scale",newName:"multiplyScalar",target:Sr.prototype,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:Sr.prototype,targetName:"Quat"}]),Xr(Yr,"Color",[{name:"sub",newName:"subtract",target:Yr,targetName:"Color"},{name:"mul",newName:"multiply",target:Yr,targetName:"Color"},{name:"div",newName:"divide",target:Yr,targetName:"Color"},{name:"exactEquals",newName:"strictEquals",target:Yr,targetName:"Color"},{name:"fromHex",newName:"fromHEX",customFunction:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[1].toString(16);return O.Color.fromHEX(e[0],i)}}]),Xr(Ar,"Mat3",[{name:"sub",newName:"subtract",target:Ar,targetName:"Mat3"},{name:"mul",newName:"multiply",target:Ar,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:Ar,targetName:"Mat3"}]),Xr(Ar.prototype,"Mat3",[{name:"sub",newName:"subtract",target:Ar.prototype,targetName:"Mat3"},{name:"mul",newName:"multiply",target:Ar.prototype,targetName:"Mat3"},{name:"mulScalar",newName:"multiplyScalar",target:Ar.prototype,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:Ar.prototype,targetName:"Mat3"}]),Xr(qr,"Mat4",[{name:"sub",newName:"subtract",target:qr,targetName:"Mat4"},{name:"mul",newName:"multiply",target:qr,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:qr,targetName:"Mat4"}]),Xr(qr.prototype,"Mat4",[{name:"sub",newName:"subtract",target:qr.prototype,targetName:"Mat4"},{name:"mul",newName:"multiply",target:qr.prototype,targetName:"Mat4"},{name:"mulScalar",newName:"multiplyScalar",target:qr.prototype,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:qr.prototype,targetName:"Mat4"}])}}}));
